(function(){let e=this,t=e.document;try{var n=e.SleekNote.CustomInitSettings.windowIsGlobal?e:void 0}catch(y){}let r=!n,i=t.currentScript.src;0==i.indexOf("//")&&(i="https:"+i);let o=i.substr(0,i.lastIndexOf("/")+1).replace(/([^:]\/)\/+/g,"$1"),a=!1;if(r){let k=t.body||t.head,P=k.querySelector("iframe#sleeknote");P?n=P.contentWindow:(k.insertAdjacentHTML("beforeend",'<iframe id=sleeknote style="display:none!important" aria-hidden="true"></iframe>'),(n=k.lastElementChild.contentWindow).promises=[],a=!0)}let s="";if(!o.includes("local.sleeknote.com")){let I=i.split("/").pop().split(".")[0];s=(I.split("-")[1]||"production")+"/"}let l=new n.URL(e.location),c=l.searchParams;if(c.has("snhide"))return;let u=i.split("#")[1]||"SleekNote",d="https://local.sleeknote.com",m=(c.has("snlocal")||n.local)&&!i.includes(d),p=c.get("snbranch");if(m||p){let N=t.createElement("script");return N.charset="utf-8",m?(c.delete("snlocal"),N.src=String(d).replace(/\/+$/,""),n.local=!0):(c.delete("snbranch"),N.src="https://core-branches.sleeknote.com/branch-"+p),e.history.replaceState(null,null,l.toString()),N.src+="/frontend2/core.js#"+u,void t.head.appendChild(N)}function f(e){let t=e.campaignName;try{t=n.decodeURI(n.decodeURI(t))}catch(e){}return t}if(!e.sndefine){let j=Object.create(null),C=Object.create(null);function O(e){let r=n.Promise.resolve();return j[e]||(r=new n.Promise((n,r)=>{if(C[e])C[e].resolve.push(n),C[e].reject.push(r);else{C[e]={resolve:[n],reject:[r]};let i=t.createElement("script");i.src=o+s+(~e.indexOf(".js")?e:e+".js"),i.name=e,i.async=!0,i.charset="utf-8",t.head.appendChild(i),i.onload=function(){C[e].resolve.forEach(e=>{e()})},i.onerror=function(t){throw C[e].reject.forEach(e=>{e()}),new Error("Error loading: "+t.currentTarget.src)}}})),r.then(()=>j[e])}function E(e,t){return n.Promise.all(e.map(O)).then(e=>{t&&t.apply(this,e)})}function A(...r){var i="string"==typeof r[0]?r.shift():t.currentScript.name,o=Array.isArray(r[0])?r.shift():[],a=r[0];j[i]||(j[i]=n.Promise.resolve().then(()=>n.Promise.all(o.map(O)).then(t=>a.apply(e,t))))}function D(e){return new n.Promise(t=>{E([e],function(e){return t(e)})})}Object.defineProperty(e,"sndefine",{value:A}),Object.defineProperty(e,"arequire",{value:D}),j.global=n.Promise.resolve().then(()=>{if(r){const e=["fetch","FormData","setInterval","setTimeout","clearInterval","clearTimeout","requestAnimationFrame"];return new n.Proxy({},{get(t,r){let i=n[r];return e.includes(r)&&(i=i.bind(n)),i}})}return n}),j["core-sleeknote"]=n.Promise.resolve().then(()=>{e.dev||(e.dev=n.Object.create(null));let t=n.Object.fromEntries(c.entries()),r=t.sndebug;try{void 0===r?r=n.sessionStorage.getItem("sndebug")||"":("0"==r&&(r=""),n.sessionStorage.setItem("sndebug",r))}catch(e){r=""}var i={isSubscribedFromQuery:"true"==t.SNSubscribed||"drip"==t.utm_source&&"email"==t.utm_medium,debug:r,reset:t.snreset,editor:t.sneditor,today:t.sndate,preview:t.snpreview,direct:t.sncampid,timestamp:"?"+(Number("1761131666393")||""),getBase:()=>o+s,local:o.includes("local."),custom(e,t){var n=i.CustomInitSettings[e];return n||t},hasCustomProp:e=>e in i.CustomInitSettings,expose:(t,n)=>(e.dev[n]=t,t),hooks:{},eventName:"eve"+ +new Date,needBadge:!1,getDomainLimits:function(){return i.DomainLimits},namespaces:new n.Set,CustomInitSettings:{},DomainLimits:{},SleekNotes:[],getCampaignName:f};return i.preview&&(i.mergeId=void 0===t.snmergeid?0:t.snmergeid),i})}let g,h=e.arequire("package-core-boot"),v=r?n.promises:[],S={};function w(e,t){t.managed=!0,S[e]||(S[e]=[]),S[e].push(t)}let b=[function(e){"outofstock"==e.SleeknoteType&&w("oos-module",e)},function(e){"calendar"==e.campaignType&&w("calendar-module",e)}];v.push(new n.Promise(function(e){g=e})),n.Promise.allSettled(v.slice(0,-1)).then(function(){h.then(async function(r){await async function({launcher:r,coreConfig:l,emit:d,API:m,CONST:p,storage:f,B:g,siteData:h},v){let S=c.get("sncampid"),w=1==c.get("snrules"),y=c.get("snshow");function k(e){e=e.map(e=>{if(b.forEach(t=>t(e)),e.NS=u,!S||e.CampaignId==S)return w&&(e.rules&&e.rules.groups.forEach(function(e){e.conditions=[]}),delete e.targeting),e}).filter(e=>e),l.SleekNotes.splice(0,0,...e)}l.namespaces.add(u),l.needBadge=!1;let P=Array.isArray(e[u])?e[u].pop():e[u];if(P){if("SleekNote"!=u)try{let t=P.DripAccountId,n=e._dcfg.account_uid;if(t&&n!=t)return console.error(`Drip Account ID's mismatch - _dcfg:${n}, init:${t}. Campaigns in ${i} ignored.`),void v()}catch(e){}for(let[e,t]of n.Object.entries(P))if("SleekNotes"==e)c.has("snpreview")||k(t);else if("HideSleeknoteBadge"==e){if("SleekNote"==u&&!c.has("snpreview")){let e=t;void 0===t&&(e=!0),!e&&P.CustomerId>=790&&(l.needBadge=!0)}}else"object"==typeof t&&t?(l[e]||(l[e]={}),Object.assign(l[e],t)):void 0!==t&&(l[e]=t);let t="isRealMobileSite",r="CustomInitSettings";r in l||(l[r]={}),t in l[r]||(l[r][t]=!0)}await f.postCreate(),(l.local||l.reset)&&"n"!=l.reset&&await f.forceResetSession(l.reset);l.preview&&await n.Promise.all([import(o+s+"preview-utils.js"),import(o+s+"preview-toolbar.js")]).then(async function(e){let[{default:t},{default:n}]=e,r=await t.fetchHTMLConfig(l.preview);k(r),g.is.desktop&&n(r[0],l)});e[u]&&!e[u].API&&(e[u].API=Promise.resolve(m),e[u].triggerOnClick=e[u].triggerOnclick=(...t)=>e[u].API.then(e=>e.call(e,"launch",...t)));l.debug&&a&&t.addEventListener(d.createUserEventName(u),function({data:e}){console.log(e)});h.initialize(),await r.add(l.SleekNotes.filter(e=>!e.managed),{ignoreRules:S&&!y});let I=await e.arequire("package-tracker");n.trackPageView||I.trackPageView(u)&&(n.trackPageView=!0);await d(p.CORE.EVENTS.LOAD,{NS:u,command:function(){try{return m.apply(null,arguments)}catch(e){console.warn("Error calling API",e)}}}),v()}(r,g);for(let[t,r]of n.Object.entries(S))e.arequire(t).then(e=>{e(u,r)})})}),function(){try{return e.location!==e.parent.location}catch(e){}}()&&e.parent.postMessage(e.JSON.stringify({fingerprint:"SleekNote",command:"core-loaded"}),"*")}).call(this);