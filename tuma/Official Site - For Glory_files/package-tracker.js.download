sndefine("atob",[],function(){function e(e,t,n,a,i,r){return o(function(e,t){return e<<t|e>>>32-t}(o(o(t,e),o(a,r)),i),n)}function t(t,n,a,i,o,r,s){return e(n&a|~n&i,t,n,o,r,s)}function n(t,n,a,i,o,r,s){return e(n&i|a&~i,t,n,o,r,s)}function a(t,n,a,i,o,r,s){return e(n^a^i,t,n,o,r,s)}function i(t,n,a,i,o,r,s){return e(a^(n|~i),t,n,o,r,s)}function o(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return function(e){var r=function(e){for(var t,n="0123456789ABCDEF",a="",i=0;i<e.length;i++)t=e.charCodeAt(i),a+=n.charAt(t>>>4&15)+n.charAt(15&t);return a}(function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}(function(e,r){e[r>>5]|=128<<r%32,e[14+(r+64>>>9<<4)]=r;for(var s=1732584193,c=-271733879,l=-1732584194,u=271733878,m=0;m<e.length;m+=16){var g=s,d=c,f=l,v=u;c=i(c=i(c=i(c=i(c=a(c=a(c=a(c=a(c=n(c=n(c=n(c=n(c=t(c=t(c=t(c=t(c,l=t(l,u=t(u,s=t(s,c,l,u,e[m+0],7,-680876936),c,l,e[m+1],12,-389564586),s,c,e[m+2],17,606105819),u,s,e[m+3],22,-1044525330),l=t(l,u=t(u,s=t(s,c,l,u,e[m+4],7,-176418897),c,l,e[m+5],12,1200080426),s,c,e[m+6],17,-1473231341),u,s,e[m+7],22,-45705983),l=t(l,u=t(u,s=t(s,c,l,u,e[m+8],7,1770035416),c,l,e[m+9],12,-1958414417),s,c,e[m+10],17,-42063),u,s,e[m+11],22,-1990404162),l=t(l,u=t(u,s=t(s,c,l,u,e[m+12],7,1804603682),c,l,e[m+13],12,-40341101),s,c,e[m+14],17,-1502002290),u,s,e[m+15],22,1236535329),l=n(l,u=n(u,s=n(s,c,l,u,e[m+1],5,-165796510),c,l,e[m+6],9,-1069501632),s,c,e[m+11],14,643717713),u,s,e[m+0],20,-373897302),l=n(l,u=n(u,s=n(s,c,l,u,e[m+5],5,-701558691),c,l,e[m+10],9,38016083),s,c,e[m+15],14,-660478335),u,s,e[m+4],20,-405537848),l=n(l,u=n(u,s=n(s,c,l,u,e[m+9],5,568446438),c,l,e[m+14],9,-1019803690),s,c,e[m+3],14,-187363961),u,s,e[m+8],20,1163531501),l=n(l,u=n(u,s=n(s,c,l,u,e[m+13],5,-1444681467),c,l,e[m+2],9,-51403784),s,c,e[m+7],14,1735328473),u,s,e[m+12],20,-1926607734),l=a(l,u=a(u,s=a(s,c,l,u,e[m+5],4,-378558),c,l,e[m+8],11,-2022574463),s,c,e[m+11],16,1839030562),u,s,e[m+14],23,-35309556),l=a(l,u=a(u,s=a(s,c,l,u,e[m+1],4,-1530992060),c,l,e[m+4],11,1272893353),s,c,e[m+7],16,-155497632),u,s,e[m+10],23,-1094730640),l=a(l,u=a(u,s=a(s,c,l,u,e[m+13],4,681279174),c,l,e[m+0],11,-358537222),s,c,e[m+3],16,-722521979),u,s,e[m+6],23,76029189),l=a(l,u=a(u,s=a(s,c,l,u,e[m+9],4,-640364487),c,l,e[m+12],11,-421815835),s,c,e[m+15],16,530742520),u,s,e[m+2],23,-995338651),l=i(l,u=i(u,s=i(s,c,l,u,e[m+0],6,-198630844),c,l,e[m+7],10,1126891415),s,c,e[m+14],15,-1416354905),u,s,e[m+5],21,-57434055),l=i(l,u=i(u,s=i(s,c,l,u,e[m+12],6,1700485571),c,l,e[m+3],10,-1894986606),s,c,e[m+10],15,-1051523),u,s,e[m+1],21,-2054922799),l=i(l,u=i(u,s=i(s,c,l,u,e[m+8],6,1873313359),c,l,e[m+15],10,-30611744),s,c,e[m+6],15,-1560198380),u,s,e[m+13],21,1309151649),l=i(l,u=i(u,s=i(s,c,l,u,e[m+4],6,-145523070),c,l,e[m+11],10,-1120210379),s,c,e[m+2],15,718787259),u,s,e[m+9],21,-343485551),s=o(s,g),c=o(c,d),l=o(l,f),u=o(u,v)}return Array(s,c,l,u)}(function(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}(e),8*e.length)));return r.toLowerCase()}}),sndefine("mimir",["utils","browser","core-sleeknote","storage-instance","constants","consent","atob","global"],function(e,t,n,a,i,o,r,s){var c=this,l=c.document,u="https://analytics.sleeknote.com/";function m(e){return e.toISOString().split(".")[0]+"Z"}let g=Object.create(null);function d(i,d){if(n.custom("DisableMimir"))return;Object.keys(i).forEach(e=>{void 0===i[e]&&delete i[e]});let f=e.extend(i,function(){var n={};if(o.get("analytics")){var i=new Date,s=a.getSessionStartTime(),u=s?Math.round((i.getTime()-s.getTime())/1e3):0,g=a.getLastSessionEndTime();n.v0=r(a.getVistorId()),n.v3=m(i),s&&(n.v6=m(s)),e.empty(g)||(n.v7=m(g)),n.v20=e.empty(g)?"true":"false",n.v25=t.isLandscape()?"true":"false",n.v27=u,n.s4=c.location.href||"",n.s9=c.location.protocol||"",n.s11=c.location.pathname||"",n.s12=c.location.search||"",n.s13=c.location.hash||"",n.s2=l.title,n.c1=t.user.timezoneOffSet()||"",n.s7=t.user.language(),n.v5=t.userAgent(),n.v22=t.is.name,n.v23=t.is.version,n.v24=t.is.platform,n.v26=t.is.device}return l.referrer&&l.referrer!=c.location.href&&(n.v4=l.referrer),n.v21=a.getSessionId(),n}(),function(){var e={};return e.s2=l.title,e.s3=c.location.hostname||"",e.s4=c.location.href||"",e.s9=c.location.protocol||"",e.s11=c.location.pathname||"",e.s12=c.location.search||"",e.s13=c.location.hash||"",e.c1=t.user.timezoneOffSet()||"",e.s7=t.user.language(),e.v5=t.userAgent(),e.v22=t.is.name,e.v23=t.is.version,e.v24=t.is.platform,e.v26=t.is.device,e}()),v=f.v1?f.v1:"event";if(g[v]||(g[v]=[]),g[v].push([f.v8,f.v9,f.v12,f.v33]),"DripOnsite"==d){let e={"3_sleeknote_shown-5_sleeknote_teaser_clicked":"manual_open","3_sleeknote_shown-4_sleeknote_trigger_manual":"manual_open","3_sleeknote_shown-13_sleeknote_trigger_click":"manual_open","3_sleeknote_shown-api":"manual_open","3_sleeknote_shown-1_sleeknote_trigger_shown_after":"auto_open","3_sleeknote_shown-2_sleeknote_trigger_scroll":"auto_open","3_sleeknote_shown-3_sleeknote_exit_intent":"auto_open","3_sleeknote_shown-14_sleeknote_trigger_sitedata":"auto_open","3_sleeknote_shown-15_embedded_campaign_show":"auto_open","5_sleeknote_closed-8_sleeknote_closebutton_clicked":"manual_close","5_sleeknote_closed-9_sleeknote_dismissed":"manual_close","5_sleeknote_closed-12_sleeknote_linkbutton_clicked":"manual_close","4_sleeknote_engaged-6_sleeknote_submitbutton_clicked":"submit","4_sleeknote_engaged-":"submit"}[[f.v8,f.v9].join("-")];e&&c._dcq&&c._dcq.push(["trackFormEvent",{formId:i.v1,action:e,properties:i}])}else!function(n){let a=new s.FormData;for(let[t,i]of e.entries(n))a.set(t,i);t.is.ios?s.fetch(u,{method:"POST",credentials:"omit",keepalive:!0,body:a}):c.navigator.sendBeacon(u,a)}(f)}function f(){}return n.expose(g,"mimir"),f.prototype={trackPageView:function(){d({s1:c.SleekNote&&c.SleekNote.CustomerId||0,v8:i.MIMIR.EVENTS[c.performance&&1==c.performance.navigation.type?"PAGERELOAD":"PAGEVIEW"]||"pageview"})},extractFromNoteConfig:function(e){return{campaignId:e.campaign.config.parent||e.config.campaignId,stepName:e.config.name,position:e.config.position,customerId:e.config.customerId,type:e.campaign.config.type,summaryId:e.campaign.config.summaryId,splitTestId:e.campaign.config.splitTestId,smartIndex:e.campaign.config.smartIndex,NS:e.config.NS}},trackNoteEvent:function(e,{eventName:t,triggerName:n,triggerValue:a,linkDestination:r,linkType:s,linkDestinationType:c,linkName:l,elementDataId:u,eventMetadata:m}){if(t){let e=i.MIMIR.EVENTS[t.toUpperCase()];e&&(t=e)}if(n){let e=i.MIMIR.TRIGGERS[n.toUpperCase()];e&&(n=e)}let{campaignId:g,type:f,stepName:v,position:p,customerId:k,summaryId:h,splitTestId:S,smartIndex:E,NS:_}=this.extractFromNoteConfig(e);if(f){let e=i.MIMIR.NOTES[f.toUpperCase()];e&&(f=e)}let N={s1:k,v1:g,v8:t,v9:n,v10:a,v12:f,v34:h};o.get("analytics")&&(N={...N,v11:new Boolean(E).toString(),v13:p,v19:S&&!isNaN(S)?S:void 0,v28:r,v29:s,v30:c,v31:l,v32:u,v33:v,v35:JSON.stringify(m)}),/*!triggerMapping[triggerName] ||*/t&&f?d(N,_):console.warn("trackNoteEvent failed:",t,n,f)},trackGoal:function(e,t){const n=c.SleekNote;if(!n||!n.SleeknoteGoals)return;if(e){let t=i.MIMIR.EVENTS[e.toUpperCase()];t&&(e=t)}let o=n.CustomerId;o&&(d({s1:o,v8:e,g1:t,v15:"true",g2:Object.keys(a.getGoalEngageList()).join(","),g3:Object.keys(a.getGoalShownList()).join(",")}),a.resetGoal())},trackPurchase:function(e,t){const n=c.SleekNote;if(!n||!n.SleeknoteGoals)return;if(e){let t=i.MIMIR.EVENTS[e.toUpperCase()];t&&(e=t)}let a=n.CustomerId;a&&d({s1:a,v8:e,v36:JSON.stringify(t)})}},f}),sndefine("session-tracker",["utils","storage-instance","global"],function(e,t,n){var a=this.document;function i(){t.startSessionTime()}var o=0,r=6e4,s=e.throttle(6e4,function(){g("activity")});function c(){o&&(n.clearInterval(o),o=0,t.endSessionTime())}function l(){i(),o||(o=n.setInterval(m,r))}function u(e){switch(e){case"newSession":l();break;case"newSessionIf":o||(i(),o=n.setInterval(m,r));break;case"endSession":c();break;case"restartSession":c(),l()}t.write("timestamp",(new Date).getTime())}function m(){g("interval")}function g(e){var n=(new Date).getTime(),a=+t.read("timestamp")||n;if(Math.max(Math.floor((n-a)/1e3),0)>=1800)switch(e){case"start":case"activity":u("restartSession");break;case"interval":u("endSession")}else switch(e){case"activity":u("newSessionIf");break;case"start":t.read("timestamp")?u("newSessionIf"):u("newSession")}}return e.listener(a,"add",s)("click")("mousemove")("keypress"),e.listener(this,"add",s)("load"),o=n.setInterval(m,r),g("start"),!0}),sndefine("tracker",["utils","core-sleeknote","mimir","location","storage-instance","constants","logger","session-tracker","global"],function(e,t,n,a,i,o,r,s,c){var l=this,u=l.document,m=r.log(o.CORE.LOGLEVELS.TRACKER,o.CORE.FORMATTERS.CORE);let g=o.CORE.COMMANDS,d=o.MIMIR.EVENTS,f=o.MIMIR.TRIGGERS;const v=l.top;function p(){try{let e=v.dataLayer||v[t.custom("googleDataLayerObjectName")];if(e&&"object"==typeof e&&"function"==typeof e.push)return e}catch(e){}return m("Google dataLayer not found"),{push:()=>{}}}function k(n,a,i){if(t.custom("DisableGA"))return void m("GA disabled in config",t.custom("DisableGA"));if(t.custom("DisableGAEvents")&&~t.custom("DisableGAEvents").indexOf(a))return;let o={event_category:n,event_label:i,non_interaction:!0},{gtag:r}=l;r&&"function"==typeof r?r("event",a,o):p().push(e.extend({event:a},o))}const h=new c.Set;return t.expose(t.preview?{trackPageView:()=>{}}:new class{constructor(){this.mimirTracker=new n,u.addEventListener(t.eventName,this);u.addEventListener("sleekNote",()=>{this.isGoalMatch(),l.SleekNote&&l.SleekNote.SleeknoteGoals&&(l.SleekNote.trackGoal=e=>{this.mimirTracker.trackGoal(d.GOAL_CONVERTED,e)},function(e,t=1e3){let n;c.setInterval(()=>{let t=p();if(!Array.isArray(t))return;let a=t.length;for(;a--;){let i=t[a];if(n&&i==n)break;e(i)}t.length&&(n=t.slice(-1).pop())},t)}(e=>{(function(e){if(e||"object"==typeof e){let{event:t,ecommerce:n}=e;if("purchase"==t&&n)return!0;if("gtm.dom"==t&&n&&n.purchase)return!0;if(t&&t.toLowerCase().includes("purchase"))return!0}})(e)&&this.handleGAPurchaseEvent(e,"ga")}))},{once:!0})}trackPageView(e){if("SleekNote"==e)return this.mimirTracker.trackPageView(),this.mimirTracker.trackPageView=()=>{},!0}handleEvent(t){let{origin:n,trigger:a,command:r,creator:s,name:c,formData:l}=t.data;if("api"==a&&"open"==r&&"quiz"==n.campaign.config.campaignType&&String(c).includes("Outcome")&&(s=o.CORE.CREATOR.USER,r=g.SUBMIT,l={}),s==o.CORE.CREATOR.USER){let{eventTarget:a,campaignId:o,eventType:s}=t.data,c=e.contains(n.campaign.config.type,"promote","guide"),u=e.contains(n.campaign.config.type,"contact"),m=n.campaign.config.type;switch(c&&(m="blank"),r){case g.OPEN:{let e=n.config.type;"teaser"==e&&this.event(n,{eventName:d.SHOWN,triggerName:f.TEASERCLICK,eventTarget:a}),"form"==e&&this.event(n,{eventName:d.CLOSED,eventTarget:a})}break;case g.CLOSE:{let e=n.config.type,t=d.CLOSED;"teaser"==e&&(t=d.TEASER_CLOSED),t&&this.event(n,{eventName:t,eventTarget:a})}break;case g.OPEN_DOOR:let r=d.DOOR_OPENED;this.event(n,{eventName:r,eventMetadata:t.data.eventMetadata});break;case g.SUBMIT:{this.sendSleeknoteEventToTrackers(m,n.campaign.config);let a=i.hasConvertSessionEvent(o);if(!u&&e.contains(n.campaign.config.campaignType,"quiz","multistep")&&t.data.formElements&&t.data.formElements.email&&!t.data.email||u&&!l||!c&&!l||c&&a&&l)return void console.log("trackEventSkip");let r=d.ENGAGED;a&&n.campaign.getType("form").length>1&&(r=d.SUBSTEP_ENGAGED),this.event(n,{eventName:r,triggerName:e.contains(s,"keypress")?f.KEYPRESSSUBMIT:f.MOUSESUBMIT}),this.sendAdditionalEventDataToTracker(n),i.convertSessionEvent(o)}break;case g.CLICK:let v={eventName:d.LINK_CLICKED,eventTarget:a,href:t.data.href,step:t.data.step,target:t.data.target};this.event(n,v),c&&!h.has(o)&&"hideBox"!=t.data.step&&(v.eventName=d.ENGAGED,this.event(n,v),this.sendSleeknoteEventToTrackers(m,n.campaign.config),h.add(o))}}else if(s==o.CORE.CREATOR.API)if(r==g.PURCHASE)this.handleGAPurchaseEvent(t.data.properties,t.data.source);else{if(e.contains(a,"none","submit")||r==g.CLOSE)return;if("queue"==a)return;"auto"==a&&"EmbeddedNote"==n.kind&&(a=f.EMBEDDED),this.event(n,{eventName:d.SHOWN,triggerName:a})}}event(e,t){if(!e||!t)return;let{eventTarget:n,href:a,step:i,elementDataId:o}=t;switch(n&&!o&&(t.elementDataId=n.getAttribute("data-track-id")||n.getAttribute("data-id")),t.eventName){case d.SHOWN:switch(t.triggerName){case f.TIMER:t.value=Math.round(e.config.wait/1e3);break;case f.SCROLL:t.value=e.config.scroll}break;case d.DOOR_OPENED:break;case d.ENGAGED:case d.LINK_CLICKED:if(a||i){if(!n)return;let e="IMG"==n.nodeName,o=n.classList.contains("linkbutton");t={...t,linkDestination:a||i,linkDestinationType:a?"1_url":"2_sleeknotestep",linkType:e?"1_imagelink":o?"3_linkbutton":"2_textlink",linkName:n.innerText}}break;case d.TEASER_CLOSED:t.triggerName=f.TEASERCLOSE;break;case d.CLOSED:let o=n?f.CLOSEBUTTON:f.DISMISS;o==f.CLOSEBUTTON&&n.classList.contains("linkbutton")&&(o=f.LINKBUTTON),t.triggerName=o}this.mimirTracker.trackNoteEvent(e,t),t.eventName==d.SHOWN&&this.sendSleeknoteEventToTrackers("boxShown",e.config)}cohortEvent(e,t,n){k("cohorts",e,t+" | "+n)}sendSleeknoteEventToTrackers(e,t){let n={boxShown:"Sleeknote shown,Onsite campaign shown",newsletter:"New Subscriber,New email subscriber",contact:"New contact request,New connect event",blank:"Blank Click,Onsite campaign engaged"};function a(e){return e.split(",")["SleekNote"==t.NS?0:1]}e in n&&(m("sendEventToTrackers",e),k(a("Sleeknote,Drip Opt-in Form"),a(n[e]),t.campaignId))}isGoalMatch(){const e=l.SleekNote&&l.SleekNote.SleeknoteGoals;if(e){var n=u.location.href,o=a.get(t).host.split(".");o.length>2&&(o.shift(),n=n.replace(a.get(t).host,o.join(".")));var r,s,c,m=i.read("location");if(m.a=m.a||{},m.a.l!=n)for(m.a.l=n,i.write("location",m),r=0;r<e.length;r++)for(c=e[r].urls,s=0;s<c.length;s++)if(~n.indexOf(c[s].url)){this.mimirTracker.trackGoal(d.GOAL_CONVERTED,e[r].goalId);break}}}sendAdditionalEventDataToTracker(n){let i=n.config.NS,o={campaignName:t.getCampaignName(n.config),["SleekNote"==i?"SleeknoteId":"OnsiteCampaignId"]:n.config.campaignId,SignupPage:a.get(t).href,event:"SleekNote"==i?"SleeknoteSubscriber":"New email subscriber",fieldData:e.parseForm(n.config.formNode,void 0,!0)};"SleekNote"==i&&(o.CustomerId=n.config.customerId);try{p().push(e.extend(o)),o.fieldData&&delete o.fieldData,delete o.SignupPage;var r=v.fbq||v[t.custom("fbqDataLayerObjectName")];e.isFunction(r)&&r("trackCustom",o.event,o)}catch(e){console.warn(e)}}handleGAPurchaseEvent(t,n){if("object"==e.typeStr(t)&&["ga","shopify","customer"].includes(n)){let e=function(e){let t,{ecommerce:n}=e;if(n&&n.transaction_id)t={transactionId:n.transaction_id,value:n.value,currency:n.currency,coupon:n.coupon,shipping:n.shipping,tax:n.tax,items:n.items||[]};else if(n&&n.purchase){let n=e.ecommerce.purchase;t={transactionId:n.actionField&&n.actionField.id,value:n.actionField&&n.actionField.revenue,currency:n.actionField&&n.actionField.currencyCode||"USD",coupon:n.actionField&&n.actionField.coupon,shipping:n.actionField&&n.actionField.shipping,tax:n.actionField&&n.actionField.tax,items:n.products||[]}}else t={transactionId:e.transaction_id||e.transactionId||e.order_id||e.orderId,value:e.value||e.revenue||e.total,currency:e.currency||e.currencyCode||"USD",coupon:e.coupon||e.couponCode,shipping:e.shipping||e.shippingCost,tax:e.tax||e.taxAmount,items:e.items||e.products||[]};return t}(t);e.transactionId&&(e.source=n,this.mimirTracker.trackPurchase(d.PURCHASE,e))}}},"tracker")}),sndefine("package-tracker",["tracker"],function(e){return e});