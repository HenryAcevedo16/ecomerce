sndefine("core-sleeknote",function(){return{custom:(e,t)=>t,hasCustomProp(e){},expose(e,t){}}}),sndefine("constants",[],function(){return{CORE:{EVENTS:{EXIT:"exit",ENTRY:"entry",LOAD:"load",SUBMIT:"submit",SITEDATA:"sitedata",READY:"ready",STORAGE:"storage",VISIBLE:"visible",PRODUCTREC:"productrec",ANIMATING:"animating",CLICK:"click"},CREATOR:{USER:"user",API:"api",QUEUE:"queue"},COMMANDS:{OPEN_DOOR:"opendoor",SUBMIT:"submitted",CLICK:"click",FROMCE:"fromce",CURRENT:"current",OPEN:"open",QUEUE:"queue",CLOSE:"close",REVEAL:"reveal",MAXIMIZE:"maximize",MINIMIZE:"minimize",PURCHASE:"purchase"},API:{BUSY:"busy",ADD:"add",CLOSE:"close",CLOSEALL:"closeall",STATUS:"status",CAMPAIGNS:"campaigns",OPEN:"open",REVEAL:"reveal",QUEUE:"push",MAXIMIZE:"maximize",MINIMIZE:"minimize",REMOVE:"remove",NOTE_RERENDER:"rerender",NOTE_CONFIG:"config",APPLY_CONFIG:"apply",AFTERRENDER:"onafterrender",VISIBLE:"visible",WAIT:"wait",POSITION:"position",MERGE:"merge",HOOK:"hook",LAUNCH:"launch",EVALUATE:"evaluate",PROFILE:"profile",ORCHESTRATOR:"orchestrator",SITEDATA:"sitedata",SITEDATAOWN:"sitedataown",PURCHASE:"purchase",REPOSITION:"reposition"},LOGLEVELS:{CS:"1",CORE:"a",TRACKER:"t",EDITORTARGETING:"targeting"},FORMATTERS:{CONFIG:"config",EVALUATOR:"evaluator",CORE:"core",SNDEBUG:"sndebug"}},MIMIR:{EVENTS:{PAGERELOAD:"1_pagereload",PAGEVIEW:"2_pageview",SHOWN:"3_sleeknote_shown",ENGAGED:"4_sleeknote_engaged",CLOSED:"5_sleeknote_closed",LINK_CLICKED:"6_sleeknote_link_clicked",GOAL_CONVERTED:"7_goal_converted",TEASER_CLOSED:"8_sleeknote_teaser_closed",SUBSTEP_ENGAGED:"11_sleeknote_substep_engaged",DOOR_OPENED:"12_sleeknote_calendar_door_opened",PURCHASE:"13_purchase"},TRIGGERS:{TIMER:"1_sleeknote_trigger_shown_after",SCROLL:"2_sleeknote_trigger_scroll",EXIT:"3_sleeknote_exit_intent",MANUAL:"4_sleeknote_trigger_manual",TEASERCLICK:"5_sleeknote_teaser_clicked",MOUSESUBMIT:"6_sleeknote_submitbutton_clicked",KEYPRESSSUBMIT:"7_sleeknote_submitbutton_enterpress",CLOSEBUTTON:"8_sleeknote_closebutton_clicked",DISMISS:"9_sleeknote_dismissed",TEASERCLOSE:"10_sleeknote_teaser_closebutton_clicked",LINKBUTTON:"12_sleeknote_linkbutton_clicked",CLICK:"13_sleeknote_trigger_click",SITEDATA:"14_sleeknote_trigger_sitedata",EMBEDDED:"15_embedded_campaign_show",SHOPIFY:"16_sleeknote_trigger_shopify"},NOTES:{NEWSLETTER:"1_Newsletter",PROMOTE:"2_Promote",CONTACT:"3_Contact",BLANK:"2_Promote"}},IMAGEMAXSIZE:25e4,PROFILE:{UNKN:1,IGNORE:2,DESKTOP:3,TABLET:4,MOBILE:5},PROFILEIDS:{DESKTOP:"desktop",MOBILE:"mobile"},POS:{POPUP:5,BOTTOM_LEFT:7,BOTTOM_RIGHT:9,CENTER_LEFT:4,CENTER_RIGHT:6,SLIDEUP:10,SLIDEUP2:11,SLIDEDOWN:23,HELLO:12,HELLO2:17,POPUP2:13,POPUP7:15,POPUP9:16,POPUP5:18,EMBEDDED:20,SIDEBAR_LEFT:21,SIDEBAR_RIGHT:22},AL:{TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4},PA:{CENTER:1,INSIDE:2,OUTSIDE:3,RIGHT:4,LEFT:5,BOTTOM:6,TOP:7},TARGETING:{VISIBILITY:{SHOW:"include",HIDE:"exclude"},TYPES:{MATCHES:"exactMatch",CONTAINS:"contains"},RELATIONS:{AND:"AND",OR:"OR"}},TRIGGERS:{TYPES:{1:"Show After",2:"Scroll",3:"Exit-Intent",4:"Manual",5:"Click",6:"Automated",7:"SiteData",8:"Shopify"}},CONDITIONS:{PAGESVISITEDOPTIONS:{ONESESSION:"current session",ALLSESSIONS:"all sessions"},UTMSOURCE:"utm_source",UTMMEDIUM:"utm_medium",UTMCAMPAIGN:"utm_campaign",UTMTERM:"utm_term",UTMCONTENT:"utm_content",SHOPIFY_CONDITION_TARGETS:{CART:{TOTALPRICE:"cartTotalprice",CURRENCY:"cartCurrency",DISCOUNT:"cartDiscount",ITEMCOUNT:"cartItemcount",ITEMS:"cartItems",ITEMSSUBTOTALPRICE:"cartItemssubtotalprice",TOTALDISCOUNT:"cartTotaldiscount",TOTALWEIGHT:"cartTotalweight"},CUSTOMER:{ACCEPTSMARKETING:"customerAcceptsmarketing",EMAIL:"customerEmail",PHONE:"customerPhone",COUNTRYCODE:"customerCountryCode",PROVINCECODE:"customerProvinceCode",FIRSTNAME:"customerFirstname",LASTNAME:"customerLastname",HASACCOUNT:"customerHasaccount",LASTORDER:"customerLastorder",NAME:"customerName",ORDERS:"customerOrders",ORDERSCOUNT:"customerOrderscount",TOTALSPENT:"customerTotalspent"}},GROUPS:{AND:!0,OR:!1},KEYS:{SEQUENCE:"sequence",SUBSCRIBER:"currentSubscriber",VISITOR:"newVisitor",QUERY:"specificQuery",REFERRAL:"specificReferral",UTM:"utm",SHOW:"showCount",COOKIE:"specificCookie",GEOTARGETING:"geotargeting",ELEMENT:"htmlElement",SITE:"siteData",SHOPIFY:"shopify",PAGE:"pageCount",TARGETING:"specificURL",NOTARGETING:"targetAll",IP:"specificIP",URLMATCHES:"URLMatches",URLCONTAINS:"URLContains"},TYPES:{EXISTS:"exists",NOTEXISTS:"notExists",EXACTMATCH:"exactMatch",NOTEXACTMATCH:"notExactMatch",CONTAINS:"contains",NOTCONTAINS:"notContains",LESSTHAN:"lessThan",LESSTHANEQ:"lessThanEq",GREATERTHAN:"greaterThan",GREATERTHANEQ:"greaterThanEq",EQUALS:"equals"},MATCHTYPES:{INCLUDE:"include",EXCLUDE:"exclude",NONE:"none",BOTH:"both"}},SUNDAY:0,MONDAY:1,DATETIMEFORMAT:"DD-MM-YYYY - HH:mm",DATETIMEFORMATDAYJS:"D-M-YYYY - HH:mm",DATEFORMAT:"DD-MM-YYYY",DATEFORMATDAYJS:"D-M-YYYY",ISODATEFORMAT:"YYYY-MM-DD",TIMEFORMAT:"- HH:mm",SCHEDULERDATEFORMAT:"YYYY/MM/DD",SCHEDULERDATEFORMATDAYJS:"YYYY/M/D",SETUPDATEFORMAT:"Do MMMM YYYY",URLPATTERN:"^((?:https?:\\/\\/)?[^./]+(?:\\.[^./]+)+(?:\\/.*)?)$",IPPATTERN:"^((25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.(25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.(25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.(25[0-5]|2[0-4]\\d|[01]?\\d\\d?)(,\\n|,?|,\\s))*$",SHOPIFYURLPATTERN:"^.*products.json$",INPUTNAMEALLOWEDPATTERN:"^[a-zA-Z][\\w:.\\-]*(\\[\\])?$",MYCAMPAIGNSURL:"../dashboard/",PRICINGURL:"../dashboard/?page=pricing",YOUTUBEURLVALIDATION:"(http(?:s?):\\/\\/)?(?:www\\.)?youtu(?:be\\.com\\/(?:watch\\?v=|shorts\\/)|\\.be\\/)([\\w\\-_]*)(&(amp;)?[\\w\\?=]*)?",CLEANURLREGEX:"(^\\w+://(www.)?|(www.))",TIMESPANS:{last7Days:"last7Days",last30Days:"last30Days",last3Months:"last3Months",last6Months:"last6Months",customRange:"customRange"},FEATURE_ICONS:{FREEMIUM:"#ui_20x20_freemium",GAMIFICATION:"#ui_20x20_gamification"}}}),function(){var e,t=globalThis,n=t,r=t.document,o=n.Reflect,i=["Webkit","ms","Moz"],s=r.createElement("div");function a(e){var t,n=e.charAt(0).toUpperCase()+e.slice(1);if(e in s.style)return"";for(t=i.length;t--;)if(i[t]+n in s.style)return i[t];return!1}var l=a("transform"),c={};function u(e,t){t||(t=l),c[t]||(c[t]={});var n=c[t][e];return void 0===n&&(n=c[t][e]=t.length?t+e.charAt(0).toUpperCase()+e.substr(1):e[0].toLowerCase()+e.substr(1)),n}var d={standalone:t.navigator.standalone,retina:t.devicePixelRatio>=1.5},g=t.navigator.userAgent.toLowerCase();d.bot=/bingpreview|bingbot|adidxbot|adsbot-google|googlebot|mediapartners-google|googleweblight|google page speed insights|headlesschrome/gi.test(g);var p,m,f,h=(m=g.match(/(edge|edg)[\s\/:]([\w\d\.]+)/),"unknown"==(f=g.match(/(opera|ie|firefox|chrome|trident|crios|version)[\s\/:]([\w\d\.]+)?.*?(safari|(?:rv[\s\/:]|version[\s\/:])([\w\d\.]+)|$)/)||[null,"unknown",0])[1]&&m&&(f=m),"trident"==f[1]?(f[1]="ie",f[4]&&(f[2]=f[4])):"crios"==f[1]&&(f[1]="chrome"),(p=/iemobile|windows phone/i.test(t.navigator.appVersion)?"winphone":g.match(/ip(?:ad|od|hone)/)?"ios":(g.match(/(?:webos|android)/)||g.match(/mac|win|linux|cros/)||["other"])[0])&&"other"!=p||(p=t.navigator.platform,/mac/i.test(p)&&(p="mac"),/win/i.test(p)&&(p="windows")),"win"==p&&(p="windows"),{name:"version"==f[1]?f[3]:f[1],version:parseFloat("opera"==f[1]&&f[4]?f[4]:f[2]),platform:p});if("unknown"!=h.name&&(d[h.name]=!0),d.version=h.version,d.name=h.name,d.platform=h.platform,/edg/.test(d.name)&&(d.name="edge"),"edge"==d.name&&d.version>50&&(d.name="chrome",d[d.name]=!0),"ie"==h.name&&r.documentMode&&(d.version=r.documentMode),"BackCompat"==r.compatMode&&(d.quirks=!0,d.version=1),d[h.platform]=!0,d.windows=d.windows||d.winphone,d.mozilla=d.firefox,d.webkit=d.safari||d.chrome,d.webkit&&"webkitAnimation"in s.style&&(l="Webkit"),d.desktop=!(d.android||d.ios||d.winphone),d.android)d.tablet=!/mobile/i.test(g),d.tablet&&Math.max(t.screen.width,t.screen.height)<1024&&(d.tablet=!1),d.tablet&&(d.desktop=!1),d.genuineAndroid=!/intel/i.test(t.navigator.platform);else{var y=!1;if("iPad"==t.navigator.platform&&(y=!0),!y&&"iPhone"!=t.navigator.platform)!(y=-1!==g.indexOf("ipad"))&&g.match(/mac/)&&t.navigator.maxTouchPoints&&t.navigator.maxTouchPoints>2&&(y=!0);y&&(d.ios=!0,d.mac=!1,d.platform="ios",d.desktop=!1),d.ios&&(d.tablet=y,s.style.setProperty("-apple-pay-button-style","black"),d.genuineApple="black"==s.style.getPropertyValue("-apple-pay-button-style"))}d.phone=!d.desktop&&!d.tablet,d.device=d.tablet?"tablet":d.phone?"phone":"desktop";var E,S={orientationchange:"onorientationchange"in t,threeD:u("perspective")in r.documentElement.style,touch:"ontouchstart"in t||t.navigator.msMaxTouchPoints>0,transform:!1!==l,animation:!1!==a("animationName"),pointer:!!t.PointerEvent,pointerGestures:!!t.MSGesture,pointerEvents:(E=s.style,"pointerEvents"in E&&(E.pointerEvents="auto",E.pointerEvents="foo","auto"==E.pointerEvents))};d.ie&&d.version<=10&&(S.pointerEvents=!1);var v,I,C="onorientationchange"in t?"orientationchange":"resize",T={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend"};for(e in T)if(void 0!==s.style[e]){v=T[e];break}var b={animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend"};for(e in b)if(void 0!==s.style[e]){I=b[e];break}var O=l.length?"-"+l.toLowerCase()+"-":"";var w={language:function(){return t.navigator.language||t.navigator.userLanguage},timezoneOffSet:function(){return(new Date).getTimezoneOffset()}};function A(){return t.innerHeight||(r.documentElement||r.body).clientHeight||0}function P(){return t.innerWidth||(r.documentElement||r.body).clientWidth||0}function N(){return 90==(P()<A()?0:90)}function R(e,n,o,i){o||(o=r.body),i||(i=r.documentElement);var s=t.getComputedStyle(i),a=t.getComputedStyle(o),l=Math.max(o.offsetHeight,i.offsetHeight,o.clientHeight,i.clientHeight),c=Math.max(o.offsetWidth,i.offsetWidth,o.clientWidth,i.clientWidth);return"hidden"==s.overflowY||"hidden"==a.overflowY||n||(l=Math.max(l,o.scrollHeight,i.scrollHeight)),"hidden"==s.overflowX||"hidden"==a.overflowX||e||(c=Math.max(c,o.scrollWidth,i.scrollWidth)),{width:c,height:l}}function k(){return t.pageYOffset||(r.documentElement||r.body.parentNode||r.body).scrollTop||0}var L,D={top:k,pct:function(){var e=R().height-A();return 0===e?100:Math.floor(k()/e*100)}},M={screen:{width:function(){return Math[N()?"max":"min"](t.screen.width,t.screen.height)},height:function(){return Math[N()?"min":"max"](t.screen.width,t.screen.height)},availWidth:function(){return Math[N()?"max":"min"](t.screen.availWidth,t.screen.availHeight)},availHeight:function(){return Math[N()?"min":"max"](t.screen.availWidth,t.screen.availHeight)}},content:{width:0,height:0},win:{width:P,height:A},doc:{dims:R,width:function(e,t,n){return R(e,!0,t,n).width},height:function(e,t,n){return R(!0,e,t,n).height}}};var x=r.querySelector("meta[name=viewport], meta[id=viewport]");function U(e,t){if(e&&"fixed"==t)return"fixed"==e||~e.indexOf("sticky")}function _(){return M.doc.width(!d.desktop,r.body,r.documentElement)}function B(e){var t=_();return d.phone&&void 0!==e&&(Array.isArray(e)?t=Number(e[N()?1:0]):Number(e)===e&&e>0&&(t=e)),t/M.win.width()}function H(e,t,n){return n||(n=.1),Math.abs(e-t)<=n}var V={screenWidth:M.screen.width,screenHeight:M.screen.height,windowWidth:P,windowHeight:A,minimalScreenDimension:function(){return Math.min(M.screen.width(),M.screen.height())},isAddressBarVisible:function(){return!!(d.phone&&d.ios&&d.safari)&&(!!N()&&!H(_()/M.screen.width()*M.screen.availHeight(),M.win.height(),1))},getDocumentScale:B,getDocumentWidth:_,notScaledMobileContent:function(){return H(M.screen.width(),M.win.width()*B(),1)},isPositionValue:U,getPositionValue:function(e){return U(e,"fixed")?d.desktop&&d.safari?"-webkit-sticky":"fixed":e},systemScrollbarWidth:function(){var e;return void 0!==L||(L=0,S.touch||(r.body.insertAdjacentHTML("beforeend",'<div style="visibility:hidden;overflow-y:scroll;">blaah</div>'),e=r.body.lastElementChild,L=e.offsetWidth-e.clientWidth,e.parentNode.removeChild(e))),L},is:d,has:S,jsVendor:l,otherVendors:function(){var e,t=[];for(e=i.length;e--;)i[e]!=l&&t.push(i[e]);return l.length&&t.push(""),t},cssVendor:O,prefixStyle:u,transitionEnd:v,animationEnd:I,resizeEvent:C,mouseButton:function(e){var t="right",n="middle";if(void 0!==e.buttons&&0!==e.buttons){if(2==e.buttons)return t;if(4==e.buttons)return n}else{if(2==e.button)return t;if(1==e.button)return n;if(d.mac&&17==function(e){return 16==e.which||17==e.which||18==e.which||91==e.which?e.which:(e.ctrlKey?17:e.shiftKey&&16)||e.altKey&&18||e.metaKey&&91||0}(e))return t}return d.mac&&e.ctrlKey?t:"left"},isLandscape:N,scroll:D,user:w,userAgent:function(){return t.navigator.userAgent},R:o,P:n.Promise,C:o.construct,O:n.Blob,F:n.FileReader,T:"text/plain;charset="};sndefine("browser",function(){if(M.content.width=M.screen.width(),M.content.height=M.screen.height(),!d.desktop&&x&&x.content){var e=x.content.split(",").filter(function(e){if(~e.indexOf("width"))return 1})[0];e&&(e=parseInt(e.split("=")[1],10)),e===Number(e)&&(M.content.width=e,M.content.height=M.screen.height()/(M.screen.width()/e))}return V})}.call(globalThis),sndefine("global",function(){try{var e=this.document.getElementById("sleeknote-frame")}catch(e){return globalThis}function t(){return e&&e.contentWindow||this||globalThis}const n=["fetch","FormData","setInterval","setTimeout","clearInterval","clearTimeout","requestAnimationFrame"];return new(t().Proxy)({},{get(e,r){let o=t()[r];return n.includes(r)&&(o=o.bind(t())),o}})}),function(){var e=function(e){for(var t,n,r=[],o=0,i=e.length;o<i;){if(55296==(63488&(t=e.charCodeAt(o++)))){if(n=e.charCodeAt(o++),55296!=(64512&t)||56320!=(64512&n))throw new RangeError("UTF-16(decode): Illegal UTF-16 sequence");t=((1023&t)<<10)+(1023&n)+65536}r.push(t)}return r},t=function(e){for(var t,n=[],r=0,o=e.length;r<o;){if(55296==(63488&(t=e[r++])))throw new RangeError("UTF-16(encode): Illegal UTF-16 value");t>65535&&(t-=65536,n.push(String.fromCharCode(t>>>10&1023|55296)),t=56320|1023&t),n.push(String.fromCharCode(t))}return n.join("")},n=36,r=2147483647;function o(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:n}function i(e,t){return e+22+75*(e<26)-((0!==t)<<5)}function s(e,t,r){var o;for(e=r?Math.floor(e/700):e>>1,e+=Math.floor(e/t),o=0;e>455;o+=n)e=Math.floor(e/35);return Math.floor(o+36*e/(e+38))}function a(e,t){return(e-=(e-97<26)<<5)+((!t&&e-65<26)<<5)}function l(e,i){var a,l,c,u,d,g,p,m,f,h,y,E,S,v=[],I=[],C=e.length;for(a=128,c=0,u=72,(d=e.lastIndexOf("-"))<0&&(d=0),g=0;g<d;++g){if(i&&(I[v.length]=e.charCodeAt(g)-65<26),e.charCodeAt(g)>=128)throw new RangeError("Illegal input >= 0x80");v.push(e.charCodeAt(g))}for(p=d>0?d+1:0;p<C;){for(m=c,f=1,h=n;;h+=n){if(p>=C)throw RangeError("punycode_bad_input(1)");if((y=o(e.charCodeAt(p++)))>=n)throw RangeError("punycode_bad_input(2)");if(y>Math.floor((r-c)/f))throw RangeError("punycode_overflow(1)");if(c+=y*f,y<(E=h<=u?1:h>=u+26?26:h-u))break;if(f>Math.floor(r/(n-E)))throw RangeError("punycode_overflow(2)");f*=n-E}if(u=s(c-m,l=v.length+1,0===m),Math.floor(c/l)>r-a)throw RangeError("punycode_overflow(3)");a+=Math.floor(c/l),c%=l,i&&I.splice(c,0,e.charCodeAt(p-1)-65<26),v.splice(c,0,a),c++}if(i)for(c=0,S=v.length;c<S;c++)I[c]&&(v[c]=String.fromCharCode(v[c]).toUpperCase().charCodeAt(0));return t(v)}function c(t,o){var l,c,u,d,g,p,m,f,h,y,E,S;o&&(S=e(t));var v=(t=e(t.toLowerCase())).length;if(o)for(p=0;p<v;p++)S[p]=t[p]!=S[p];var I=[];for(l=128,c=0,g=72,p=0;p<v;++p)t[p]<128&&I.push(String.fromCharCode(S?a(t[p],S[p]):t[p]));for(u=d=I.length,d>0&&I.push("-");u<v;){for(m=r,p=0;p<v;++p)(E=t[p])>=l&&E<m&&(m=E);if(m-l>Math.floor((r-c)/(u+1)))throw RangeError("punycode_overflow (1)");for(c+=(m-l)*(u+1),l=m,p=0;p<v;++p){if((E=t[p])<l&&++c>r)return Error("punycode_overflow(2)");if(E==l){for(f=c,h=n;!(f<(y=h<=g?1:h>=g+26?26:h-g));h+=n)I.push(String.fromCharCode(i(y+(f-y)%(n-y),0))),f=Math.floor((f-y)/(n-y));I.push(String.fromCharCode(i(f,o&&S[p]?1:0))),g=s(c,u+1,u==d),c=0,++u}}++c,++l}return I.join("")}var u={encodePuny:function(e){for(var t=e.split("."),n=[],r=0;r<t.length;++r){var o=t[r];n.push(o.match(/[^A-Za-z0-9-]/)?"xn--"+c(o):o)}return n.join(".")},decodePuny:function(e){for(var t=e.split("."),n=[],r=0;r<t.length;++r){var o=t[r];n.push(o.match(/^xn--/)?l(o.slice(4)):o)}return n.join(".")}};sndefine("punycode",function(){return u})}.call(this),sndefine("utils",["global"],function(e){var t,n=globalThis,r=n.document,o={};function i(){return e}if(n.location&&!n.location.origin&&(n.location.origin=n.location.protocol+"//"+n.location.hostname+(n.location.port?":"+n.location.port:"")),r&&!r.head&&(r.head=r.getElementsByTagName("head")[0]),r&&document.body){function N(e,t){if(e)switch(e.nodeType){case 0:return function(){};case 1:return i().Element.prototype[t];case 9:return i().Document.prototype[t];case 11:return i().DocumentFragment.prototype[t]||function(){};default:return console.warn("unknown node type: "+e.nodeType),console.trace(),function(){}}}["querySelectorAll","querySelector","getElementsByClassName","getElementsByTagName"].forEach(function(e){o[e]=function(t,n){try{return N(t,e).call(t,n)}catch(e){console.error(e)}}})}t=function(e,t,n,r){return e===e+""&&(e=o.getElementById(e)),function o(i){return e[t+"EventListener"](i,n,!!r),o}},o.JSON={parse:function(){return i().JSON.parse.apply(n,arguments)},stringify:function(){return i().JSON.stringify.apply(n,arguments)}};var s={};function a(e,t){if(e){if(Array.isArray(e)||"function"==typeof e[t])return e;if("item"in e&&"length"in e)return Array.from(e)}}let l=i().Array.prototype.entries;function c(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function u(){var e,t,n,r,o,i=arguments.length;for(1==i?("array"==(t=c(arguments[0]))&&(r=[]),"object"==t&&(r={}),o=0):(r=arguments[0],o=1);o<i;o++)if("array"!=(t=c(n=arguments[o]))&&"object"!=t)r=n;else for(e in n)t=c(n[e]),r[e]="array"==t||"object"==t?u(r[e]?r[e]:"array"==t?[]:{},n[e]):n[e];return r}function d(e){return e?e.nodeName?e:r.getElementById(e):null}function g(e,t){return t&&!t.nodeName?(console.warn("QSA second argument must be Element",t),[]):Array.prototype.slice.call(o.querySelectorAll(t||r,e))}function p(e,t){return g(e,t)[0]}["XMLHttpRequest","decodeURIComponent","encodeURIComponent"].forEach(function(e){o[e]=function(){return i()[e].apply(n,arguments)}},this),["getElementById","createElement","createDocumentFragment"].forEach(function(e){o[e]=function(){return i().document[e].apply(r,arguments)}},this),o.getComputedStyle=function(e,t){return i().getComputedStyle.call(n,e,t)};var m,f=r?r.documentElement:{},h=(m=f.matches||f.matchesSelector||f.webkitMatchesSelector||f.msMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector)?function(e,t){return m.call(e,t)}:function(e,t){for(var n=e.parentNode?o.querySelectorAll(e.parentNode,t):[],r=n.length;r--;)if(n[r]===e)return!0};function y(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function E(e){return e.replace(/^-ms-/,"ms-").replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})}function S(e,t,n){return Array.prototype.slice.call(e,t,n)}function v(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")}function I(e){switch(e.nodeName.toLowerCase()){case"input":switch(e.type){case"checkbox":case"radio":if(e.checked)return e.value;break;case"file":case"reset":break;default:return e.value}break;case"textarea":return e.value;case"select":switch(e.type){case"select-one":return e.value;case"select-multiple":var t,n=0;for(n=0,t=e.options.length;n<t;n++)if(e.options[n].selected)return e.options[n].value}break;default:return e.innerText}}function C(e,t,n){for(var r=e.options||[],o=r.length,i=[];o--;)if(r[o].id==t){i=r[o].values||[];break}if(void 0===n)return i;for(o=i.length;o--;)if(i[o].id==n)return i[o].value}let T=i().Promise;var b=T.allSettled?e=>T.allSettled(e):e=>T.all(e.map(e=>e.then(e=>({status:"fulfilled",value:e})).catch(e=>({status:"rejected",reason:e}))));function O(e,t,n){var r=e;if("string"==c(t)){for(var o=t.split(n||"."),i=0;i<o.length&&void 0!==(r=r[o[i]]);i++);return r}}function w(e,t){let n=c(e);if("array"==n||"object"==n)for(let n in e)e[n]=w(e[n],t);else if("string"==n){e.isWellFormed()||(e=e.toWellFormed());try{e=i()[(t?"encode":"decode")+"URI"](e),t&&(e=e.replace(/[']/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))}catch(e){console.error(e)}}return e}function A(e,...t){"HTMLElement"==e.HTMLElement.name&&delete e.customElements.define,e.customElements.define(...t)}let P=!1;return u(o,{customElementsPolyfill:async function(e){if(P)return!0;let t=!1;try{function n(){return e.Reflect.construct(e.HTMLLIElement,[],n)}n.prototype=e.HTMLLIElement.prototype;const r="extends-li";A(e,"extends-li",n,{extends:"li"}),t=e.document.createElement("li",{is:r}).outerHTML.indexOf(r)<0}catch(o){t=!0}if(P=!0,t)try{return(await e.arequire("custom-elements-polyfill"))(globalThis),!0}catch(i){return void console.error(i)}return!0},eventPath:function(e){return Array.isArray(e.path)?e.path:e.composedPath?e.composedPath():function(e){for(var t=[];e;){if(t.push(e),"HTML"===e.tagName)return t.push(document),t.push(window),t;e=e.parentElement}}(e.target)},isFeatureAllowedInFreemium:function(e,t){if(!Array.isArray(t))return!1;if(t.includes(e))return!0;for(let n of t)if(n.endsWith("-*")){let t=n.slice(0,-1);if(e.startsWith(t))return!0}return!1},getZIndex:function(e){var t=Number(C(e.campaign.config,5==e.config.profile?"zindexes-mobile":"zindexes-desktop","teaser"==e.config.type?1:2));return isNaN(t)?99999:t},customElementsDefine:A,customElementsGet:function(e,...t){return"HTMLElement"==e.HTMLElement.name&&delete e.customElements.get,e.customElements.get(...t)},closest:function(e,t){let n=null;try{do{if(n=e.closest(t))break}while(e=e.getRootNode().host)}catch(e){}return n},nodeContains:function(e,t){let n=100,r=!1;try{do{if(n--,n<=0)return console.error("infinite loop"),r;if(r=e.contains(t))break}while(t=t.getRootNode().host)}catch(e){}return r},data2HTMLAttribute:function(e){return o.JSON.stringify(w(u(e),!0)).replaceAll('"',"'")},HTMLAttribute2Data:function(e,t=!1){try{return w(o.JSON.parse(e.replaceAll("'",'"')),!1)}catch(e){if(t)throw new Error(e)}},redirectTwemojiUrl:function(e){if("string"==c(e)&&e.includes("/twemoji.maxcdn.com/")){let t=e.split("/").pop().split(".").shift();e=`https://sleeknotestaticcontent.sleeknote.com/emoji/${t}.svg`}return e},definePropConst:function(e,t){let n=Object.keys(t)[0];return Object.defineProperty(e,n,{value:t[n]})},getDocument:function(e){if(e)return"contentDocument"in e?e.contentDocument:e.contentWindow.document},deepProp:O,allSettled:b,Promise:i().Promise,URL:i().URL,findPropValue:function e(t,n){if(String(n).split(".").length>1)return O(t,n);var r=c(t);if("array"==r||"object"==r)for(var o in t)if("array"==(r=c(t[o]))){if(o==n)return t[o];if(void 0!==(i=e(t[o],n)))return i}else if("object"==r){var i;if(void 0!==(i=e(t[o],n)))return i}else if(o==n&&void 0!==t[o])return t[o]},normalizeFontFamily:function(e){return String(e).split(",")[0].toLowerCase().replace(/['"]+/g,"").replace(/^\s+|\s+$/g,"")},urlFromCSSUrl:function(e){return e&&(e=(e=String(e)).slice(e.indexOf("(")+1,e.indexOf(")")).replace(/"/g,"")).includes(".")?e:""},urlencode:v,entries:function(e){let t=a(e,"entries");return t?l.call(t):Object.entries(e||s)},keys:function(e){let t=a(e,"keys");return t?t.keys():Object.keys(e||s)},values:function(e){let t=a(e,"values");return t?t.values():Object.values(e||s)},DOMContentLoaded:function(){return new(0,i().Promise)(function e(t){"loading"!=r.readyState?t():i().setTimeout(e,100,t)})},expireDaysToDate:function(e){var t=new Date;if(e=+e||0)return t.setTime(t.getTime()+864e5*e),t},randomName:function(){var e;do{e=Math.random().toString(36).substring(7)}while(!e.substr(0,1).match(/[a-zA-Z]/));return e},appendToUrl:function(e,t){return e+(t?(~e.indexOf("?")?"&":"?")+t:"")},parseForm:function(t,n,r){var o,i,s,a,l={};function c(e,t,n){e&&e.endsWith("[]")?(l[e]||(l[e]=[]),l[e].push(t)):l[e]=t}if(!t||!t.nodeName||"form"!==t.nodeName.toLowerCase())throw"You must supply a form element";for(o=0,i=t.elements.length;o<i;o++)""===(s=t.elements[o]).name||s.disabled||void 0!==(a=I(s))&&c(s.name,a);for(var u in l)e.Array.isArray(l[u])&&(l[u]=l[u].join(","));Object.keys(n||{}).forEach(function(e){c(e,n[e])});var d=[];return r?d=l:(d=[],Object.keys(l).forEach(function(e){d.push(v(e)+"="+v(l[e]))})),d},parseNodeValue:I,keyValueToQueryString:function(e){return Object.entries(e).map(([e,t])=>{var n;return e.match(/^(GT|LT|AMP|QUOT)/i)?(n=e.slice(0,1),e="%"+n.charCodeAt(0).toString(16).toUpperCase()+v(e.slice(1))):e=v(e),e+"="+v(t)}).join("&")},click:function(e,t){return function(e,t,n){var o;if(e)try{(o=r.createEvent("MouseEvent")).initMouseEvent(n||t.type,!0,!0,t.view,0,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),e.dispatchEvent(o)||o.preventDefault()}catch(e){console.log(e.message)}}(e,t,"click")},getAdvOption:C,typeStr:c,listener:t,S:"SHA-256",U:"UTF-8",gid:d,qsa:g,qs:p,findNode:function(e){return e?("string"!=typeof e&&(e=e.id),"#"!=e.charAt(0)&&(e="#"+e),p(e)):null},extend:u,contains:function(e){var t=Array.isArray(arguments[1])?arguments[1]:S(arguments,1);return Array.isArray(e)?t.some(function(t){return~e.indexOf(t)}):"object"==c(e)?t.some(function(t){return t in e}):t.some(function(t){return e==t})},slice:S,removeNode:function(e){e&&(e.nodeName||(e=d(e)),e&&e.parentNode&&e.parentNode.removeChild(e))},eventXY:function(e,t){var n,o;return t||(t=0),e.changedTouches&&e.changedTouches.length>t?(n=e.changedTouches[t].pageX,o=e.changedTouches[t].pageY):e.targetTouches&&e.targetTouches.length>t?(n=e.targetTouches[t].pageX,o=e.targetTouches[t].pageY):e.pageX||e.pageY?(n=e.pageX,o=e.pageY):(e.clientX||e.clientY)&&(n=e.clientX+r.body.scrollLeft+r.documentElement.scrollLeft,o=e.clientY+r.body.scrollTop+r.documentElement.scrollTop),{x:n,y:o}},throttle:function(e,t,r,o,s){function a(){this.lastTime=0,this.timer=0,this.after=this.after.bind(this),this.run=this.run.bind(this),this.a1,this.a2,this.a3}r||(r=n),a.prototype={after:function(){t.call(r,this.a1,this.a2,this.a3,3),this.lastTime=0,this.timer=0},run:function(){var n=+new Date,a=o&&!this.lastTime?1:n-this.lastTime>e?2:0;a&&(s||(t.call(r,this.a1,this.a2,this.a3,a),this.lastTime=n),this.timer&&i().clearTimeout(this.timer),this.timer=i().setTimeout(this.after,1.25*e))},throttle:function(e,t,n){this.a1=e,this.a2=t,this.a3=n,i().setTimeout(this.run,0)}};var l=new a;return l.throttle.bind(l)},applyOptions:function(e){var t,n=Object.prototype.hasOwnProperty;if(e)for(t in e)n.call(e,t)&&(this[t]=e[t])},template:function(e,t){for(var n=Array.isArray(t)?t.map(function(e,t){return t}):Object.keys(t),r=n.length;r--;)e=e.replace(new RegExp("\\{"+n[r]+"\\}","g"),t[n[r]]);return e.replace(/\{\w*\}/g,"")},insertHTML:function(e,t,n){return e&&e.nodeName?(n||(n="beforeend"),"afterbegin"==n?r=e.firstElementChild:"afterend"==n&&(r=e.nextElementSibling),e.insertAdjacentHTML(n,Array.isArray(t)?t.join(""):t),"beforebegin"==n?e.previousElementSibling:"afterbegin"==n?r?r.previousElementSibling:e.lastElementChild:"beforeend"==n?e.lastElementChild:"afterend"==n?r?r.previousElementSibling:e.parentNode.lastElementChild:void 0):null;var r},isNumeric:function(e){return!/^(NaN|-?Infinity)$/.test(+e)},isFunction:function(e){return"function"==c(e)},getHostname:function(e){return function e(t){return void 0===e.link&&(e.link=o.createElement.call(r,"a")),e.link.href=2==t.split("://").length?t:n.location.protocol+"//"+t,String(e.link.host)}(e)},getHashParams:function(e){var t,n=0,r={};if((e=([(e=e+""||(e=o.getElementsByTagName("script"))&&e.item(e.length-1).src).split("#")[1]]+"").split("&"))[0])for(;n<e.length;n++)r[(t=e[n].split("=",2))[0]]=t[1]?o.decodeURIComponent(t[1].replace(/\+/g," ")):void 0;return r},empty:function(e){var t=Object.prototype.hasOwnProperty;if(!e||0===e.length)return!0;var n=c(e);if("array"!=n){if("object"==n){for(var r in e)if(t.call(e,r))return!1;return!0}return!(e+"").match(/\S/)}},matchesSel:h,guid:function(e){var t=e||{prefix:!1,length:8};t.prefix||(t.prefix=!1),t.length||(t.length=8),this.length=t.length,this.timestamp=+new Date;for(var n=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},r=this.timestamp.toString().split("").reverse(),o="",i=0;i<this.length;++i){o+=r[n(0,r.length-1)]}return t.prefix&&(o=t.prefix+"-"+o),o},guid_string:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},querySelectorClosest:function(e,t){if(e)do{if(h(e,t))break}while(e=e.parentElement);return e},getQueryVarByName:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(n.location.search||n.location.hash);return t?o.decodeURIComponent(t[1].replace(/\+/g," ")):""},cleanUpReferral:function(e){var t=e,n=(t=(t=(t=(t=t.replace("https://","")).replace("http://","")).replace("www.","")).split("/")[0]).split(".");return t=t.replace("."+n[n.length-1],"")},trim:function(e){return e?(e+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""):""},camelCaseToDashSeparated:y,dashSeparatedToCamelCase:E,PascalCaseToDashSeparated:function(e){return y(e).substr(1)},getAppliedStyles:function(e,t={}){const{asCSSVars:n}=t;let r=e.style,o=r.length,i=Object.create(null);for(;o--;){let e=E(r[o]);if(n){i[`--${E(e)}`]=r[e]}else i[e]=r[e]}return i},onVisibility:function(t,n){if(new e.IntersectionObserver((e,r)=>{e.forEach(e=>{e.intersectionRatio>0&&(n(t),r.disconnect())})}).observe(t),!n)return new Promise(e=>n=e)},translateShopifyKeysToSiteDataProperties:function(e,t){switch(e){case t.CART.TOTALPRICE:return"Cart.totalPrice";case t.CART.ITEMSSUBTOTALPRICE:return"Cart.subtotalPrice";case t.CART.CURRENCY:return"Cart.currencyCode";case t.CUSTOMER.EMAIL:return"Customer.email";case t.CUSTOMER.PHONE:return"Customer.phone";case t.CUSTOMER.PROVINCECODE:return"Customer.address.provinceCode";case t.CUSTOMER.COUNTRYCODE:return"Customer.address.countryCode"}return e}}),o}),sndefine("logger",["core-sleeknote","constants","global"],function(e,t,n){const r=this,o=n.console,i="s"!=e.debug,s=(()=>{const e=new n.Map,t=new n.Set;function r(n,r,i,s){i?e.has(i)?e.get(i).entries.push({msg:n,type:r,time:Date.now(),after:s}):(e.set(i,{parent:null,entries:[],msg:n,type:r}),t.add(i)):o[r](...n)}return function({type:n="log",msg:s,group:a,parent:l,after:c}){Array.isArray(s)||(s=[s]),"group"==n||"groupCollapsed"==n?l?(e.has(a)?o.error("duplicate group name: ",a):e.set(a,{parent:l,entries:[],msg:s,type:n}),t.has(a)&&t.delete(a)):r(s,n,a):"groupEnd"==n?t.has(a)?(i(a),e.delete(a),t.delete(a)):o.groupEnd():r(s,n,a,c)};function i(t,n=0){const r=e.get(t);o[r.type](...r.msg),r.entries.forEach(({msg:e,type:t,after:n})=>!n&&o[t](...e)),Array.from(e.entries()).filter(([e,n])=>n.parent===t).forEach(([e])=>{i(e,n+1),r.entries.forEach(({msg:t,type:n,after:r})=>r==e&&o[n](...t))}),o.groupEnd()}})();function a(...e){try{throw new Error("debug")}catch(n){var t=n.stack.split("\n").slice(2,3).join("").split(":").slice(2,3).join("");return e.push("line:",t),e.join(" ")}}function l(e,t,n){return"string"==typeof e&&(e=e.split("-")[0]),n===Boolean(n)&&(n=n?"YES":"NO"),0===(t+"").indexOf("START")&&(e="\n"+e),void 0!==n&&(t+=": "+n),e+" "+t}function c(e,t,n,r,o){var i=(e.CampaignId+"").split("-")[0];o===Boolean(o)&&(o=o?"YES":"NO");var s=[i," ",t||""," [",n||"",', "',r||"",'"]'];void 0!==o&&s.push(" ->");o=void 0===o?"":o;return s.join("")+o}return{log:function(n,u=e=>e){const d=t.CORE.FORMATTERS,g={[d.EVALUATOR]:c,[d.CORE]:a,[d.CONFIG]:l};if(e.debug==n){if(g[u])return u=g[u],(...e)=>{o.log(u(...e))};if(u==d.SNDEBUG)return(...e)=>function({type:e,msgs:t=[],styles:n=[],parent:a,group:l,after:c}){if(r.location.search.includes("sleeknote_logs_to_var"))return r.logs||(r.logs=""),r.logs+=t.join(""),void(r.logs+="\n");n=n.map(e=>{switch(e){case"error":return"font-weight: bold; color: rgb(221, 48, 82)";case"normal":return"color: rgb(37, 52, 90)";case"normal-bold":return"color: rgb(37, 52, 90);font-weight: bold;";case"success":return"font-weight: bold; color: rgb(11, 121, 93)";case"message":return"color: rgb(84, 87, 255);font-weight: bold;";case"group":return"font-weight: bold;color: rgb(38, 39, 115);";case"italic":return"font-style: italic;";default:return e}});let u="";t.forEach(e=>{u+=`%c${e}`});let d="dir"==e?[t[0]]:[u,...n];e=e&&e in o?e:"log",i?s({type:e,msg:d,group:l,parent:a,after:c}):o[e](...d)}(...e)}return n==t.CORE.LOGLEVELS.EDITORTARGETING?(r.targetingEditorLog="",e=>{r.targetingEditorLog+=`${e.msgs[0]}<br/>`}):()=>{}}}}),sndefine("consent",["utils","core-sleeknote"],function(e,t){var n=this,r={},o={};const i="SleekNote";function s(t,n){return n==i?e.dashSeparatedToCamelCase("sleeknote-"+t+"-consent"):`${n}.consent.${t}`}function a(e,i,a,l){let c=i in r?i[r]:function(e){let{namespaces:r}=t;try{!r&&n.sndefine&&(r=n.sndefine.namespaces)}catch(e){}for(let t of r){let r=s(e,t);if(r in n)return o[e]=!!n[r]}}(i),u=s(i,e),d=Object.getOwnPropertyDescriptor(n,u);if(!d||!d.set){void 0===c?(c=a(i,!0),r[i]=void 0===c||!!c):(r[i]=c,l(r[i],i,a));const e=function(e){e=!!e,r[i]!=e&&(r[i]=e,l(r[i],i,a))};Object.defineProperty(n,u,{set:e,get:function(){var t=new Boolean(!!r[i]);return t.set=e,t}})}}return{get:function(e){return r[e]},initialize:function(e,r,o){let{namespaces:s}=t;try{!s&&n.sndefine&&(s=n.sndefine.namespaces)}catch(e){}for(let t of s)a(t,e,r,o);s.has(i)||a(i,e,r,o)}}}),sndefine("storage-categories",["consent","utils","core-sleeknote"],function(e,t,n){let r={timestamp:"sn_global_countdown_last_reset_timestamp",_sn_a:"_sn_a",_sn_m:"_sn_m",_sn_n:"_sn_n",location:"location",mergeId:"mergeId",cookie:"cookie",session:"session",siteData:"siteData",local:"local",analytics:"analytics",marketing:"marketing",SNSubscribed:"SNSubscribed",SNS:"SNS",necessary:"necessary",SleekNote:"SleekNote",oos:"oos"},{timestamp:o,_sn_a:i,_sn_m:s,_sn_n:a,location:l,cookie:c,session:u,siteData:d,local:g,analytics:p,marketing:m,SNSubscribed:f,SNS:h,necessary:y,SleekNote:E,mergeId:S,oos:v}=r,I={[p]:["visitorId","goalShown","goalEngaged","userSessionStart","userSessionEnd",l],[y]:["globalCountdown","sessionId","campaignClosed","campaignHidden","sessionConverted","campaignEngaged","queryIncluded","showCount","sessionShowCount","inSplitTest","splitTestCohort","consent","mergeId"],[m]:["referrer","UTMInclude","sequence","pagesVistedTotal","pageVisitedSession","newVisitor","geoLocation","IPAddress"]};let C={cookie:{[i]:{default:{},type:c},[s]:{default:{},type:c},[a]:{default:{},type:c},[h]:{type:c},[f]:{type:c}},local:{[E]:{default:{},type:g},[o]:{type:g}},session:{[E]:{default:{},type:u}}},T={[p]:I[p],[m]:I[m],[d]:[d]};return{isAllowed:function(r){if(n.preview)return!0;if(r==d)return e.get(r);for(let[n,o]of t.entries(T))if(o.includes(r))return e.get(n);return!0},overAllKeys:async function(e,n,r,o){for(let[i,s]of t.entries(C))for(let t of Object.keys(s)){let s=await e[i][n](t);r&&r.call(o,s,i,t)}},getStorage:function(e){let r=function(e){let r=n.custom("necessaryNotInCookie"),o=n.custom("marketingNotInCookie");if(t.contains(e,d))return u;let i=[v,S,"timestamp"];return r&&i.push("globalCountdown","sessionId","campaignClosed","campaignHidden","sessionConverted","campaignEngaged","queryIncluded","showCount","sessionShowCount","inSplitTest","splitTestCohort"),o&&i.push("referrer","UTMInclude","sequence","pagesVistedTotal","pageVisitedSession","newVisitor","geoLocation","IPAddress"),t.contains(e,i)?g:c}(e),i=e;return r==c?i=function(e){for(let[n,r]of t.entries(I))if(r.includes(e))return"_sn_"+n.charAt(0);return e}(e):r==u?i=E:r==g&&(i="timestamp"==i?o:E),{type:r,key:i}},props:r,storageKeys:C,getStorageForErase:function(e){return{[p]:[[c,i]],[m]:[[c,s]],[d]:[[u,E]]}[e].map(e=>({type:e[0],key:e[1]}))}}}),function(){var e,t,n,r,o=this.document,i=Object.prototype.hasOwnProperty,s={userDrag:"",userSelect:"",flexDirection:"",flexWrap:"",justifyContent:"",alignItems:"",alignContent:"",order:"",flex:"",alignSelf:"",flexGrow:"",flexShrink:"",flexBasis:"",animation:"",animationDelay:"",animationDirection:"",animationDuration:"",animationFillMode:"",animationIterationCount:"",animationName:"",animationPlayState:"",animationTimingFunction:"",transform:"",transformOrigin:"",transformStyle:"",transition:"",transitionDelay:"",transitionDuration:"",transitionProperty:"",transitionTimingFunction:"",perspective:"",perspectiveOrigin:"",backfaceVisibility:""},a=Array.isArray,l=["-webkit-","-moz-","-ms-",""];function c(n,r){var o=n.indexOf("-");if(0===o)return n;var i,a=~o?e.dashSeparatedToCamelCase(n.toLowerCase()):n;return"-"==n.charAt(0)&&(a=a.charAt(0).toLowerCase()+a.substr(1)),i=e.camelCaseToDashSeparated(a),a in s?r?l.map(function(e){return e+i}):t.cssVendor+i:(0===i.indexOf("webkit-")&&(i="-"+i),r?[i]:i)}function u(n,r){var o,i,s=a(r),l=e.isNumeric(r),c=!(s||""!==r&&l);l&&""!==r&&(r=+r);var u="";function d(e){return"cubic-bezier("+e.join(",")+")"}function g(e){return e.blink?~e.indexOf("e-")&&(e="0%"):(e<1&&e>0||e<0&&e>-1)&&(e=0),e}function p(e){var t=3==e.length,n=g(e[0]||0),r=g(1==e.length?0:e[1]||0);return(!n.indexOf||n.indexOf("%")<0)&&(n+="px"),(!r.indexOf||r.indexOf("%")<0)&&(r+="px"),"translate"+(t?"3d":"")+"("+n+","+r+(t?","+(e[2]||0):"")+")"}function m(e){var t=g(e[0]),n=g(1==e.length?0:e[1]);return t.blink||(t+="px"),n.blink||(n+="px"),t+" "+n}n=n.toLowerCase().replace(/\-/g,"");if(/origin/.test(n)&&s)return Math.round(100*r[0])+"% "+Math.round(100*r[1])+"%";if("transform"==n&&s){if((o=r.length)<=5)return o>=4&&+r[3]&&(u="perspective("+r[3]+"px) "),u+=a(r[0])?p(r[0]):p(r),o>1&&a(r[0])&&(u+=a(r[1])?" rotate3d("+r[1].join()+"deg)":" rotate("+(+r[1]||0)+"deg)",u+=" scale("+(+r[2]||1)+")"),5==o&&(u+=" "+p(a(r[4])?r[4]:[r[4]])),u;if(6==o)return"matrix("+r.join(",")+")"}else{if(e.contains(n,"width","height","left","top","right","bottom")){if(void 0===r)return;if(c||0===r)return r;var f=a(r)?e.extend(r):[r];try{f=f.map(function(t,n){var r;return t=(t+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),e.isNumeric(t)?(r=t,t+="px"):r=parseInt(t,10),n&&(r<0?t=t.replace("-","- "):r>=0&&(t="+ "+t)),t})}catch(e){return""}return 1==f.length?f[0]:"calc("+f.join(" ")+")"}if("backgroundsize"==n){if(s)return m(r);e.isNumeric(r)&&(r+="px")}else{if("backgroundposition"==n&&s){if(4==r.length){let e=g(r[1]),t=g(r[3]);return e.blink||(e+="px"),t.blink||(t+="px"),`${r[0]} ${e} ${r[2]} ${t}`}return m(r)}if(!c&&0!==r&&(~",top,left,bottom,right,perspective".indexOf(","+n)||/width|height|margin|padding|radius|size/.test(n)))return r+"px";if("transitionproperty"==n)return s&&(r=r.join(", ")),(r=r.replace(t.cssVendor,"")).replace("transform",t.cssVendor+"transform");if("display"==n&&!c)return r?"block":"none";if("pointerevents"==n&&!c)return r?"auto":"none";if(("visibility"==n||/overflow/.test(n)||"backfacevisibility"==n)&&!c)return r?"visible":"hidden";if(/delay|duration/.test(n)&&!c)return s&&(r=r.join("ms, ")),r+"ms";if(/timingFunction/.test(n)&&s){if(r[0]===+r[0])return d(r);for(i=0;i<r.length;i++)u+=(i?", ":"")+(a(r[i])?d(r[i]):r[i]);return u}}}return null==r&&(r=""),r}function d(e,t,n,r){e.style.setProperty(c(t),u(t,n),r?"important":""),"fontFamily"==t&&(e.style.fontFamily=e.style.fontFamily.replace(/\"/g,"'"))}function g(){var t,n,r,o,i,s=Array.prototype.slice.call(arguments);"object"==e.typeStr(s[1])?(s.splice(2,0,""),t=s[1],(n=Object.keys(t),r=n.indexOf("transform"),o=n.indexOf("width"),i=n.indexOf("height"),~r&&(~o&&o<r||~i&&i<r)&&(n.splice(r,1),n.unshift("transform"),~(r=n.indexOf("transformOrigin"))&&(n.splice(r,1),n.unshift("transformOrigin"))),n).forEach(function(e){s[1]=e,s[2]=t[e],d.apply(null,s)})):d.apply(null,s)}function p(){var e,t,n=Array.prototype.slice.call(arguments);if(n[0])if(!n[0].nodeName&&(e=n[0].length))for(t=n[0];e--;)n[0]=t[e],g.apply(this,n);else n[0].style&&g.apply(this,n)}function m(t){t=e.dashSeparatedToCamelCase(t);var n=s[t];return n||t}var f;l=["-webkit-","-moz-","-ms-",""];function h(t,n,r){var o=t;if(void 0===o)return"";"object"!=e.typeStr(t)?(o={})[t]=n:r=n;var a,c,d=[];for(t in o)if(i.call(o,t)){if(n=u(t,o[t]),"fontFamily"==t&&(n=n.replace(/\"/g,"'")),void 0===n)continue;n=":"+n+";",a=e.dashSeparatedToCamelCase(t),s[a]?r?(c=e.camelCaseToDashSeparated(a),(Array.isArray(r)?r:l).forEach(function(e){d.push(e,c,n)})):d.push(e.camelCaseToDashSeparated(s[a]),n):d.push(e.camelCaseToDashSeparated(a),n)}return d.join("")}function y(t,n){var r,o,i={};return t&&t.nodeName?(r=t.style,o=r.cssText):(o=h(t),r=t),n.forEach(function(n){var s=n;"overflowY"==n&&t&&t.nodeName&&(s="overflow"),i[n]=~o.indexOf(e.camelCaseToDashSeparated(s))?r[n]:""}),e.JSON.stringify(i)}function E(e,t,n){t.setAttribute("data-"+e,y(t,Object.keys(n))),p(t,n)}function S(t,n,r){if(t="data-"+t,n&&n.hasAttribute(t)){var o=e.JSON.parse(n.getAttribute(t));Array.isArray(r)&&r.forEach(function(e){delete o[e]}),p(n,o),n.removeAttribute(t)}}var v=Object.keys({height:0,pointerEvents:"none",visibility:0,overflowY:0});function I(e){if(!e.hasAttribute("data-conceal"))return E("conceal",e,{height:0,pointerEvents:"none",visibility:0,overflowY:0})}function C(e){return S("conceal",e)}var T={normalize:function(t,n){var r=t;if(void 0===r)return{};"object"!=e.typeStr(t)&&((r={})[t]=n);var o,a={};for(t in r)if(i.call(r,t)){if(n=u(t,r[t]),"fontFamily"==t&&(n=n.replace(/\"/g,"'")),void 0===n)continue;o=e.dashSeparatedToCamelCase(t),s[o]&&(o=s[o]),a[o]=n}return a},applyPerspectiveIf:function(e,t){return(e.transform.length>=3&&Array.isArray(e.transform[0])&&e.transform[0][2]>0||Array.isArray(e.transform[4])&&e.transform[4][2]>0||Array.isArray(e.transform[1])&&(e.transform[1][0]||e.transform[1][1]))&&(e.transform[3]=+t||800),e},addRule:function(t,n,r,i){r||(r=o);var s=e.qsa("#"+f,r)[0];if(!s){let t=r.head||e.qsa("head",r)[0]||r.documentElement;t.insertAdjacentHTML("beforeend",'<link rel="stylesheet" class="fs-css-in-js" type="text/css" href="data:text/css;base64,aW5ze30=" id="'+f+'">'),s=t.lastElementChild;try{s.sheet.insertRule(".foo{zoom:1}",0),s.sheet.deleteRule(0)}catch(n){e.removeNode(s),(s=r.createElement("style")).id=f,t.appendChild(s)}}s.sheet.insertRule(t+"{"+n+"}",0)},set:p,get:function(e,t,o){if(!t||!t.blink)return"";var i;e.length&&(e=e[0]),"cached"==o&&r?i=r:(i=n(e,null),r=void 0),"seed"==o&&(r=i);var s=i[m(t)];return s&&String(s).indexOf("px")==s.length-2?parseInt(s,10):s},inline:h,property:m,clear:function(e,t){p(e,t)},overwriteCSS:E,restoreCSS:S,conceal:I,concealedStyle:function(t){return h(e.extend({},t||{},{height:0,pointerEvents:"none",visibility:0,overflowY:0}))},concealedData:function(e){return y(e,v)},cssConcealed:function(t,n,r){return function(t,n,r,o,i){if(t="data-"+t,n){if(n.hasAttribute(t)){var s=e.JSON.parse(n.getAttribute(t));o.forEach(function(e){r[e]&&(s[e]=r[e],delete r[e])}),n.setAttribute(t,e.JSON.stringify(s))}p(n,r,i)}}("conceal",t,n,v,r)},rob:function(e,n){var{C:r,P:o,F:i,T:s,O:a}=t;return r(o,[t=>{this.reader=r(i,[]),(this.reader.onload=e=>{t(this.reader.result)}).toString(),this.reader.readAsArrayBuffer(r(a,[[e],{type:s+n}]))}])},A:this.crypto,flashRevealIf:function(e,t){var n=e.hasAttribute("data-conceal");n&&C(e);var r=t(e);return n&&I(e),r},reveal:C,addRuleObj:function(e,t,n){return this.addRule(e,h(t),n),this.addRule("@media print",e+"{display: none!important;}",n),!0},translateProperty:c,translateValue:u};sndefine("css",["utils","browser"],function(r,o){return t=o,f=(e=r).randomName(),n=e.getComputedStyle,T})}.call(this),sndefine("custom-elements",["global","utils"],function(e,t){let n=new e.Set,r=this,o=r.document;return function({target:i,name:s,style:a,html:l,content:c,after:u,id:d,shadowDOM:g,className:p,cover:m,kind:f,type:h}){return new e.Promise(function(e,f){if(!s)return f();let h;g&&(n.has(s)||(n.add(s),t.customElementsDefine(r,s,class extends r.HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}}))),h=i?i.appendChild(o.createElement(s)):u(),d&&h.setAttribute("data-campaign",d),r.requestAnimationFrame(function(){if(g){let e=o.createElement("template");e.innerHTML=`<style id=host-style>:host{${a||""}}</style>${l||""}`,h.shadowRoot.appendChild(e.content)}else a&&(h.style.cssText+=a),p&&h.classList.add(p),l&&h.insertAdjacentHTML("beforeend",l);m?(h.setAttribute("role","dialog"),h.setAttribute("aria-modal","false")):s.includes("top")||s.includes("bottom")||h.setAttribute("aria-hidden","true"),c&&("function"==typeof c?c(h):(g?h.shadowRoot:h).appendChild(c)),e(h)})})}}),sndefine("behaviour",["constants","utils","core-sleeknote","browser"],function(e,t,n,r){var o=e.POS,i=e.PA.CENTER,s=e.PA.INSIDE,a=e.PA.OUTSIDE,l=e.PA.BOTTOM,c=(e.PA.TOP,e.PROFILE.MOBILE),u=e.PROFILE.TABLET,d=e.PROFILE.DESKTOP,g=e.AL.TOP_LEFT;let p="100vh",m=0;{document.body.insertAdjacentHTML("afterbegin",'<div style="display: flex; position: fixed; width: 0; height: 30vh"></div>');let e=document.body.firstElementChild,t=window.getComputedStyle(e).height;Object.assign(e.style,{height:"100dvh"});let n=window.getComputedStyle(e).height;n>t?(p="100dvh",m=n):(Object.assign(e.style,{height:"100vh"}),m=window.getComputedStyle(e).height),e.remove()}function f(e,r){var o=void 0===e.distanceFromEdge?[]:(e.distanceFromEdge+"").split(",");(o=o.map(function(e){return+e||0})).length>4&&(o.length=4);var i=0;switch((t.empty(e.distanceFromEdge)&&e.profile==d||e.profile==u&&!n.tabletUsesMobile)&&(i=10),o.length){case 0:o=[i,i,i,i];break;case 1:o=[o[0],o[0],o[0],o[0]];break;case 2:o=[o[0],o[1],o[0],o[1]];break;case 3:o=[o[0],o[1],o[2],o[1]]}var s,a=["top","right","bottom","left"].indexOf(r);return a<0&&(a=0),(s=+o[a]||0)%2?s+1:s}const h=n.custom;var y={common:{relativeWidth:0,current:"close",width:0,height:0,attach:"left"},spacer:function(e){var r={bodyTop:{def:"bodyTop",kind:"shared",selector:n.editor?"window":"body",insert:"afterbegin",style:{width:"100%",position:"relative"}},selector:{def:"selector",selector:"",kind:"campaign",insert:"afterbegin",style:{width:"100%",position:"static"}}},o="object"==t.typeStr(e.placement),i=r.bodyTop;return o?i=r[o.def]:(i=r[e.placement])||((i=r.selector).selector=e.placement),t.extend({type:"spacer",id:"sleeknote-spacer-"+("shared"==i.kind?i.selector:e.campaignId),next:e.next,current:e.current,width:[e.width],height:e.boundsHeight},i,o?e.placement:{})},badge:function(e){return t.extend({},this.common,e||{},{type:"badge"})},cover:function(e){return t.extend({},this.common,{type:"cover"})},teaser:function(e){var n=+e.relativeWidth||0;let{attach:r,rotate:i}=e;if(e.profile==c)switch(n=n||100,e.position){case o.CENTER_LEFT:case o.CENTER_RIGHT:n=0;break;case o.POPUP9:case o.BOTTOM_RIGHT:r=r||"right";break;default:r=r||"left"}return t.extend({},this.common,e,{type:"teaser",attach:r,relativeWidth:n,rotate:i})},form:function(e){var n,r=+e.relativeWidth||0;switch(e.profile==c&&(r=r||100),e.position){case o.SLIDEUP:case o.SLIDEUP2:case o.SLIDEDOWN:r=r||(e.profile==c?100:0);break;case o.HELLO:case o.HELLO2:n=n||'[data-type="toggle"]',r=r||100}return t.extend({},this.common,e,{type:"form",toggle:n,relativeWidth:r})},calendar:function(e){var n=+e.relativeWidth||0;switch(e.profile==c&&(n=n||100),e.position){case o.SLIDEUP:case o.SLIDEUP2:case o.SLIDEDOWN:n=n||(e.profile==c?100:0);break;case o.HELLO:case o.HELLO2:n=n||100}return t.extend({},this.common,e,{type:"calendar",toggle:void 0,relativeWidth:n})},success:function(e){return t.extend(y.form(e),{type:"success",toggle:void 0})}},E={defaults:{ease:[0,0,.58,1],duration:300,delay:0,style:{}},create:function(){var e=[{},this.defaults].concat(Array.prototype.slice.call(arguments));return t.extend.apply(null,e)},centerSlideIn:{open:function(t){let n=(t.valign||"top").toUpperCase(),r=(t.halign||"left").toUpperCase(),o={duration:400,ease:[0,0,0,1],style:{opacity:1},anchor:e.AL[n+"_"+r],move:[t.move.x,"50%"]};if(t.rotate){let e=[s,s],n=[0,i,0,1],a=[],l=[],c="bottom"==t.rotate;return"LEFT"==r?(n[2]=c?90:-90,a=c?[0,1]:[0,0],l=c?["-50%",-t.move.y]:["-50%",t.move.y]):(n[2]=c?-90:90,a=c?[1,1]:[0,0],l=c?["50%",-t.move.y]:["-50%",t.move.y]),E.create({...o,to:e,rotateScale:n,origin:a,translate:l})}return E.create({...o,to:[s,i]})},close:function(e){let t=[0,"50%"],n=[.5,.5];if(e.rotate){let r=(e.halign||"left").toUpperCase(),o=[],i="bottom"==e.rotate;return"LEFT"==r?(n=i?[0,0]:[0,1],o=["-50%",0]):(n=i?[1,0]:[0,1],o=i?["50%",0]:["-50%",0]),E.create(this.open(e),{duration:300,move:t,origin:n,to:[a,s],translate:o})}return E.create(this.open(e),{duration:300,move:t,to:[a,i]})}},sideSlideIn:{open:function(t){return E.create({anchor:e.AL[(t.valign||"top").toUpperCase()+"_"+(t.halign||"left").toUpperCase()],to:[s,s],move:[0,0],style:{opacity:1},origin:["right"==t.halign?1:0,"bottom"==t.valign?1:0],duration:400,ease:[0,0,0,1]})},close:function(e){return E.create(this.open(e),{to:[a,s],duration:300})}},centerPopupSlide:{open:function(){return E.create({ease:[.25,.1,.25,1],anchor:g,to:[i,i],move:["50%","50%"],animate:{opacity:1},duration:400})},close:function(){return E.create(this.open(),{move:["50%","55%"],animate:{opacity:0},duration:400})},closeDown:function(){return E.create(this.close(),{move:["50%","55%"]})},openSpring:function(){return E.create(this.open(),{duration:600,ease:"wall"})}},centerPopupRotate:{open:function(){return E.create({anchor:g,to:[i,i],move:["50%","50%"],rotateScale:[i,i,[0,1,1,0],1],animate:{opacity:1},duration:300})},close:function(){return E.create(this.open(),{rotateScale:[i,i,[0,1,1,-180],.1],ease:[.25,.1,.25,1],animate:{opacity:0}})},close2:function(){return E.create(this.close(),{rotateScale:[i,i,[0,1,1,180],.1]})},openflip:function(){return E.create(this.open(),{style:{backfaceVisibility:"hidden"},ease:[.5,0,.5,1],origin:[0,.5],rotateScale:[i,i,[1,0,0,0],1]})},closeflip:function(){return E.create(this.close(),{style:{backfaceVisibility:"hidden"},ease:[.5,0,.5,1],rotateScale:[i,i,[1,0,0,-180],1],origin:[0,.5],animate:{opacity:1}})},closeflip2:function(){return E.create(this.closeflip(),{rotateScale:[i,i,[1,0,0,180],1]})}},topCenterPopup:{open:function(){return E.create(E.centerPopupSlide.open(),{to:[i,s],move:["50%",0]})},close:function(){return E.create(E.centerPopupSlide.close(),{to:[i,a],move:["50%",0]})}},basicSlideIn:{open:function(t){return E.create({anchor:e.AL[(t.valign||"top").toUpperCase()+"_"+(t.halign||"left").toUpperCase()],to:[e.PA[t.center?"CENTER":"INSIDE"],s],move:t.center?["50%",t.move.y]:[t.move.x,t.move.y],rotateScale:void 0,origin:["right"==t.halign?1:0,"bottom"==t.valign?1:0],ease:[.25,.1,.25,1],duration:t.duration||600,style:{opacity:1}})},close:function(t){return E.create(this.open(t),{to:[e.PA[t.center?"CENTER":"INSIDE"],a],ease:[.42,0,1,1],move:t.center?["50%",0]:[t.move.x,0],rotateScale:void 0})},half:function(e){return E.create(this.open(e))}},badgeSlideIn:{open:function(t){let{halign:n}=t,r="RIGHT"==n?e.AL.BOTTOM_RIGHT:e.AL.BOTTOM_LEFT,o=["CENTER"==n?i:s,s],a="CENTER"==n?["50%",0]:[0,0],c=[.5,.5],u="RIGHT"==n?90:-90,d="CENTER"==n?void 0:[e.PA[n],l,u,1];return"RIGHT"==n?c=[1,0]:"LEFT"==n&&(c=[0,0]),E.create({anchor:r,to:o,move:a,rotateScale:d,duration:300,origin:c})},close:function(e){let{halign:t}=e,n=["CENTER"==t?i:a,a],r=[.5,.5];return"RIGHT"==t?r=[0,0]:"LEFT"==t&&(r=[1,0]),E.create(this.open(e),{to:n,origin:r})}},grow:{open:function(e){return E.create({anchor:g,to:[s,s],animate:{height:e.height}})},close:function(e){return E.create(this.open(e),{animate:{height:0}})},half:function(e){return E.create(this.open(e))}},fadeIn:{open:function(){return E.create({anchor:g,to:[s,s],ease:"linear",origin:[0,0],animate:{opacity:1}})},close:function(){return E.create(this.open(),{delay:100,animate:{opacity:0}})}}};var S={spacer:function(e){var n=!t.empty(e.placement)&&function(e){return t.contains(e.position,o.HELLO)}(e);return n&&"bodyTop"==e.placement?!h("nospacer"):n},badge:function(e){if(n.needBadge&&!t.contains(e.position,o.HELLO,o.HELLO2,o.SIDEBAR_LEFT,o.SIDEBAR_RIGHT)&&t.contains(e.type,"form","success")){if(e.profile==d)return!0;if(e.profile==c&&e.version>4)return!0}},cover:function(e){return!!t.contains(e.type,"form","success","calendar")&&function(e){switch(e.position){case o.SLIDEUP:case o.SLIDEUP2:case o.SLIDEDOWN:case o.CENTER_LEFT:case o.CENTER_RIGHT:if(e.profile!=d)return!0;break;case o.POPUP:case o.POPUP2:case o.POPUP5:case o.POPUP7:case o.POPUP9:return!0}}(e)}},v={spacer:function(e,n,r){var o=e.height;if(r&&r.config.toggle){var i=t.qs(r.config.toggle,r.config.boxNode);if(i)o=i.getBoundingClientRect().height}return E.grow[n]({height:o})},badge:function(e,t){var n="center";switch(e.position){case o.CENTER_LEFT:case o.BOTTOM_LEFT:n="left";break;case o.CENTER_RIGHT:case o.BOTTOM_RIGHT:n="right"}return E.badgeSlideIn[t]({halign:n.toUpperCase()})},cover:function(e,t){return E.fadeIn[t]()},form:function(n,r,i,s){var a,l,u="topCenterPopup",d=n.move?t.extend(n.move):{x:0,y:0};switch(n.position){case o.SLIDEUP:case o.SLIDEUP2:a="top",u="basicSlideIn";break;case o.HELLO:u="basicSlideIn",a="top";break;case o.HELLO2:case o.SLIDEDOWN:u="basicSlideIn",a="bottom";break;case o.POPUP:case o.POPUP2:u="centerPopupSlide",i&&"form"==n.type&&("teaser"==i&&"open"==r&&(r="openSpring"),"success"==i&&"close"==r&&(r="closeDown"));break;case o.POPUP5:case o.POPUP7:case o.POPUP9:u="topCenterPopup";break;case o.CENTER_LEFT:n.profile==c?(a="top",u="basicSlideIn"):(l="left",a="top",u="centerSlideIn");break;case o.CENTER_RIGHT:n.profile==c?(a="top",u="basicSlideIn"):(l="right",a="top",u="centerSlideIn");break;case o.SIDEBAR_LEFT:l="left",a="top",u="sideSlideIn";break;case o.SIDEBAR_RIGHT:l="right",a="top",u="sideSlideIn";break;case o.BOTTOM_LEFT:u="basicSlideIn",l="left",a="bottom";break;case o.BOTTOM_RIGHT:u="basicSlideIn",l="right",a="bottom";break;case o.EMBEDDED:return E.fadeIn[r]()}if(r==e.CORE.COMMANDS.MINIMIZE&&n.toggle){var g=t.qs(n.toggle,n.boxNode).getBoundingClientRect(),p=n.boxNode.getBoundingClientRect();if(g.height)switch(n.position){case o.HELLO:d.y=-(g.top-p.top);break;case o.HELLO2:d.y=-(n.bounds.height-g.height)}}return E[u][r]||(r="open"),E[u][r]({halign:l,valign:a,move:d})},success:function(e,t,n,r){return this.form(e,t,n,r)},calendar:function(e,t,n,r){return this.form(e,t,n,r)},teaser:function(e,n){var r,i,s,a,l=e.move?t.extend(e.move):{x:0,y:0},u="basicSlideIn";switch(e.position){case o.SLIDEUP:case o.SLIDEDOWN:i="bottom",e.attach&&e.relativeWidth<100?r=e.attach:e.profile==c?r="left":a=!0;break;case o.SLIDEUP2:i="top",e.attach&&e.relativeWidth<100?r=e.attach:e.profile==c?r="left":a=!0;break;case o.POPUP:case o.POPUP2:case o.POPUP5:a=!0,i="bottom";break;case o.CENTER_LEFT:s=e.rotate,r="left",i="top",u="centerSlideIn";break;case o.CENTER_RIGHT:s=e.rotate,r="right",i="top",u="centerSlideIn";break;case o.POPUP7:case o.BOTTOM_LEFT:case o.SIDEBAR_LEFT:r="left",i="bottom";break;case o.POPUP9:case o.BOTTOM_RIGHT:case o.SIDEBAR_RIGHT:r="right",i="bottom"}return E[u][n]||(n="open"),E[u][n]({halign:r,valign:i,center:a,rotate:s,move:l})}};var I={anchored:{host:{maxHeight:n.editor?"100%":p,overflow:"visible",pointerEvents:"auto",zIndex:-1,display:"flex",position:"absolute",padding:0,margin:0,border:"none",boxSizing:"border-box",backgroundColor:"transparent",transitionDuration:0,width:"-moz-fit-content",width:"fit-content",justifyContent:"center"}},embedded:{host:{display:"block",position:"absolute",top:0,left:0,padding:0,margin:0,border:"none",boxSizing:"border-box",backgroundColor:"transparent",willChange:"transform, opacity",transitionDuration:0,height:"100%",width:"100%",visibility:"hidden"}}};return{fullHeightPx:m,hostStyle:function(e){let r="EmbeddedNote"==e.kind?"embedded":"anchored",o=t.extend({},I[r].host);if("anchored"==r){let t=f(e.config,"bottom"),r=f(e.config,"top"),i={x:0,y:0};n.hasCustomProp("moveBox")&&(i=n.custom("moveBox")(e.config,i)),o["--distancefromedge"]=`${t+r+i.y}px`;let s=n.editor?"100cqh":p;o.maxHeight=`calc(${s} - var(--distancefromedge))`,e.config.profile==c&&e.config.version<5&&"teaser"!=e.config.type&&(o.overflowY="auto")}return o},custom:I,defaults:function(e,t){return e in y?y[e](t):t},isSleekBar:function(e){return t.contains(e.position,o.HELLO,o.HELLO2)},isSideBar:function(e){return t.contains(e.position,o.SIDEBAR_RIGHT,o.SIDEBAR_LEFT)},isPopup:function(e){if(e.profile==d)switch(e.position){case o.POPUP:case o.POPUP2:case o.POPUP5:case o.POPUP7:case o.POPUP9:return!0}},needs:S,distanceFromEdges:function(e,t){var r=-1,i=-1,s=-1,a=-1,l=e.config;if(l.edge&&!t)return l.edge;var u=20;switch(u=n.needBadge&&S.badge(l)?u+(l.version>1?0:6):0,l.position){case o.SIDEBAR_LEFT:"teaser"==l.type?(r=f(l,"left"),i=f(l,"bottom")):(r=s=i=0,a=-1);break;case o.SIDEBAR_RIGHT:"teaser"==l.type?(a=f(l,"right"),i=f(l,"bottom")):(a=s=i=0,r=-1);break;case o.SLIDEUP2:case o.SLIDEUP:case o.SLIDEDOWN:r=f(l,"left"),a=f(l,"right"),l.relativeWidth&&100!=l.relativeWidth&&("right"==l.attach?r=-1:a=-1);break;case o.HELLO2:case o.HELLO:r=a=0,l.position==o.HELLO?s=0:i=0}switch(l.position){case o.SLIDEUP:"teaser"==l.type?i=f(l,"bottom"):s=f(l,"top");break;case o.SLIDEDOWN:i=f(l,"bottom");break;case o.SLIDEUP2:s=f(l,"top");break;case o.POPUP:case o.POPUP2:case o.POPUP7:case o.POPUP9:"teaser"==l.type?(i=f(l,"bottom"),l.position==o.POPUP7&&(r=f(l,"left")),l.position==o.POPUP9&&(a=f(l,"right"))):(s=l.profile==d?-1:f(l,"top"),r=l.profile==d?-1:f(l,"left"),a=l.profile==d?-1:f(l,"right"),i=l.profile==d?-1:f(l,"bottom"));break;case o.CENTER_LEFT:"teaser"==l.type?l.rotate?i=f(l,"bottom"):r=f(l,"left"):(r=f(l,"left"),l.profile==c&&(s=f(l,"top"),a=f(l,"right")));break;case o.CENTER_RIGHT:"teaser"==l.type?l.rotate?i=f(l,"bottom"):a=f(l,"right"):(a=f(l,"right"),l.profile==c&&(s=f(l,"top"),r=f(l,"left")));break;case o.BOTTOM_LEFT:r=Math.max(u,f(l,"left")),i=f(l,"bottom");break;case o.BOTTOM_RIGHT:a=Math.max(u,f(l,"right")),i=f(l,"bottom");break;case o.EMBEDDED:s=i=r=a=0}return l.edge={top:s,left:r,bottom:i,right:a},l.edge},animationParameters:function(e,r,o,i){var s=e.config.type;let a=t.extend(e.dimensions());var l=t.extend({description:{name:e.config.name,what:s,to:o,from:r,obj:e}},e.config,a);return l.from=v[s](l,r,i,!1),l.to=v[s](l,o,i,!0),l.to&&(l.duration=l.to.duration,l.delay=l.to.delay,l.ease=l.to.ease,~n.debug.indexOf("a")&&(l.duration*=10),l.duration*=1),l},boxParameters:function(e,n){var r=t.extend({},e.config,e.dimensions());return r.to=v[e.config.type](r,n),r.next=n,r}}}),sndefine("cookie",["utils"],function(e){var t=this.document;return{hasItem(n){if(n)return new RegExp("(?:^|;\\s*)"+e.encodeURIComponent(n).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(t.cookie)},keys:()=>t.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/).map(t=>e.decodeURIComponent(t)),getItem(n,r){return n&&function(t,n){return n?t:e.decodeURIComponent(t)}(t.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+(o=n,i=r,i?o:e.encodeURIComponent(o)).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"),r)||null;var o,i},setItem(n,r,o,i,s,a,l){let c="";if(n&&!/^(?:expires|max\-age|path|domain|secure)$/i.test(n)){if(o)switch(o.constructor){case Number:c=o===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+o;break;case String:c="; expires="+o;break;case Date:c="; expires="+o.toUTCString()}return t.cookie=(l?n:e.encodeURIComponent(n))+"="+(l?r:e.encodeURIComponent(r))+c+(s?"; domain="+s:"")+(i?"; path="+i:"")+(a?"; secure":"")+"; SameSite=Lax",!0}},removeItem(n,r,o){return!!this.hasItem(n)&&(t.cookie=e.encodeURIComponent(n)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(o?"; domain="+o:"")+(r?"; path="+r:""),!0)}}}),sndefine("storage-base",["utils","storage-categories"],function(e,t){function n(t){for(let r in t)"object"==typeof t[r]?(n(t[r]),e.empty(t[r])&&delete t[r]):null!=t[r]&&""!==t[r]||delete t[r];return e.empty(t)?void 0:t}return class{constructor(e){this.cache=Object.create(null)}has(e){return e in this.cache}async write(r,o,i){this.cache[o]=e.extend(i),void 0===(i=n(this.cache[o]))?await this.erase(o):t.isAllowed(r)&&await this.writeData(o,i)}async writeData(e){}async read(n){let r=t.storageKeys[this.type][n].default,o=await this.readData(n);return this.cache[n]=e.extend(void 0===o?r:o),this.cache[n]}async readData(e){}async erase(e){let n=t.storageKeys[this.type][e].default;void 0===n?delete this.cache[e]:this.cache[e]=n,await this.eraseData(e)}async eraseData(e){}}}),sndefine("event-emitter",["utils","global","core-sleeknote","constants"],function(e,t,n,r){var o=this,i=o.document;let s=r.CORE.EVENTS,a=r.CORE.COMMANDS;function l(e){let t="sleekNote";return"SleekNote"!=e&&(t=e),t}function c(e){let t=l(e),n=i.createEvent("Event");return n.initEvent(t,!0,!0),n}function u(r,l){return new t.Promise(function(t,u){o.requestAnimationFrame(function(){try{var o=i.createEvent("Event");if(o.initEvent(n.eventName,!0,!0),o.data=function(t,r){switch(t){case s.LOAD:return{type:t,command:r.command,NS:r.NS,coreConfig:n};case s.READY:let o=r,i={},a={};for(let[t,n]of e.entries(o.notes))a[t]={name:t,DOMNode:n.config.DOMNode},i[t]=n.config.DOMNode;return{type:t,campaignId:o.config.campaignId,NS:o.config.NS,boxes:a,DOMNodes:i};default:if(!r)return{command:t,type:t};let l=r.origin&&r.origin.config||r.campaign&&r.campaign.config;return{...r,command:t,type:r.type||t,campaignId:l&&l.campaignId||r.campaignId,NS:r.NS||l&&l.NS}}}(r,l),o.detail=o.data,i.dispatchEvent(o),o.data.result&&o.data.result.then?o.data.result.then(t,u):t(),"visible"==r)["opened","closed"].map(function(t){for(let n of e.values(l[t])){let e=c(n.campaign.config.NS),r=n.campaign.notes[n.noteName];n.noteName&&r&&(e.data={type:"opened"==t?s.ENTRY:s.EXIT,campaignId:n.campaign.config.campaignId,box:{name:n.noteName},origin:r,noteName:n.noteName,noteType:r.config.type,NS:n.campaign.config.NS},n.noteName&&(e.data.box.DOMNode=r.config.DOMNode),i.dispatchEvent(e))}});else if(o.data.NS){let e=c(o.data.NS);r==s.LOAD||r==s.READY||r==a.CLOSE?e.data=o.data:r==a.CLICK?e.data={type:s.CLICK,campaignId:l.campaignId,DOMNode:l.eventTarget,noteName:l.name,noteType:l.type,href:l.href,action:l.step,origin:l.origin}:r==a.SUBMIT&&(e.data={type:s.SUBMIT,campaignId:l.campaignId,data:l.formData,origin:l.origin,noteName:l.name,noteType:l.type}),e.data&&i.dispatchEvent(e)}}catch(e){u()}})})}return e.definePropConst(u,{createUserEventName:l}),u}),sndefine("location",["utils","punycode","css"],function(e,t,n){var r=this,o=r.document.createElement("a");function i(){var e=Array.isArray(arguments[0])?arguments[0]:arguments;this.set.apply(this,e)}function s(t,n){var r,o,i={};if((t=(t=t.replace(/[?#]/,"")).split("&").filter(function(t){return!e.empty(t)}))[0])for(r=0;r<t.length;r++){o=t[r].split("=",2);try{i[o[0]]=o[1]?n?o[1]:e.decodeURIComponent(o[1].replace(/\+/g," ")):void 0}catch(e){e instanceof URIError&&(console.log("Error decoding query, using encoded one"),i[o[0]]=o[1])}}return i}function a(e,t){return o.href=l(e,t),new i(t,o.hostname,o.pathname,o.search,o.hash,o.port).toString()}function l(e,t){return t||(t="http:"),/^\/\//i.test(e)||(t+="//"),/^https?:\/\//i.test(e)||(e=t+e),e}function c(e,t){o.href=e;var n,r=o.pathname.replace(".aspx","").replace(".html","").replace(".htm","").replace(".php",""),s=i.prototype.queryParams.call(o,!0),a=!o.search&&o.hash,l=[];for(n in s)if(s.hasOwnProperty(n)){if(!(n.indexOf("utm_")&&n.toLowerCase().indexOf("sndebug")&&n.toLowerCase().indexOf("snbranch")&&n.toLowerCase().indexOf("snreset")&&n.toLowerCase().indexOf("snsubscribed")))continue;l.push(n+(void 0===s[n]?"":":"+s[n]))}return l=l.join("&"),e=(e=(e=new i(o.protocol,o.hostname,r,a?"":l,a?l:t?"":o.hash,o.port)).toString().replace(/\/$/g,"")).replace(/:\/\/www\./g,"://")}function u(e,t){if(t&&(u.loc=void 0),!u.loc){var n=e.local===String(e.local)?i.fromString(e.local):r.location;u.loc=new i(["protocol","hostname","pathname","search","hash","port"].map(function(t){var o;return"pathname"==t&&"/"==n[t]?r.location[t]:(o=n[t]||r.location[t],"hostname"==t&&(o=o.replace(/^www\./,"")),"search"==t&&e.custom("ignoreHashInUrlPath")&&n.hash.indexOf("?")>-1&&(o=n.hash.slice(n.hash.indexOf("?"))),o)}))}return u.loc}return i.fromString=function(e){return o.href=t.decodePuny(e),new i(o.protocol,o.hostname,o.pathname,o.search,o.hash,o.port)},i.addProtocolIf=l,i.extractDomain=function(n){return"string"!=e.typeStr(n)||e.empty(n)?"":(n=t.decodePuny(n),o.href=c(a(n,r.location.protocol),!0),o.hostname)},i.prototype={domainMatches:function(n){return n=t.decodePuny(n),o.href=c(a(n,this.protocol),!0),function(t,n,r){let o=String(t).split(".").reverse(),i=String(n).split(".").reverse();if(!r||o.length==i.length){for(let[t,n]of e.entries(i))if("*"!=e.decodeURIComponent(n)&&n!=o[t])return;return!0}}(this.hostname,o.hostname,!0)},matches:function(e,n){e=c(a(e=t.decodePuny(e),this.protocol),!n).toUpperCase();var r,o=c(this.toString(),!n).toUpperCase();if(~e.indexOf("*")){var i=e.split("*")[0];return r=c(i).toUpperCase(),"/"==i[i.length-1]&&i.split("/").length>4&&(r+="/"),0===o.indexOf(r)||0===(o+"/").indexOf(r)}return o==e},contains:function(e){return null!=e&&!1!==e&&c(this.toString(),!0).toUpperCase().indexOf(String(e).toUpperCase())>-1},queryParams:function(e){return s(!this.search&&this.hash?this.hash:this.search,e)},toString:function(){return this.href},set:function(e,t,n,r,o,i){e||(e="http:"),o=o?("#"==o.charAt(0)?"":"#")+o:"",r=r?("?"==r.charAt(0)?"":"?")+r:"",i||(i=""),n||(n=""),n&&"/"!=n.charAt(0)&&(n="/"+n),80!=i&&443!=i||(i="");var s=e+"//"+(t=(t||"").split(":")[0])+(i?":"+i:"");return this.hash=o,this.search=r,this.port=i||"",this.origin=s,this.protocol=e,this.href=s+n+r+o,this.hostname=t,this.pathname=n,this.host=t,this}},i.get=u,i.reset=function(e){return u(e,!0)},i.add=async function(t){return Array.from(new r.Uint8Array(await n.A.subtle.digest(e.S,await new n.rob(t,e.U)))).map(e=>e.toString(16).padStart(2,"0")).join("")},i}),sndefine("anchors",["css","utils","constants","custom-elements","core-sleeknote","behaviour","global"],function(e,t,n,r,o,i,s){let a=this.document,l=o.editor?"":t.randomName(),c=Object.create(null);const u=!o.editor;let d=1;function g(n){if(!c[n]){let i=`sleeknote-${l}-${n}`,s=e.inline({direction:"ltr!important",position:o.editor?"absolute!important":"fixed!important",display:"flex!important",width:"100%!important",height:o.editor?"100%!important":"0!important",margin:"0!important",padding:"0!important",overflow:"visible!important",background:"transparent!important",visibility:"hidden!important",left:"0!important",[n]:"0!important"}),d=a.body;o.editor&&(d=d.querySelector("window")),c[n]=r({name:i,style:s,after:function(){return o.editor?t.insertHTML(d,`<${i} class="sleeknote-anchor" style="${s}"></${i}>`):t.insertHTML(d,`<${i} role=presentation class="needsclick"></${i}>`)},shadowDOM:u})}return c[n]}return{get top(){return g("top")},get bottom(){return g("bottom")},get zIndex(){return d},prepareForAnimation:async function(e){let n;if(e.forEach(function(e){if(!t.contains(e.description.what,"cover","badge")&&"close"!=e.description.to){var r=e.description.obj;n=t.getZIndex(r),i.needs.spacer(r.config)&&(r.config.DOMNode.style.zIndex=n)}}),e.length){let e=await g("top"),t=await g("bottom");e.style.zIndex=n,d=t.style.zIndex=n+1}},reorderAnchors:async function(){let e=["COVER","BADGE","TEASER","CALENDAR","FORM","SUCCESS"];for(let n of["top","bottom"]){function r(t){let n=t.tagName.split("-")[1];return"SLEEKNOTE-SCROLL-WRAPPER"==t.tagName&&(n=t.getAttribute("data-type").toUpperCase()),e.indexOf(n)+2}let i=await g(n);if(o.editor||i&&i.shadowRoot){let s=Array.from(o.editor?i.children:i.shadowRoot.children).sort((e,t)=>r(e)-r(t));for(let[a,l]of t.entries(s))l.style.zIndex!=a+1&&(l.style.zIndex=a+1)}}},recoverIfNeeded:async function(){let e=[];for(let t of["top","bottom"]){let n=await c[t];n&&!n.isConnected&&(e.push(...Array.from(o.editor?n.children:n.shadowRoot.children).map(e=>e.dataset.campaign).filter(e=>e)),delete c[t],n=await g(t))}return[...new s.Set(e)]}}}),sndefine("storage-cookie",["utils","cookie","storage-base","core-sleeknote"],function(e,t,n,r){return class extends n{constructor(t){super(t),this.cookiePath=r.custom("cookiePath","/"),this.cookieDomain=void 0,this.cookieSecure=!1,this.days=365,this.noCookieEncoding=!0,this.type="cookie",e.applyOptions.call(this,t)}setCookie(n,r,o,i){return t.setItem(n,r,e.expireDaysToDate(o),this.cookiePath,this.cookieDomain,this.cookieSecure,i)}removeCookie(e){return t.removeItem(e,this.cookiePath,this.cookieDomain)}readCookie(e,n){return t.getItem(e,n)}async writeData(t,n){this.setCookie(t,e.JSON.stringify(n),this.days,this.noCookieEncoding)}async readData(n){let r;try{null!==t.getItem(n)&&(r=e.JSON.parse(t.getItem(n)))}catch(e){}return r}async eraseData(e){this.removeCookie(e)}}}),sndefine("storage-local",["utils","storage-base","global"],function(e,t,n){var r=this;return class extends t{constructor(e){super(e),this.type=e.name||"local",this.name=this.type+"Storage",function(e){try{return r[e].setItem("test","1"),r[e].removeItem("test"),e in r&&null!==r[e]}catch(e){}}(this.name)||(this.dummyStorage=!0)}async readData(t){if(!this.dummyStorage){let n;try{n=e.JSON.parse(r[this.name].getItem(t))}catch(e){}return null===n?void 0:n}}async writeData(t,o){return!!this.dummyStorage||new n.Promise(n=>{r.requestAnimationFrame(()=>{r[this.name].setItem(t,e.JSON.stringify(o)),n()})})}async eraseData(e){this.dummyStorage||r[this.name].removeItem(e)}}}),sndefine("targeting-evaluator",["logger","constants","utils","global","location"],function(e,t,n,r,o){const i=this,{MATCHES:s,CONTAINS:a}=t.TARGETING.TYPES,{SHOW:l,HIDE:c}=t.TARGETING.VISIBILITY,{AND:u}=t.TARGETING.RELATIONS,d=[s,a],g={AND:"every",OR:"some"};function p(e){try{const t=o.addProtocolIf(e,"https:");return new r.URL(t)}catch(e){console.error(e)}}return{[s](e,t,r,o){const s=o||i.location;function a(e){return"/"==e[e.length-1]?e.substring(0,e.length-1):e}function l(e){return"www."==e.substring(0,4)?e.substring(4,e.length):e}return n.keys(e).some(e=>{const t=["hostname","pathname","search","hash"];let n=e.split(/\r?\n/).map(e=>e.trim()).filter(e=>e),r=!1;e:for(let e of n){let n=p(e);if(this.log({msgs:[`       ${e} ...`],styles:["normal"]}),r=t.every(e=>{let t=s[e],r=n[e];if(("search"==e||"hash"==e)&&!r)return!0;if("hostname"==e&&(t=l(t),r=l(r)),"pathname"==e&&(r=a(r),t=a(t),r.includes("*"))){let[n,o]=r.split("*");const i=!n||t.substring(0,n.length).toUpperCase()==n.toUpperCase(),s=!o||t.substring(t.length-o.length,t.length).toUpperCase()==o.toUpperCase();return i&&s?this.log({msgs:[`            "${r}" matches current url ${e}(${t})`],styles:["normal"]}):this.log({msgs:[`            "${r}" doesn't match current url ${e}(${t})`],styles:["normal"]}),i&&s}if(r.includes("*")){let e=r.split("*")[0];r=r.substr(0,e.length),t=t.substr(0,e.length)}return r.toUpperCase()==t.toUpperCase()?(this.log({msgs:[`            "${r}" matches current url ${e}(${t})`],styles:["normal"]}),!0):(this.log({msgs:[`            "${r}" doesn't match current url ${e}(${t})`],styles:["normal"]}),!1)}),r)break e}return r||this.log({msgs:[`            "${e}" doesn't match current url(${s.href})`],styles:["normal"]}),r})},[a](e,t,r,o){const s=o||i.location,a=g[t];return n.keys(e)[a](e=>{let t=e.split(/\r?\n/),n=!1;e:for(let e of t){let t=e.split(",").map(e=>e.trim()).filter(e=>e.length);for(let e of t){this.log({msgs:[`       ${e} ...`],styles:["normal"]});if(n=["hostname","pathname","search","hash"].some(t=>!!s[t].toUpperCase().includes(e.toUpperCase())&&(this.log({msgs:[`            "${e}" found in ${t}`],styles:["normal"]}),!0)),n)break e}}return n||this.log({msgs:[`          "${e}" not found in this URL`],styles:["normal"]}),n})},proccessTree(e,t,r){if(d.includes(e.type)){this.log({msgs:[`   ${e.type.toUpperCase()} ${e.relationOperator==u?"all of":"one of"}:`],styles:["normal"]});const n=this[e.type](e.values,e.relationOperator,t,r);return this.log({msgs:[`   ${e.type.toUpperCase()} with ${e.relationOperator} relation evaluated to: ${n}`],styles:["normal"]}),n}if(!n.empty(e.children)){"Root"!=e.id&&this.log({msgs:[` ${e.visibility==l?"SHOW":"HIDE"} if URL...`],styles:["normal"]});const o=g[e.relationOperator];let i=n.keys(e.children)[o](n=>this.proccessTree(e.children[n],t,r));return i=e.visibility==c?!i:i,"Root"!=e.id&&this.log({msgs:[` group ${e.visibility==l?"SHOW":"HIDE"} evaluated to ${i?"SHOW":"HIDE"}`],styles:["normal"]}),i}},evaluate:function(n,{elog:r,group:o}={}){this.log=r?function(e){r({...e,group:o})}:e.log(t.CORE.LOGLEVELS.CS,t.CORE.FORMATTERS.SNDEBUG);var i=(n.CampaignId+"").split("-")[0];return!!n.targeting.targetAll||this.proccessTree(n.targeting.root,i)},editorEvaluate:function(n,r){this.log=e.log(t.CORE.LOGLEVELS.EDITORTARGETING);const o=p(n),i=this.proccessTree(r.root,"",o);return this.log({msgs:["TARGETING EVALUATED TO "+(i?"SHOW":"HIDE")]}),i}}}),sndefine("storage-cookie-session",["utils","storage-cookie"],function(e,t){var n="SNS";return class extends t{constructor(){super(),this.set=!!this.readCookie(n,!0),this.set||this.setCookie(n,1,"",!0)}unset(){this.set=!1,this.removeCookie(n)}}}),sndefine("storage-instance",["utils","storage-cookie-session","constants","core-sleeknote","location","storage-cookie","storage-local","storage-categories","consent","event-emitter","global"],function(e,t,n,r,o,i,s,a,l,c,u){var d=this.document;let g={};function p(e){var t=String(e);return Number.isInteger(Number(e))?t.slice(-4):t.substring(0,4)}let m=new class{constructor(){this.providers={session:new s({name:"session"}),local:new s({name:"local"}),cookie:new i},d.addEventListener(r.eventName,this)}handleEvent(t){let o=n.CORE.COMMANDS,{command:i,campaignId:s,origin:a,name:l}=t.data,{campaign:c}=a||{};if(!c||!c.config.parent)if(i==o.OPEN){if(c.first("form")==l){if(this.incrementShowCount(s),c.config.position==n.POS.EMBEDDED||c.config.managed)return;this.closeSession(s),n.PROFILE.MOBILE!=c.config.profile||e.contains(c.config.position,n.POS.HELLO,n.POS.HELLO2)||this.hideSession(s)}}else if(i==o.CLOSE){if(!c||c.config.position==n.POS.EMBEDDED||c.config.managed)return;let t=a.config.type;e.contains(t,"teaser","form")&&this.hideSession(s)}else if(i==o.SUBMIT){let e,t,o=!0;switch(c.config.type){case"social":break;case"newsletter":e=!0,t=!0;break;case"contact":case"blank":case"promote":case"guide":t=!0}if(o&&this.setShowCount(s,999999),t&&this.setEngaged(s),c.config.position==n.POS.EMBEDDED&&!r.custom("embeddedSetSubscription"))return;if(c.config.managed)return;if(e&&this.setSubscription(),c.config.position==n.POS.EMBEDDED)return;this.hideSession(s)}}async postCreate(){await a.overAllKeys(this.providers,"read");let i=a.props._sn_n,s=this.providers.cookie,u=this;function g(e,t){l.initialize(e,function(e,n){let r=s.cache[i];return n?r[t]:r},function(e,n,r){let o=r(n);e?delete o[t]:(o[t]=e,u.erase(n)),s.write("consent",i,o)})}g.bind(this,"analytics","ca").call(),g.bind(this,"marketing","cm").call(),g.bind(this,"siteData","csd").call(),this.resetMemData();let p=new t,m=this.isNotNewVisitor();p.set||(await this.resetSessionData(),this.setNewVisitor(m)),this.isNotNewVisitor()&&this.setNewVisitor(!1),this.newVisitor=this.getNewVisitor();let f=e.cleanUpReferral(d.referrer);!this.getReferral()&&f.indexOf(o.get(r).host)<0&&this.setReferral(f),r.isSubscribedFromQuery&&this.setSubscription(),c(n.CORE.EVENTS.STORAGE,{ready:"ready"}),this.postCreate=()=>{}}async clear(){await a.overAllKeys(this.providers,"erase"),await this.postCreate()}read(t){let{type:n,key:r}=a.getStorage(t),o={};return n&&r&&(o=this.providers[n].cache[r]),"object"!=e.typeStr(o)||"cs"in o||(o.cs={}),o}async write(e,t){let{type:n,key:r}=a.getStorage(e);if(n&&r){let o=t;return this.providers[n].write(e,r,o)}}async erase(e){for(let{type:t,key:n}of a.getStorageForErase(e).values())return"cookie"!==t&&n!=a.props.timestamp?this.write(e,void 0):this.providers[t].erase(n)}readByCampaignId(e,t){let n=this.read(e);return n.cs||(n.cs={}),n.cs[p(t)]||{}}async writeByCampaignId(t,n,r){let o=this.read(t);return o.cs||(o.cs={}),e.empty(r)?delete o.cs[p(n)]:o.cs[p(n)]=r,this.write(t,o)}preserveIfNotExpired(e){return e&&e.length>=1?Date.now()<e[0]?e:void 0:e}async resetSessionData(){this.deleteReferral(),this.deleteGoal(),this.deleteGeoInfo(),this.deleteSessionShowCount(),this.resetMemData(),await this.resetCampaignSessionData()}resetMemData(){this.pageVisited={}}async resetCampaignSessionData(){await a.overAllKeys(this.providers,"read",async function(t,n,r){if(t&&t.cs)for(let[n,r]of e.entries(t.cs))t.cs[n]={i:this.preserveIfNotExpired(r.i),pv:r.pv}},this)}async forceResetSession(e){var t,n,r;"full"!=e&&(t=this.getGeoInfo(),r=this.getIPAddress(),n=this.getPagesVisitedCount()),a.overAllKeys(this.providers,"erase"),this.setNewVisitor(this.isNotNewVisitor()),this.newVisitor=this.getNewVisitor(),t&&this.setGeoInfo(t),n&&this.setPagesVisitedCount(n),r&&this.setIPAddress(r),this.startSessionTime()}async closeSession(e){var t=this.readByCampaignId("campaignClosed",e);return t.c=1,this.writeByCampaignId("campaignClosed",e,t)}async openSession(e){var t=this.readByCampaignId("campaignClosed",e);return delete t.c,this.writeByCampaignId("campaignClosed",e,t)}isSessionClosed(e){return!!(this.readByCampaignId("campaignClosed",e)||{}).c}async hideSession(e){var t=this.readByCampaignId("campaignHidden",e);return t.h=1,this.writeByCampaignId("campaignHidden",e,t)}async unHideSession(e){var t=this.readByCampaignId("campaignHidden",e);return delete t.h,this.writeByCampaignId("campaignHidden",e,t)}isSessionHidden(e){return!!this.readByCampaignId("campaignHidden",e).h}migrateEngaged(e){var t=this.readByCampaignId("campaignEngaged",e);return t.e=1,this.writeByCampaignId("campaignEngaged",e,t)}setEngaged(e){var t=this.readByCampaignId("campaignEngaged",e);t.e=1,this.writeByCampaignId("campaignEngaged",e,t),this.recordGoalEngaged(e)}setUnEngaged(e){let t=this.readByCampaignId("campaignEngaged",e);delete t.e,this.writeByCampaignId("campaignEngaged",e,t),t=this.read("goalEngaged"),t.g&&t.g.e&&(delete t.g.e[e],this.write("goalEngaged",t))}isEngaged(e){return!!this.readByCampaignId("campaignEngaged",e).e}convertSessionEvent(e){var t=this.readByCampaignId("sessionConverted",e);return t.z=1,this.writeByCampaignId("sessionConverted",e,t)}hasConvertSessionEvent(e){return!!this.readByCampaignId("sessionConverted",e).z}setUTMInclude(e,t){var n=this.readByCampaignId("UTMInclude",e);return n.u=t,this.writeByCampaignId("UTMInclude",e,n)}getUTMInclude(e){return this.readByCampaignId("UTMInclude",e).u}setQueryInclude(e,t){var n=this.readByCampaignId("queryIncluded",e);return n.q=t,this.writeByCampaignId("queryIncluded",e,n)}getQueryInclude(e){return this.readByCampaignId("queryIncluded",e).q}getSequence(t){var n,r=this.readByCampaignId("sequence",t);return n=r.s,Array.isArray(n)&&n.forEach(function(t,n,r){r[n]=e.decodeURIComponent(t)}),n||[]}setSequence(t,n){var r,o=this.readByCampaignId("sequence",t);return e.empty(n)?delete o.s:o.s=(r=n,Array.isArray(r)&&r.forEach(function(t,n,r){r[n]=e.encodeURIComponent(t)}),r),this.writeByCampaignId("sequence",t,o)}getPagesVisitedCountPerSession(e){return this.readByCampaignId("pageVisitedSession",e).pvs}setPagesVisitedCountPerSession(t,n){var r=this.readByCampaignId("pageVisitedSession",t);return e.empty(n)?delete r.pvs:r.pvs=n,this.writeByCampaignId("pageVisitedSession",t,r)}getPagesVisitedCount(e){return(this.readByCampaignId("pagesVistedTotal",e)||{}).pv}setPagesVisitedCount(t,n){var r=this.readByCampaignId("pagesVistedTotal",t);return e.empty(n)?delete r.pv:r.pv=n,this.writeByCampaignId("pagesVistedTotal",t,r)}getPagesVisitedCountSetted(e){return this.pageVisited[e]&&this.pageVisited[e].spv}setPagesVisitedCountSetted(e,t){this.pageVisited[e]={spv:t}}getPagesVisitedCountPerSessionSetted(e){return this.pageVisited[e]&&this.pageVisited[e].spvs}setPagesVisitedCountPerSessionSetted(e,t){this.pageVisited[e]={spvs:t}}setSubscription(){return this.providers.cookie.write("sns","SNSubscribed",!0)}eraseSubscription(){return this.providers.cookie.write("sns","SNSubscribed",!1)}isSubscribed(){return this.providers.cookie.read("SNSubscribed",!1)}migrateShowCount(e,t,n){var r=this.readByCampaignId("showCount",e);r.i=[n,t],this.writeByCampaignId("showCount",e,r)}setShowCount(t,n,r){r=+r||365;var o=this.readByCampaignId("showCount",t);return o.i=[e.expireDaysToDate(r).getTime(),n],this.writeByCampaignId("showCount",t,o)}getShowCount(e){var t=this.readByCampaignId("showCount",e);return t.i=t.i||[],t.i[1]||0}incrementShowCount(e){this.setShowCount(e,this.getShowCount(e)+1),this.incrementSessionShowCount(),this.recordGoalShown(e)}eraseShowCount(e){var t=this.readByCampaignId("showCount",e);return delete t.i,this.writeByCampaignId("showCount",e,t)}cleanShowCount(e){this.getShowCount(e)<1&&this.eraseShowCount(e)}deleteSessionShowCount(){var e=this.read("sessionShowCount");return delete e.ssc,this.write("sessionShowCount",e)}setSessionShowCount(e){var t=this.read("sessionShowCount");return t.ssc=e,this.write("sessionShowCount",t)}getSessionShowCount(){return+this.read("sessionShowCount").ssc||0}incrementSessionShowCount(){return this.setSessionShowCount(this.getSessionShowCount()+1)}deleteReferral(e){var t=this.read("referrer");if(t.r)return delete t.r.r,this.write("referrer",t)}setReferral(e){var t=this.read("referrer");return t.r=t.r||{},t.r.r=e,this.write("referrer",t)}getReferral(){var e=this.read("referrer");return e.r=e.r||{},e.r.r||""}isNotNewVisitor(){return void 0===this.getNewVisitor()}setNewVisitor(e){var t=this.read("newVisitor");return t.r=t.r||{},t.r.n=+e,this.write("newVisitor",t)}getNewVisitor(){var e=this.read("newVisitor");return e.r=e.r||{},e.r.n}setVistorIdIf(e){var t=this.read("visitorId");if(t)return t.v=t.v?t.v:e,this.write("visitorId",t),t.v}getVistorId(){var t=this.read("visitorId");return t.v||(t.v=e.guid_string(),this.write("visitorId",t)),t.v}hasVisitorId(){return!e.empty(this.read("visitorId").v)}deleteGeoInfo(e){var t=this.read("geoLocation");return delete t.gi,this.write("geoLocation",t)}async setGeoInfo(e){var t=this.read("geoLocation");return t.gi=e,this.write("geoLocation",t)}getGeoInfo(){return this.read("geoLocation").gi}async getCouponCodeAvailablity(e,t){if(g[e])return g[e];try{return g[e]=u.fetch(`https://coupons.sleeknote.com/api/v1/code/exist/${t}`,{method:"GET"}),g[e]}catch(e){return console.log(e),u.Promise.reject(e)}}async fetchGeoInfo(){let t=this.getGeoInfo();if(e.empty(t)){if(t=await u.fetch("https://geolocation.sleeknote.com").then(e=>e.text()).then(e=>{let t=JSON.parse(e);if(t.countryCode)return{lt:t.latitude,lg:t.longitude,latitude:t.latitude,longitude:t.longitude,country:t.countryName,countryCode:t.countryCode,regionCode:t.regionCode,regionName:t.regionName}}).catch(e=>{console.log(e)}),e.empty(t))return!1;await this.setGeoInfo(t)}return t}setIPAddress(e){var t=this.read("IPAddress");return t.ip=e,this.write("IPAddress",t),t.ip}getIPAddress(){return this.read("IPAddress").ip}deleteGoal(){var e=this.read("goalShown");return delete e.g,this.write("goalShown",e)}migrateGoalShown(e,t){var n=this.read("goalShown");return n.g=n.g?n.g:{},n.g.sc=n.g.sc?n.g.sc:{},n.g.sc[e]=t,this.write("goalShown",n)}recordGoalShown(e){var t=this.read("goalShown");return t.g=t.g?t.g:{},t.g.sc=t.g.sc?t.g.sc:{},t.g.sc[e]=(t.g.sc[e]?t.g.sc[e]:0)+1,this.write("goalShown",t),t.g.sc[e]}getGoalShownList(){var e=this.read("goalShown");return e.g=e.g?e.g:{},e.g.sc||{}}recordGoalEngaged(e){var t=this.read("goalEngaged");return t.g=t.g?t.g:{},t.g.e=t.g.e?t.g.e:{},t.g.e[e]=1,this.write("goalEngaged",t),t.g.e[e]}getGoalEngageList(){var e=this.read("goalEngaged");return e.g=e.g?e.g:{},e.g.e||{}}resetGoal(){var e=this.read("goalEngaged");return delete e.g,this.write("goalEngaged",e)}migrateStartSessionTime(e){var t=this.read("userSessionStart");t.a=t.a||{},t.a.s=e,this.write("userSessionStart",t)}startSessionTime(){var e=this.read("userSessionStart");e.a=e.a||{},e.a.s=(new Date).getTime(),this.write("userSessionStart",e),this.resetSessionId()}getSessionStartTime(){var e=this.read("userSessionStart");return e.a=e.a||{},e.a.s||(e.a.s=(new Date).getTime(),this.write("userSessionStart",e)),new Date(e.a.s)}migrateEndSessionTime(e){var t=this.read("userSessionEnd");return t.a=t.a||{},t.a.e=e,this.write("userSessionEnd",t)}endSessionTime(){var e=this.read("userSessionEnd");e.a=e.a||{},e.a.e=(new Date).getTime(),this.write("userSessionEnd",e),this.deleteSessionId()}getLastSessionEndTime(){var e=this.read("userSessionEnd");return e.a=e.a||{},e.a.e?new Date(e.a.e):""}migrateSessionId(e){var t=this.read("sessionId");t.a=t.a||{},t.a.i=e,this.write("sessionId",t)}deleteSessionId(){var e=this.read("sessionId");return e.a=e.a||{},delete e.a.i,this.write("sessionId",e)}resetSessionId(){var t=this.read("sessionId");return t.a=t.a||{},t.a.i=e.guid_string(),this.write("sessionId",t),t.a.i}getSessionId(){var t=this.read("sessionId");return t.a=t.a||{},t.a.i||(t.a.i=e.guid_string(),this.write("sessionId",t)),t.a.i}setInTest(e,t){var n=this.readByCampaignId("inSplitTest",e);n.t=n.t||{},n.t.i=t,this.writeByCampaignId("inSplitTest",e,n)}getInTest(e){var t=this.readByCampaignId("inSplitTest",e);return t.t=t.t||{},t.t.i||null}setChosenCohort(e,t){var n=this.readByCampaignId("splitTestCohort",e);return n.t=n.t||{},n.t.c=t,this.writeByCampaignId("splitTestCohort",e,n)}getChosenCohort(e){var t=this.readByCampaignId("splitTestCohort",e);return t.t=t.t||{},t.t.c||null}setMergeId(e,t){var n=this.read("mergeId")||{};return n.mergeId=n.mergeId||{},n.mergeId[e]=t,this.write("mergeId",n)}getMergeId(e){var t=this.read("mergeId")||{};return t.mergeId=t.mergeId||{},t.mergeId[e]||-1}setOOS(e,t){var n=this.read("oos")||{};return t?(n.oos=n.oos||{},n.oos[e]=1):n.oos&&delete n.oos[e],this.write("oos",n)}getOOS(e){var t=this.read("oos")||{};return t.oos&&t.oos[e]}brandNewDay(e){this.eraseShowCount(e),this.unHideSession(e),this.openSession(e),this.setUnEngaged(e),this.eraseSubscription()}report(t){let n="getNewVisitor,getSessionShowCount,getReferral,getGoalShownList,getGoalEngageList,getSessionStartTime,getLastSessionEndTime,getSessionId,isSubscribed".split(",").map(n=>{let r=this[n]();if(!e.empty(r)||t)return[n,r]}).filter(e=>e);return Object.fromEntries(n)}reportCampaign(t,n){let r="getUTMInclude,getQueryInclude,getSequence,getPagesVisitedCountPerSession,getPagesVisitedCount,getPagesVisitedCountSetted,getPagesVisitedCountPerSessionSetted,getShowCount,getInTest,getChosenCohort,getMergeId,hasConvertSessionEvent,isEngaged,isSessionHidden,isSessionClosed".split(",").map(r=>{let o=this[r](t);if((!e.empty(o)||n)&&-1!==o)return[r,o]}).filter(e=>e);return Object.fromEntries(r)}};return r.expose(m,"storage"),m}),sndefine("site-data",["utils","storage-instance","event-emitter","constants","core-sleeknote","global","logger"],function(e,t,n,r,o,i,s){let a=this;const l=s.log(r.CORE.LOGLEVELS.CS,r.CORE.FORMATTERS.SNDEBUG);let c=new i.Map,u=o.custom("splitSiteData",!1);const d="SleekNote";function g(e){return e==d?"sleeknote":e}function p(e){let t="sleeknoteSiteData";return e!=d&&(t=e+".sitedata"),t}function m(){return t.read("siteData")||{}}function f(e){let t=m();return u?(t[e]||(t[e]={}),t[e]):t}function h(o,i,s){let a=f(i),c={};for(let[t,n]of e.entries(o))a[t]!=n&&(a[t]=n,c[t]=n);if(e.keys(c).length){l({msgs:["Data pushed to sitedata"],styles:["normal-bold"]}),l({msgs:[c],styles:["normal"],type:"dir"});let e=m();u&&(e[i]=a),t.write("siteData",e),s||n(r.CORE.EVENTS.SITEDATA,{NS:i,sessionData:a})}return c}function y(e,t,n){return"answer"==t?{question:n.attrs.question,answer:e}:e}const E=i.Symbol("NS");function S(e,t){return e[t]||(e[t]={id:t,formFields:{}})}function v(e){let t=g(e),n=function(e){let t=p(e);return a[t]||(a[t]={}),a[t]}(e);return n[t]||(n[t]={})}function I(t,n,r){if(r){let o=v(t),i=S(o,n);e.extend(i,r)}}function C(e){let t=g(e.NS),n=p(e.NS);return(a[n]&&a[n][t]||{})[e.campaignId]}function T(){return f("SleekNote")}return a.document.addEventListener(o.eventName,function(t){if(t.data.command==r.CORE.COMMANDS.SUBMIT){let{formData:n,formElements:r,NS:o}=t.data,i=n.SleeknoteId;if(!r)return;let s={};for(let[t,o]of e.entries(r))t in n&&(s[t]=y(n[t],t,o));let a=S(v(o),i);e.extend(a.formFields,s),I(o,i,a)}}),{initialize:function(e){let{namespaces:t}=o;try{!t&&e&&(t=e)}catch(e){}for(let e of t){if(c.has(e))continue;let t=p(e),n=g(e);if(Array.isArray(a[t]))for(let n of a[t])h(n,e,!0);class r extends i.Object{constructor(e){super(),i.Object.defineProperty(this,E,{value:e}),i.Object.defineProperty(this,n,{writable:!0,value:{}})}push(e){h(e,this[E])}pushNoEvent(e){h(e,this[E],!0)}}a[t]=i.Object.seal(new r(e)),c.set(e,a[t])}},getSession:f,getSitedataObject:function(e){if(e){let t=p(e);return a[t]}},saveToSitedataOwnData:I,readFromSitedataOwnData:function(e,t){let n=v(e);return S(n,t)},getSubmitted:C,add:function(e){if("object"==typeof e&&e){let t=p("SleekNote");a[t]||(a[t]=[]),a[t].push(e)}return T()},get:T,getOwn:function(e){return C(e.config)}}}),sndefine("evaluator",["utils","location","core-sleeknote","site-data","constants","cookie","storage-instance","logger","targeting-evaluator","global"],function(e,t,n,r,o,i,s,a,l,c){var u=this;const d=["normal-bold"],g=["normal","normal-bold"],p=["normal-bold","normal"],m=["normal","normal-bold","normal"],f=["success"],h=["error"],y=["group"];async function E(e,t,n,r,{elog:o,group:i}){var s=(n||[]).length,a=!1;if(!s)return!0;function l(e){o({msgs:[e],styles:d,group:i})}for(o({msgs:["include"==t?"Show":"Hide"," campaign if value is one of:"],styles:p,group:i});s--;)if(o({msgs:[" - ",JSON.stringify(n[s])],styles:["normal","italic"],group:i}),a=await e(t,n[s],r,{elog:o,group:i}),"include"==t){if(a)return l("   Value matched"),!0;l("   Value didn't match")}else{if(!a)return l("   Value matched"),!1;l("   Value didn't match")}return a}function S(e){return async function(t,n,r,o,{elog:i,group:s}){let a=e.name,l=s;i({msgs:[`- ${a}`],type:"groupCollapsed",styles:y,parent:l,group:s=l+"-"+a});var c=await E(e,"exclude",r.exclude,o,{elog:i,group:s});return c?c=await E(e,"include",r.include,o,{elog:i,group:s}):t||"exclude",i({type:"groupEnd",group:s}),i(c?{msgs:[`  ${a} passed`],styles:f,group:l}:{msgs:[`  ${a} didn't pass`],styles:h,group:l}),c}}function v(e,r,o){return P(e,t.get(n).matches(r))}function I(e,r,o){return P(e,t.get(n).contains(r))}async function C(e,t,n){let r=await s.fetchGeoInfo(t.addressComponents);let o;if((t=t||{}).sw)i=t.sw,a=t.ne,l={lat:+r.latitude,lng:+r.longitude},c=a.lng<i.lng?l.lng>=i.lng||l.lng<=a.lng:l.lng>=i.lng&&l.lng<=a.lng,o=l.lat>=i.lat&&l.lat<=a.lat&&c;else if(t.type&&"country"==t.type.toLowerCase())o=r.countryCode.toLowerCase()==t.addr.toLowerCase();else{o=[r.regionName.toLowerCase()+","+r.countryCode.toLowerCase(),r.regionCode.toLowerCase()+","+r.countryCode.toLowerCase()].indexOf((t.addr||"").toLowerCase())>-1}var i,a,l,c;return P(e,o)}async function T(t,n,r){let o=s.getIPAddress();if(e.empty(o)){if(o=await c.fetch("https://us-central1-mimir-181311.cloudfunctions.net/get_ip").then(e=>e.text()).then(e=>JSON.parse(e).userIP).catch(()=>{}),e.empty(o))return!1;await s.setIPAddress(o)}function i(e){var t=e.trim().split("."),n=(t[0]?t[0]*Math.pow(256,3):0)+(t[1]?t[1]*Math.pow(256,2):0)+(t[2]?t[2]*Math.pow(256,1):0)+t[3];if(n<0)throw new Error(e+" is not a legal host ipaddr");return n}var a,l,u,d,g,p=(n=n||{}).split("-");return a=p[0],l=p[1]||a,P(t,(u=a,d=l,(g=i(o))>=i(u)&&g<=i(d)))}async function b(t,n,r){let o=await u.arequire("float-match");var i;await e.DOMContentLoaded();var s=n.target,a=!e.contains(n.target.charAt(0),"#",".");n.targetType?("class"==n.targetType&&a&&(s="."+s),"id"==n.targetType&&a&&(s="#"+s)):a&&(s="#"+s);var l=/^#\d/.test(s)?e.gid(s.slice(1)):e.qs(s);e.empty(l)?(i=P(t,"notExists"==n.matchType),n.matchType):i=P(t,o(e.parseNodeValue(l),n.matchType,n.value));return i}function O(t){var n,r=[];for(Array.isArray(t)||(t=e.JSON.parse(t)),n=t.length;n--;){let e="matchType"in t[n]?t[n]:t[n].value;r.unshift(e)}return r}function w(t){var n={};return"string"==e.typeStr(t)&&(t=e.JSON.parse(t)),t.include&&(n.include=O(t.include)),t.exclude&&(n.exclude=O(t.exclude)),n}function A(t){return"string"==e.typeStr(t)&&(t=e.JSON.parse(t)),t}function P(e,t){return"exclude"==e?!t:t}return{includeNote:async function(t,r=[],o){let i=function(e){o({...e,group:t.CampaignId})};const s=async()=>{let s=t.rules&&t.rules.groups||[];let a=!1,l=!0;if(s.some(t=>!e.empty(t.conditions))){const e="conditions-"+t.CampaignId;o({msgs:["Conditions"],styles:y,type:"groupCollapsed",parent:t.CampaignId,group:e});for(let i=0;i<s.length;i++){try{a=await this.evaluateGroup(s[i].conditions,s[i].conditionAnd,t,r,{elog:o,group:e})}catch(e){if(n.local)throw new Error(e);console.error(e)}l=s[i].groupAnd?l&&a:l||a}o({type:"groupEnd",group:e}),i(l?{msgs:["Conditions passed"],styles:f}:{msgs:["Conditions didn't pass"],styles:h})}else i({msgs:["Campaign has ","no conditions"],styles:g});return l};if(!t.targeting||t.targeting.doNotUse)return await s();{const e="targeting-"+t.CampaignId;o({msgs:["Targeting"],styles:y,type:"groupCollapsed",parent:t.CampaignId,group:e});try{const n=await l.evaluate(t,{elog:o,group:e});i({type:"groupEnd",group:"targeting"}),i(n?{msgs:["Targeting passed"],styles:f}:{msgs:["Targeting didn't passed"],styles:h});let r=await s();return n&&r}catch(e){if(n.local)throw new Error(e);console.error(e)}}},evaluateArraySome:E,evaluateGroup:async function(t,n,r,o,{elog:i,group:s}){var a,l,c,u,d=0,g=n;if(!t||!t.length)return!0;for(i({msgs:["Group ",n?"AND":"OR"," has ",t.length," conditions:"],styles:["normal","normal-bold","normal","normal-bold","normal"],group:s});d<t.length;d++){a=t[d];var p=this.evaluatorFunctions[a.type].formatValue,m=this.evaluatorFunctions[a.type].evaluate;"object"==e.typeStr(a)&&(u=p?p(a.value):a.value,c=a.matchType,l=!(!o||!~o.indexOf(a.type))||await m(n,c,u,r,{elog:i,group:s}),g=n?g&&l:g||l)}return g},evaluatorFunctions:{1:{evaluate:function(e,t,n,r,{elog:o,group:i}){function a(e){function t(e){return"/"==e[e.length-1]?e.substring(0,e.length-1):e}function n(e){return"www."==e.substring(0,4)?e.substring(4,e.length):e}const r=u.location,o=function(e){try{const t=e.includes("http")?e:`https://${e}`;return new c.URL(t)}catch(e){console.error(e)}}(e);return["hostname","pathname","search","hash"].every(e=>{let i=r[e],s=o[e];if(("search"==e||"hash"==e)&&!s)return!0;if("hostname"==e&&(i=n(i),s=n(s)),"pathname"==e&&(s=t(s),i=t(i),s.includes("*"))){let[e,n]=s.split("*");e=t(e);const r=!e||t(i.substring(0,e.length)).toUpperCase()==e.toUpperCase(),o=!n||i.substring(i.length-n.length,i.length).toUpperCase()==n.toUpperCase();return r&&o}return s.toUpperCase()==i.toUpperCase()})}let l=i;i=l+"-sequence";var p=s.getSequence(r.CampaignId);o({msgs:["- Sequence"],type:"groupCollapsed",styles:y,parent:l,group:i}),o({msgs:["Show campaign if sequence",` ${"include"==t?"matches":"doesn't match"} `,n],styles:["normal","normal-bold","italic"],group:i}),p.length<n.length&&(a(n[p.length])?p.push(1):p.length-1>=0&&a(n[p.length-1])||(p.length=0));let m;o({msgs:["Pages visited from sequence: ",p.length],styles:g,group:i}),s.setSequence(r.CampaignId,p),p.length==n.length?(o({msgs:["Sequence matched"],styles:d,group:i}),m=P(t,!0)):(o({msgs:["Sequence didn't match"],styles:d,group:i}),"exclude"==t&&(m=!0));o({type:"groupEnd",group:i}),o(m?{msgs:["  Sequence passed"],styles:f,group:l}:{msgs:["  Sequence didn't pass"],styles:h,group:l});return m},formatValue:O},2:{evaluate:async function(e,r,o,i,{elog:a,group:l}){let c=l;l=c+"-subscriber";let u=await s.isSubscribed();a({msgs:["- Newsletter Subscriber"],type:"groupCollapsed",styles:y,parent:c,group:l}),a({msgs:["Show campaign if user ",("include"==r?"is":"is not")+" ","subscribed to the newsletter"],styles:["normal","normal-bold","normal"],group:l}),u||(u=n.isSubscribedFromQuery||o.extraParam&&~String(t.get(n)).indexOf(o.extraParam),u&&s.setSubscription());!u&&o.extraParam&&(u=~String(t.get(n)).indexOf(o.extraParam));u=o.value?u&&o.value:u&&o;a(u?{msgs:["User ","is"," subscribed already"],styles:m,group:l}:{msgs:["User ","is not"," subscribed yet"],styles:m,group:l});var d=P(r,u);a({type:"groupEnd",group:l}),a(d?{msgs:["  Newsletter Subscriber passed"],styles:f,group:c}:{msgs:["  Newsletter Subscriber didn't pass"],styles:h,group:c});return d},formatValue:function(t){"boolean"!=e.typeStr(t)&&(t=e.JSON.parse(t));return t}},3:{evaluate:function(e,t,n,r,{elog:o,group:i}){let a=i;o({msgs:["- New Visitor"],type:"groupCollapsed",styles:y,parent:a,group:i=a+"-new-visitor"}),o({msgs:["Show campaign if user ",("include"==t?"is":"is not")+" ","a new visitor"],styles:["normal","normal-bold","normal"],group:i});const l=s.newVisitor;o(l?{msgs:["User ","is"," a new visitor"],styles:m,group:i}:{msgs:["User ","is not"," a new visitor"],styles:m,group:i});var c=P(t,l);o({type:"groupEnd",group:i}),o(c?{msgs:["  New Visitor passed"],styles:f,group:a}:{msgs:["  New Visitor didn't pass"],styles:h,group:a});return c}},4:{evaluate:S(v),formatValue:w},5:{evaluate:function(r,o,i,a,{elog:l,group:u}){let d=u;l({msgs:["- Specific Query"],type:"groupCollapsed",styles:y,parent:d,group:u=d+"-query"});var p=s.getQueryInclude(a.CampaignId);const m=t.get(n).queryParams();if(l({msgs:["Current queries are: ",c.replaceAll?JSON.stringify(m).replaceAll(":","="):JSON.stringify(m)],styles:g,group:u}),e.empty(m)&&p){const e=p>0;return l(e?{msgs:["This condition was already evaluated to pass in this session"],styles:f,group:u}:{msgs:["This condition was already evaluated to not pass in this session"],styles:h,group:u}),e}{const c=function(r,o,i,a){function c(r,o,i,s){e.empty(i)||l({msgs:["include"==o?"Show":"Hide"," campaign if we have this queries: ",`${i.map(e=>`${e[0].key}=${e[0].value}`).join(", ")}`],styles:["normal-bold","normal","normal-bold"],group:u});var a=t.get(n).queryParams(),c=0;if(i.length){if(i.forEach(function(e){var t=e[0].key,n=e[0].value;t in a&&a[t]==n&&c++}),c==i.length)return l({msgs:["Queries ","found"],styles:g,group:u}),c="include"==o?1:-1;c=0,l({msgs:["Queries ","not found"],styles:g,group:u})}return c}var d,p,m=s.getQueryInclude(a.CampaignId);if(d=c(0,"exclude",i.exclude||[]))return r||(o="exclude"),s.setQueryInclude(a.CampaignId,d),{result:!1,matchType:o};if(p=c(0,"include",i.include||[]))return s.setQueryInclude(a.CampaignId,p),{result:!0,matchType:o};if(!d&&!p){const e=m?m>0:!(i.include||[]).length;return l(e?{msgs:["This condition was already evaluated to pass in this session, ignoring condition result"],styles:f,group:u}:{msgs:["This condition was already evaluated to not pass in this session, ignoring condition result"],styles:h,group:u}),{result:e,matchType:o}}}(r,o,i,a);return o=c.matchType,l({type:"groupEnd",group:u}),c.result?l({msgs:["  Specific Query passed"],styles:f,group:d}):l({msgs:["  Specific Query didn't pass"],styles:h,group:d}),c.result}},formatValue:w},6:{evaluate:function(t,n,r,o,{elog:i,group:a}){let l=a;i({msgs:["- Specific Referral"],type:"groupCollapsed",styles:y,parent:l,group:a=l+"-referral"}),i({msgs:["Show campaign if referral ",""+("include"==n?"is":"is not")," one of ",r],styles:["normal","normal-bold","normal","italic"],group:a});var c=s.getReferral();i({msgs:["Current referral is ",c||"none"],styles:g,group:a});var u=c&&r.some(function(t){return t.split(",").some(function(t){return e.cleanUpReferral(t).toLowerCase()==c.toLowerCase()})});i(u?{msgs:["Referral matched"],styles:d,group:a}:{msgs:["Referral didn't match"],styles:d,group:a});var p=P(n,u);i({type:"groupEnd",group:a}),i(p?{msgs:["  Specific Referral passed"],styles:f,group:l}:{msgs:["  Specific Referral didn't pass"],styles:h,group:l});return p},formatValue:O},7:{evaluate:function(e,r,o,i,{elog:a,group:l}){let u=l;function p(e,t,n){var r,o,i,s=e.split(",");for(r=0;r<t.length;r++)for(i=t[r].matchType,o=0;o<s.length;o++)if("exactMatch"==i){if(t[r].value==s[o])return!0}else if("contains"==i&&~s[o].indexOf(t[r].value))return!0}a({msgs:["- UTM Campaign"],type:"groupCollapsed",styles:y,parent:u,group:l=u+"-utm"});let m="";Object.keys(o).forEach(e=>{m+=`\n - ${e}: `,o[e].forEach((t,n)=>{m+=`${"exactMatch"==t.matchType?"matches":"contains"} ${t.value}`,n!=o[e].length-1&&(m+=" or ")})}),a({msgs:[""+("include"==r?"Show":"Hide")," campaign if UTM queries: ",m],styles:["normal-bold","normal","italic"],group:l});var E=t.get(n).queryParams();a({msgs:["Current queries are ",c.replaceAll?JSON.stringify(E).replaceAll(":","="):JSON.stringify(E)],styles:g,group:l});var S=s.getUTMInclude(i.CampaignId);if(S){const e=S>0;return a(e?{msgs:["This condition was already evaluated to pass in this session"],styles:f,group:l}:{msgs:["This condition was already evaluated to not pass in this session"],styles:h,group:l}),a({type:"groupEnd",group:l}),a(e?{msgs:["  UTM Campaign passed"],styles:f,group:l}:{msgs:["  UTM Campaign didn't pass"],styles:h,group:l}),e}var v=function(e,t){var n,r,o;for(n in t)if(t.hasOwnProperty(n)){for(o in r=!0,e)if(n.toLowerCase()==o.toLowerCase()&&(r=!1,!p(e[o],t[n])))return!1;if(r)return!1}return!0}(E,o);a(v?{msgs:["UTM queries matched"],styles:d,group:l}:{msgs:["UTM queries didn't match"],styles:d,group:l});var I=P(r,v);s.setUTMInclude(i.CampaignId,I?1:-1),a({type:"groupEnd",group:l}),a(I?{msgs:["  UTM Campaign passed"],styles:f,group:u}:{msgs:["  UTM Campaign didn't pass"],styles:h,group:u});return I},formatValue:A},8:{evaluate:function(e,t,n,r,{elog:o,group:i}){let a=i;if(i=a+"-show",r.hiddenSleeknote)return!0;o({msgs:["- Show Count"],type:"groupCollapsed",styles:y,parent:a,group:i}),o({msgs:["Hide"," campaign when show count is ",n],styles:["normal-bold","normal","normal-bold"],group:i});var l=s.getShowCount(r.CampaignId);o({msgs:["Current show count is ",l],styles:g,group:i});const c=l>=n;o(c?{msgs:["Show Count matched"],styles:d,group:i}:{msgs:["Show Count didn't match"],styles:d,group:i});var u=P(t,c);o({type:"groupEnd",group:i}),o(u?{msgs:["  Show Count passed"],styles:f,group:a}:{msgs:["  Show Count didn't pass"],styles:h,group:a});return u}},9:{evaluate:async function(e,t,n,r,{elog:o,group:s}){let a=s;s=a+"-cookie";let l=await u.arequire("float-match");function c(e,t,n){function r(e,t,n){if(!t.target){var r=(t.value||t).split("=");t={target:r[0],matchType:r.length>1?"exactMatch":"exists",value:r[1]}}var a=i.getItem(t.target,!0);null===a&&o({msgs:["  ",t.target," not found"],styles:["normal","italic","normal-bold"],group:s});const c=l(a,t.matchType,t.value);return null!=a&&o({msgs:["  Cookie ",a," "+(c?"matched":"didn't match")],styles:["normal","italic","normal-bold"],group:s}),P(e,c)}t||(t=[]);var a=t.length;if(!a)return!0;const c=t.map(e=>`${e.target} ${e.matchType}${"exists"!=e.matchType?` ${e.value}`:""}`).join("include"==e?" and ":" or ");if(o({msgs:[""+("include"==e?"Show":"Hide")," campaign if: ",c],styles:["normal-bold","normal","normal-bold"],group:s}),"include"!=e){for(;a--;)if(!r(e,t[a]))return o({msgs:["Hide cookies matched"],styles:d,group:s}),!1;return o({msgs:["Hide cookies didn't match"],styles:d,group:s}),!0}for(;a--;)if(!r(e,t[a])){o({msgs:["Show cookies didn't match"],styles:d,group:s});break}return-1==a?(o({msgs:["Show cookies matched"],styles:d,group:s}),!0):void 0}o({msgs:["- Specific Cookie"],type:"groupCollapsed",styles:y,parent:a,group:s});var g=c("exclude",n.exclude);g?g=c("include",n.include):e||"exclude";o({type:"groupEnd",group:s}),o(g?{msgs:["  Specific Cookie passed"],styles:f,group:a}:{msgs:["  Specific Cookie didn't pass"],styles:h,group:a});return g},formatValue:w},10:{evaluate:S(I),formatValue:w},11:{evaluate:S(C),formatValue:w},12:{evaluate:S(b),formatValue:A},13:{evaluate:async function(t,n,o,i,{elog:s,group:a}){let l=a;a=l+"-sitedata";let c=await u.arequire("float-match");function g(t,n,o){let i=e.findPropValue(r.getSession(o.NS),n.target);return P(t,c(i,n.matchType,n.value))}function p(e,n,r,o){if(!(r=r||[]).length)return!0;s({msgs:["include"==n?"Show":"Hide"," campaign if SiteData values are:"],styles:["normal-bold","normal"],group:a});var i=r.filter(function(t){s({msgs:[" - ",`${t.target} ${t.matchType}${"exists"==t.matchType||"notexists"==t.matchType?"":` ${t.value}`}`],styles:["normal","italic"],group:a});var r=e(n,t,o);return"include"!=n&&(r=!r),s(r?{msgs:["  SiteData value matched"],styles:d,group:a}:{msgs:["  SiteData value didn't match"],styles:d,group:a}),r}),l=t?i.length==r.length:0!=i.length;return"include"==n?l:!l}s({msgs:["- SiteData"],type:"groupCollapsed",styles:y,parent:l,group:a});var m=p(g,"exclude",o.exclude,i);m?m=p(g,"include",o.include,i):t||"exclude";s({type:"groupEnd",group:a}),s(m?{msgs:["  SiteData passed"],styles:f,group:l}:{msgs:["  SiteData didn't pass"],styles:h,group:l});return m},formatValue:A},14:{evaluate:function(e,t,n,r,{elog:i,group:a}){let l=a;var c=0;i({msgs:["- Pages Visited"],type:"groupCollapsed",styles:y,parent:l,group:a=l+"-pages-visited"}),i({msgs:["include"==t?"Show":"Hide"," campaign if user has visited more than ",n.value," pages during ",n.option],styles:["normal-bold","normal","normal-bold","normal","normal-bold"],group:a}),u=n.option,p=r.CampaignId,c=u==o.CONDITIONS.PAGESVISITEDOPTIONS.ONESESSION?s.getPagesVisitedCountPerSession(p)||0:s.getPagesVisitedCount(p)||0,function(e,t){e!=o.CONDITIONS.PAGESVISITEDOPTIONS.ONESESSION||s.getPagesVisitedCountPerSessionSetted(t)?e!=o.CONDITIONS.PAGESVISITEDOPTIONS.ALLSESSIONS||s.getPagesVisitedCountSetted(t)||(c+=1,s.setPagesVisitedCount(t,c),s.setPagesVisitedCountSetted(t,!0)):(c+=1,s.setPagesVisitedCountPerSession(t,c),s.setPagesVisitedCountPerSessionSetted(t,!0))}(n.option,r.CampaignId),i({msgs:["Current number of Pages Visited is: ",c],styles:g,group:a});var u,p;const m=n.value<=c;var E=P(t,m);i(m?{msgs:["Pages Visited matched"],styles:d,group:a}:{msgs:["Pages Visited didn't match"],styles:d,group:a});i({type:"groupEnd",group:a}),i(E?{msgs:["  Pages Visited passed"],styles:f,group:l}:{msgs:["  Pages Visited didn't pass"],styles:h,group:l});return E},formatValue:A},15:{evaluate:S(T),formatValue:w},16:{evaluate:async function(t,n,i,s,{elog:a,group:l}){let c=l;l=c+"-shopify";let g=await u.arequire("float-match");function p(t,n,i){let s=e.translateShopifyKeysToSiteDataProperties(n.target,o.CONDITIONS.SHOPIFY_CONDITION_TARGETS),a=e.findPropValue(r.getSession(i.NS),s);return P(t,g(a,n.matchType,n.value))}function m(e,n,r,o){if(!(r=r||[]).length)return!0;a({msgs:["include"==n?"Show":"Hide"," campaign if Shopify values are:"],styles:["normal-bold","normal"],group:l});var i=r.filter(function(t){a({msgs:[" - ",`${t.target} ${t.matchType}${"exists"==t.matchType||"notexists"==t.matchType?"":` ${t.value}`}`],styles:["normal","italic"],group:l});var r=e(n,t,o);return"include"!=n&&(r=!r),a(r?{msgs:["  Shopify value matched"],styles:d,group:l}:{msgs:["  Shopify value didn't match"],styles:d,group:l}),r}),s=t?i.length==r.length:0!=i.length;return"include"==n?s:!s}a({msgs:["- Shopify"],type:"groupCollapsed",styles:y,parent:c,group:l});var E=m(p,"exclude",i.exclude,s);E?E=m(p,"include",i.include,s):t||"exclude";a({type:"groupEnd",group:l}),a(E?{msgs:["  Shopify passed"],styles:f,group:c}:{msgs:["  Shopify didn't pass"],styles:h,group:c});return E},formatValue:A}},evaluateURL:v,containsURL:I,containsGEOID:C,containsIPAddress:T,evaluateHtmlElementValue:b,match:P}}),sndefine("preprocessor-utils",["browser","constants","core-sleeknote","evaluator","utils","storage-instance","location","logger"],function(e,t,n,r,o,i,s){var a=this,l=a.document,c=t.PROFILE;let u=t.POS;function d(){return e.is.phone&&n.hasCustomProp("isRealMobileSite")?!!n.custom("isRealMobileSite"):!e.is.phone||e.notScaledMobileContent()}function g(t,r){var o;if(r?o=(n.editor||n.preview)&&"test"!=n.editor?"mobile"==(n.editor||n.preview).profile?c.MOBILE:c.DESKTOP:e.is.desktop?c.DESKTOP:e.is.tablet?c.TABLET:c.MOBILE:(n.hasCustomProp("displayStatus")&&(o=n.custom("displayStatus")(e,n,t,c)),n.hasCustomProp("displayStatus")&&void 0!==o||(o=c.IGNORE,Array.isArray(t.rules.display)?e.is.desktop?~t.rules.display.indexOf(1)&&(o=c.DESKTOP):e.is.tablet?~t.rules.display.indexOf(1)&&(o=c.TABLET):~t.rules.display.indexOf(2)&&(o=c.MOBILE):e.is.desktop?~[1,3].indexOf(t.rules.display)&&(o=c.DESKTOP):e.is.tablet?~[1,2].indexOf(t.rules.display)&&(o=c.TABLET):~[1,2].indexOf(t.rules.display)&&(o=c.MOBILE))),!r){let r=d();o!=c.MOBILE||r||(o=n.hasCustomProp("displayStatus")&&n.custom("displayStatus")(e,n,t,c)==c.MOBILE?c.MOBILE:c.TABLET)}return o}function p(e){return e==c.MOBILE?1:0}function m(e,t,n,r){var o=n[e];return Array.isArray(o)&&(o=o[p(r)]),void 0===o&&(o=t),o}function f(e,t){return+e.Version||2}function h(e,t){return y(e,t)==u.EMBEDDED}function y(e,t){let n=g(e,t),r=+m("BoxAndBarAlignment",u.POPUP,e,n);return r==u.POPUP&&(r=n==c.MOBILE?u.SLIDEUP:u.POPUP2),n!=c.TABLET||o.contains(r,u.HELLO,u.HELLO2,u.EMBEDDED,u.SIDEBAR_RIGHT,u.SIDEBAR_LEFT)||(r=r==u.BOTTOM_LEFT?u.POPUP7:r==u.BOTTOM_RIGHT?u.POPUP9:u.POPUP5),n!=c.MOBILE||r!=u.BOTTOM_RIGHT&&r!=u.BOTTOM_LEFT&&r!=u.POPUP2||(r=u.SLIDEUP),r}function E(e,t){let n=f(e)>3;return n&&!e.managed&&e.steps.forEach(e=>{let t,n,r,i=!1,s={};for(let a of o.values(e))"form"==a.type&&(s=a),"teaser"==a.type&&(n=a),"success"==a.type&&(r=a),i?"form"==a.type&&(a.teaser=t.name,t.success=a.name):i=a,t=a,delete a.teasers,delete a.successes;n?(i.teaser=n.name,n.form=i.name):delete i.teaser,r?s.success=r.name:delete s.success}),n?e.steps[p(g(e,t))]:e.steps}var S={};var v=new a.Map;function I(e,t){if(!Array.isArray(e.placement))return!!e.placement;let n,[r,i]=e.placement;n=(e.profile||g(e,t))==c.MOBILE&&o.findNode(i)||o.findNode(r);let s=e.campaignId;if(n&&s&&"#sleeknote"!=r){let e=v.get(n);if(e){if(e!=s)return console.log(`Campaign ${s} prevented to use slot reserved for ${e}`),null}else v.set(n,s)}return n}return{findPlacementSlot:I,isRealMobileSite:d,teaserExist:function(e){let t=E(e);return t&&!!Object.keys(t).filter(function(e){return"teaser"==t[e].type}).length},deleteTeaserIf:function(e){e&&e.steps&&Object.keys(e.steps).forEach(function(t){"teaser"==e.steps[t].type&&(e.steps[t].showAfterForm||delete e.steps[t])})},parseOnClick:async function(e){let t;try{await o.DOMContentLoaded(),t=JSON.parse(e),t.selector=(t.classes||[]).reduce(function(e,t){try{l.body.querySelector("."+t.value)&&e.push("."+t.value)}catch(n){const r="."+a.CSS.escape(t.value);l.body.querySelector(r)&&e.push(r)}return e},[]).concat((t.ids||[]).reduce(function(e,t){try{l.body.querySelector("#"+t.value)&&e.push("#"+t.value)}catch(e){}return e},[])).join(","),(t.selector&&l.body.querySelectorAll(t.selector)||[]).length||(t=!1)}catch(e){t=!1}return t},getProfile:g,getPlacement:function(e,t){return m("placement",void 0,e,h(e,t)?c.DESKTOP:g(e,t))},isAnyConditions:function(e){for(var t=e.rules&&e.rules.groups||[],n=0;n<t.length;n++)if(t[n].conditions&&t[n].conditions.length)return!0;return!1},getVersion:f,isSleekbar:function(e,t){return o.contains(y(e,t),u.HELLO,u.HELLO2)},isEmbedded:h,getPosition:y,getShowTeaser:function(e,t){return m("ShowTeaser",!1,e,g(e,t))},getSteps:E,evaluate:async function(e,t,s,a){let l,c=function(t){a({...t,group:e.campaignId})};if(t)l=!0;else{let{dynamicCouponCodes:t}=e;if(t=!!(Array.isArray(t)&&t.length>0)&&t,t){c({msgs:["- Dynamic Coupon Codes"],type:"groupCollapsed",styles:["group"]}),c({msgs:["Show if coupon codes are available in list"],styles:["normal"]});for(const n of t)try{l=(await i.getCouponCodeAvailablity(e.CampaignId,n)).ok}catch(e){c({msgs:["Dynamic Coupon Codes error .. if cors then probably blocked by abuse detection:",e.message],styles:["error"]}),l=!1;break}c({type:"groupEnd"}),c(l?{msgs:["  Dynamic Coupon Codes Availablity passed"],styles:["success"]}:{msgs:["  Dynamic Coupon Codes Availablity didn't pass ... you can check the network logs for more details"],styles:["error"]})}else l=!0;try{l&&(e.CampaignId in S?l=S[e.CampaignId]:(l=await r.includeNote(e,s,a),S[e.CampaignId]=l))}catch(t){if(n.local)throw new Error(t);console.log("evaluator error:",e.CampaignId,t),S[e.CampaignId]=l=!1}}if(l){y(e,t)!=u.EMBEDDED||n.hasCustomProp("lazyEmbedded")||(await o.DOMContentLoaded(),l=!!I(e,t))}return l},resetEvaluator:function(){S={}},getConfProp:function(e,t,n){return m(e,t,n,g(n,!1))},isCorrectDomain:function(e){if(!0===n.local||void 0===e.Hostname||n.preview)return!0;return s.get(n).domainMatches(e.Hostname)},isSessionHidden:function(e){return!n.preview&&i.isSessionHidden(e.CampaignId)},isSessionClosed:function(e){return!n.preview&&i.isSessionClosed(e.CampaignId)}}}),sndefine("preprocessor",["browser","utils","core-sleeknote","storage-instance","logger","constants","preprocessor-utils","global"],function(e,t,n,r,o,i,s,a){var l=i.PROFILE,c=i.POS;let{getProfile:u,getPlacement:d,getVersion:g,isSleekbar:p,isEmbedded:m,getPosition:f,getShowTeaser:h,getSteps:y,evaluate:E,resetEvaluator:S,getConfProp:v,isCorrectDomain:I,isSessionHidden:C,isSessionClosed:T,parseOnClick:b,teaserExist:O,deleteTeaserIf:w}=s;var A=this;let P={},N=!1,R=!1;async function k(e,o,s,a,S,w,P){const N=u(e,a);{let t=N==l.DESKTOP?0:1,{triggers:n}=e.rules;for(var R=n.length;R--;){let e=n[R].value;Array.isArray(e)&&(e=e[t],null==e?n.splice(R,1):n[R].value=e)}}function k(t,n){let{triggers:r}=e.rules;for(var o=r.length;o--;)if(r[o].type==t)return r[o].value;return n}let L=0,D=!0;T(e)||(L=k(1,void 0),0===L?D=!1:void 0===L||(L=1e3*(L||0)));const M=0===k(2,void 0)?-1:k(2,0),x=k(5,!1);var U={options:e.advOptions||[],profile:N,campaignId:e.CampaignId,type:e.SleeknoteType,customerId:e.CustomerId,summaryId:e.summaryId,smartIndex:e.smartIndex,version:g(e,a),triggers:e.rules.triggers,campaignName:e.campaignName,integrationName:e.integrationName,placement:m(e)?e.placement:d(e,a),splitTestId:e.SplitTestId,wait:L,launchTeaserIfExist:D,exit:!T(e)&&k(3,!1),scroll:!T(e)&&M,hidden:k(4,!1),onClick:x&&await b(x),onClickIntent:x,siteData:k(7,!1),shopify:k(8,!1),multimerge:e.multimerge,NS:e.NS,campaignType:e.campaignType,quizOutcomes:e.quizOutcomes,managed:e.managed,parent:e.parent,sub:e.sub,linked:e.linked,images:e.images};if(U.siteData)try{U.siteData=JSON.parse(U.siteData)}catch(e){U.siteData=!1}if(U.shopify)try{U.shopify=JSON.parse(U.shopify)}catch(e){U.shopify=!1}U.version<4&&(U.successAction=v("SuccessAction",void 0,e),U.successLandingPage=v("SuccessLandingPage",void 0,e));let _,B=function(e){S({...e,group:U.campaignId})};if(a)_=!0,"outofstock"!=(U=t.extend(U,{hidden:!n.editor&&!n.preview})).type&&B({msgs:["SLEEKNOTE MESSAGE:"," manual trigger triggered on rejected campaign, ignoring rules and showing the campaign anyway."],styles:["message","normal-bold"]});else if(791==U.customerId&&n.hasCustomProp("demoCampaignIds")&&n.custom("demoCampaignIds").some(e=>e==U.campaignId))B({msgs:["Demo campaign always shows"],styles:[""]}),_=!0;else{if(!I(e))return B({msgs:["Campaign domain doesn't match current domain"],styles:["error"]}),void(U.profile=l.IGNORE);if(U.profile<3)return void B({msgs:["Profile(Mobile/Desktop) doesn't match current one"],styles:["error"]});const o=n.getDomainLimits&&n.getDomainLimits()||{},s=o[e.Hostname]||o["All non-selected domains"],a=t.getAdvOption({options:e.advOptions},"impressionOverride",1),c=r.getSessionShowCount(),u=w&&P.includes(e.CampaignId);if(!u&&(void 0!==s&&c>=s)){if(!a)return B({msgs:[`The limit of ${s} impressions for this domain has been reached with ${c} campaigns shown in this session, more info: https://help.sleeknote.com/advanced-use/impression-limit`],styles:["error"]}),void(U.profile=l.IGNORE);B({msgs:["Ignoring impression limit, more info: https://help.sleeknote.com/hc/en-us/articles/7006752027037-Impression-Limit"],styles:["normal"]})}let d=U.multimerge;if(d&&"DateMultiMerge"==d.type){let e,t=new Date,o=[t.getFullYear(),t.getMonth(),t.getDate()];e=void 0!==n.mergeId?d.rows[n.mergeId]:d.rows.find(e=>e[d.id].join()==o.join()),e&&(U.multimergeCurrent=Array.from(e),r.setMergeId(U.campaignId,o));let i=r.getMergeId(U.campaignId,o);Array.isArray(i)&&i.join()!=o.join()&&r.brandNewDay(U.campaignId)}const g=k(5);let f=!u&&C(e);if(f&&!g||(_=await E(e,!1,u&&w,S)),!_)return f&&!g&&B({msgs:["Campaign is hidden for this session because it has been already seen and closed"],styles:["error"]}),void(U.profile=l.IGNORE);if(m(e)&&(U.placement=e.placement),!t.empty(e.advOptions)){const t=e.advOptions.find(e=>"note-priority"==e.id);t&&t.values.length&&B({msgs:["Campaign order is ",t.values[0].value],styles:["normal","normal-bold"]})}if(t.empty(e.rules.triggers)||p(e)||m(e)){if(!(p(e)||m(e)||O(e)))return B({msgs:["Campaign doesn't have triggers or teaser so it can't show"],styles:["error"]}),void(U.profile=l.IGNORE);B({msgs:["Campaign has ","no triggers"],styles:["normal","normal-bold"]})}else if(e.smarts&&e.smartIndex&&1==e.smartIndex.substring(0,1))B({msgs:["Campaign trigger is ","automated",", a split-test has been created"],styles:["normal","normal-bold","normal"]});else{B({msgs:["Campaign triggers are:"],styles:["normal"]}),e.rules.triggers.forEach(({type:e})=>{let n=k(e);try{n=JSON.parse(k(e))}catch(e){}switch(e){case 1:B({msgs:[`- ${i.TRIGGERS.TYPES[e]} `,n," seconds"],styles:["normal","normal-bold","normal"]});break;case 2:B({msgs:[`- ${i.TRIGGERS.TYPES[e]} `,n,"%"],styles:["normal","normal-bold","normal"]});break;case 3:case 4:B({msgs:[`- ${i.TRIGGERS.TYPES[e]}`],styles:["normal"]});break;case 5:B({msgs:[`- ${i.TRIGGERS.TYPES[e]}:`],styles:["normal"]});const r=n.classes.map(e=>e.value).join(", "),o=n.ids.map(e=>e.value).join(", ");t.empty(r)||B({msgs:["    Classes: ",r],styles:["normal","normal-bold"]}),t.empty(o)||B({msgs:["    Ids: ",o],styles:["normal","normal-bold"]});break;case 7:B({msgs:[`- ${i.TRIGGERS.TYPES[e]}:`],styles:["normal"]}),n.forEach(e=>B({msgs:["    ",`${e.property} ${e.type} ${e.value}`],styles:["normal","normal-bold"]}))}});const r=U.wait||U.exit||U.scroll||U.hidden||U.onClick||U.siteData||U.shopify||!D;if(!(n.preview||r||p(e)||O(e)||u))return B({msgs:["Campaign has no active triggers, doesn't have teaser, and isn't a sleekbar so there is no way for it to show so it's being skipped. Add a teaser or make sure your triggers are added and correct "],styles:["error"]}),void(U.profile=l.IGNORE);r||B({msgs:["Campaign"," has already been triggered this session",", we won't automaticly trigger it again"],styles:["normal","normal-bold","normal"]})}B({msgs:[["ZERO?","UNKN","IGNORE","DESKTOP","TABLET","MOBILE"][U.profile]," version was chosen"],styles:["normal-bold","normal"]})}var H=f(e);if((U.hidden||p(e)||m(e))&&(U.wait=0,U.exit=!1,U.scroll=0),U.version<=3){var V=h(e);V||!1===V||(V=!0),U.profile==l.MOBILE&&U.version<3&&(V=!1),H==c.POPUP&&U.version<3&&(V=!1),(p(e)||1==U.version&&H==c.POPUP2)&&(V=!1),V&&(e.steps.teaser={type:"teaser",form:"form"}),"SuccessStep"==U.successAction?(e.steps.success={type:"success"},e.steps.form.success="success"):"redirect"==U.successAction&&U.successLandingPage?e.steps.form.redirect=U.successLandingPage:delete e.steps.success,delete U.successAction,delete U.successLandingPage}n.tabletUsesMobile=!1,U.position=H;var G=U.profile==l.MOBILE,F=y(e);return U.steps={},U.profile==l.MOBILE&&O(e)&&(U.wait=0),Object.keys(F).forEach(function(n){var o,i=t.extend({},F[n],{name:n,mobile:G,campaignId:U.campaignId,customerId:U.customerId,version:U.version,position:H,placement:U.placement,profile:U.profile,hostname:e.Hostname,noteType:U.type,campaignName:e.campaignName,integrationName:e.integrationName,formElements:e.formElements,NS:U.NS,quizOutcomes:U.quizOutcomes});if(t.empty(i.redirect)||"string"!=t.typeStr(i.redirect)||(i.redirect=(~(o=i.redirect).indexOf("http://")||~o.indexOf("https://")?"":"//")+o),U.version>3?i.id="#sleeknote-"+n.replace(/[^a-zA-Z0-9\-\_\:\.\[\]]/g,""):i.id="teaser"==i.type?"#sleeknoteMinified":"form"==i.type?"#sleeknoteBox":"#sleeknoteSuccess",U.profile,l.TABLET,U.profile==l.DESKTOP&&(i.relativeWidth=0),t.contains(i.type,"teaser")&&(U.profile,l.TABLET,U.profile==l.DESKTOP&&(i.relativeWidth=0),i.showAfterForm)){r.getShowCount(U.campaignId)?(U.hidden=!1,U.launchTeaserIfExist=!0,U.wait>0&&(U.wait=0)):(U.wait>0&&(U.hidden=!0),U.launchTeaserIfExist=!1)}U.steps[n]=i}),Object.keys(U.steps).forEach(function(t){var n=U.steps[t];n.timeZoneOffset=e.timeZoneOffset||0,n.timeZone=e.timeZone,n.locale=e.locale||(A.navigator.userLanguage||A.navigator.language).split("-")[0]}),U.splitTestId&&(o[U.splitTestId]||(o[U.splitTestId]=[]),o[U.splitTestId].push(s)),U}return async function(e,r,s,a){if(!Array.isArray(e))return[];let c;e.length&&(e.forEach(function(e){e.Version<=3&&(e.steps={form:{type:"form",teaser:"teaser"}});let t=u(e,r),n=O(e)&&t==l.MOBILE;Array.isArray(e.smarts)&&2==e.smarts.length&&(e.smarts=e.smarts[t==l.DESKTOP?0:1],e.smarts.length||(e.smarts=void 0)),(p(e)||m(e)||n)&&(n&&Array.isArray(e.smarts)?e.rules.triggers=e.rules.triggers.filter(e=>2==e.type||4==e.type||5==e.type):e.rules.triggers=[]),p(e)&&w(e)}),R||e.some(function(e,t){let n=u(e,r);return n!=l.MOBILE&&n!=l.IGNORE?e.smarts:void 0})&&(R=!0,c=await A.arequire("split-tests"),({splitTests:P,sleekNotes:e}=c.generateFromSmarts(e,r))));let d=o.log(i.CORE.LOGLEVELS.CS,i.CORE.FORMATTERS.SNDEBUG),g=[];S();let f,h="campaigns";r||d({msgs:["CAMPAIGNS:"],styles:["color: rgb(84, 87, 255); font-weight: bold; font-size: 16px;"],type:"group",group:h});for(let[o,i]of t.entries(e)){let e=!1,t=!1,l=d;(i.smartIndex&&"1"!=i.smartIndex[0]||r)&&(l=()=>{}),l({msgs:[`${n.getCampaignName(i)} - ${i.CampaignId}`],type:"groupCollapsed",styles:["group"],parent:h,group:i.CampaignId});try{"outofstock"!=i.SleeknoteType||r||n.preview?e=await k(i,P,o,r,d,s,a):t=!0}catch(e){}l({type:"groupEnd",group:i.CampaignId}),e?l({msgs:["INCLUDED"],styles:["success"],group:h,after:i.CampaignId}):t||l({msgs:["REJECTED"],styles:["error"],group:h,after:i.CampaignId}),g.push(e)}return N||c||!g.some(function(e){return e&&e.splitTestId})||(c=await A.arequire("split-tests")),c&&!N?(f=c.filterConfig(g,P,{elog:d,group:h}),N=!0):f=g.filter(e=>e),r||d({type:"groupEnd",group:h}),f}}),sndefine("launcher",["core-sleeknote","constants","event-emitter","browser","utils","storage-instance","location","preprocessor","preprocessor-utils","global","logger","anchors"],function(e,t,n,r,o,i,s,a,l,c,u,d){var g=this,p=g.document;const m=u.log(t.CORE.LOGLEVELS.CS,t.CORE.FORMATTERS.SNDEBUG),f=m,h=t.CORE.CREATOR.API,y=t.CORE.COMMANDS;let E,S,v,I=[],C=[],T=Object.create(null),b=Object.create(null),O=[],w=-1,A=String(s.get(e));function P(t){let n="beforeCampaignCreate";return e.hooks[n]&&e.hooks[n](t),!(t.multimerge&&!t.multimergeCurrent)||(f({msgs:[`No mergedata for campaign '${t.campaignId}' was found`],styles:["error"]}),!1)}async function N(e,n){await H();let r=Object.keys(T);l.resetEvaluator(),i.resetMemData();let s=[],a=[];I.forEach(function(e){if(e.parent||e.managed)return;let t=e.CampaignId;~r.indexOf(t)&&s.push(e),a.push(e)}),C.length=0,O.length=0,w=-1;let c=await x(a,{ignoreRules:!1,andLaunch:!1,excludeConditions:e==t.CORE.EVENTS.SITEDATA&&[2,8,14],shownCampaigns:s.map(e=>L(e))}),u=c.length;if(s.length&&u)for(;u--;){let t=M(L(c[u]),s);if(~t){let r,o=L(s[t]);try{r=await T[o],"function"==typeof n&&n(r),20==r.config.position&&"locationChange"==e||c.splice(u,1)}catch(e){delete T[o],delete b[o]}s.splice(t,1)}}for(let e of o.values(s)){let t=L(e);try{let e=await T[t];f({msgs:["Removing campaign ",t," as it should not show because of last re-evaluation"],styles:["normal","normal-bold","normal"]}),await k(t,!0),e.destroy(!0,!1,!0)}catch(e){}}B(c)}async function R(){let t=s.reset(e);t.matches(A,e.custom("reloadOnHashChange"))||(A=String(t),N("locationChange"))}async function k(e,t,n=!0,r){if(!T[e])return;let o=await T[e],i=o.config.position,s=M(e,C);if(~s){C.splice(s,1);let e=O.indexOf(i);~e&&O.splice(e,1),w==i&&(w=-1)}t||(s=M(e,I),~s&&I.splice(s,1)),o.destroy(n,r),delete T[e],delete b[e]}function L(e){return e.CampaignId||e.campaignId}function D(e){let n,r=I.length;for(;r--;)if(n=I[r],L(n)==e&&l.getProfile(n)>t.PROFILE.IGNORE)return n.hiddenSleeknote=!0,n.SplitTestId="",a([n],!0).then(function(e){let t=e.shift();if(C.push(t),P(t))return j(t)})}function M(e,t){for(let[n,r]of o.entries(t))if(L(r)==e)return n;return-1}async function x(t,{ignoreRules:n,andLaunch:r=!0,excludeConditions:o,shownCampaigns:s,skipProcessing:l}={}){let u,d=[],g=[];if(e.preview&&(C=[]),!t)return g;if(Array.isArray(t)||(t=[t]),t.forEach(e=>{-1==M(L(e),I)&&I.push(e),d.push(e),e.dynamicCouponCodes&&Array.isArray(e.dynamicCouponCodes)&&e.dynamicCouponCodes.forEach(function(t){i.getCouponCodeAvailablity(L(e),t)}),S||(S=c.setInterval(R,1e3))}),d.length)if(l)d.forEach(e=>{M(e.campaignId,C)>-1||(C.push(e),e.parent||g.push(e))});else{(await a(d,n,o,s)).forEach(e=>{M(e.campaignId,C)>-1||(C.push(e),e.parent&&!n||g.push(e))}),g.length&&(g=U(g))}return r&&(u=B(g)),u=v=g,u}function U(n){if(e.editor||e.preview)return n;function r(e){var n=e.position;return n==t.POS.EMBEDDED?Array.isArray(e.placement)?e.placement[e.profile==t.PROFILE.DESKTOP?0:1]:e.placement:n}return n.sort(function(e,t){var n=+o.getAdvOption({options:e.options},"note-priority",1)||0;return(+o.getAdvOption({options:t.options},"note-priority",1)||0)-n}),(n=n.filter(function(e){if(P(e)){if(!e.hidden){let i=r(e);switch(i){case t.POS.SIDEBAR_LEFT:i=t.POS.BOTTOM_LEFT,f({msgs:["Sidebar left and bottom left show in the same position so treating as the same"],styles:["normal"]});break;case t.POS.SIDEBAR_RIGHT:i=t.POS.BOTTOM_RIGHT,f({msgs:["Sidebar right and bottom right show in the same position so treating as the same"],styles:["normal"]});break;case t.POS.SLIDEUP2:i=t.POS.SLIDEUP,f({msgs:["Mobile form slides in from the top - only difference is teaser position so treating as mobile form top slide in"],styles:["normal"]})}if(O.includes(i)){if(e.onClick)return f({msgs:["Position of campaign ",e.campaignId," is taken, as it has an onClick trigger, we will remove the teaser"],styles:["normal","normal-bold","normal"]}),l.deleteTeaserIf(e),e.exit=!1,e.wait=0,e.scroll=0,e;var o=n.find(e=>r(e)==i);if(o){if(o.onClick)return f({msgs:["Position of campaign ",o.campaignId," is taken, as it has an onClick trigger, we will remove the teaser"],styles:["normal","normal-bold","normal"]}),l.deleteTeaserIf(o),o.exit=!1,o.wait=0,o.scroll=0,e;if(!(e.exit&&w<0))return void f({msgs:["Position of campaign ",e.campaignId," is taken by",o.campaignId,"so it won't show"],styles:["normal","normal-bold","normal","normal-bold","normal"]});w=i,l.deleteTeaserIf(e),e.wait=0,e.scroll=0,f({msgs:["Position of campaign ",e.campaignId," is taken by ",o.campaignId,"as it has an exit trigger, we will remove the teaser"],styles:["normal","normal-bold","normal","normal-bold","normal"]})}}else if(e.exit&&w<0&&(w=i,!l.teaserExist(e)))return e;O.push(i)}return e}})).sort(function(e,t){function n(n){return e[n]&&t[n]?e[n]-t[n]:t[n]?1:e[n]?-1:void 0}var r;return void 0!==(r=n("scroll"))||void 0!==(r=n("wait"))||void 0!==(r=n("exit"))?r:0}),n}p.addEventListener(e.eventName,function(e){e.data.type==t.CORE.EVENTS.SITEDATA&&N(e.data.type,function(e){e.triggerOnSiteDataIf()})});const _={};function B(e){let t=e.length,n=[];for(;t--;)n.push(j(e[t]))}async function H(){let e=await d.recoverIfNeeded(),t=[],r=[];if(e.length){let o=K().visible;console.log(e,o);for(let{campaignId:s,name:a}of Object.values(o))for(let o of e)o==a+s&&t.push(k(s,!0).then(()=>new c.Promise(e=>{let t=I[M(s,I)];if(t){let r=n.createUserEventName(t.NS),i=({data:t})=>{"exit"==t.type&&t.noteName+t.campaignId==o&&(p.removeEventListener(r,i),e(o))};p.addEventListener(r,i)}})).then(()=>i.unHideSession(s)).then(()=>i.openSession(s)).then(()=>{r.push(s)}))}return c.Promise.all(t).then(()=>r)}var V,G,F;async function j(r){let i,s,a=o.extend(r),l=L(a);return l in T&&(i=await T[l]),i&&20!=i.config.position?(i=await T[l],["wait","onClick"].forEach(function(e){i.config[e]=a[e]})):T[l]=new c.Promise(async function(r,o){s=a.position==t.POS.EMBEDDED,await H(),await g.arequire("package-notes");let u=[],p=(e,{template:t,fontsToLoad:n})=>{let r;for(let t of C)t.campaignId==e&&(r=t);r?(r.template=t,r.fontsToLoad=n,u.push(j(r))):_[e]={template:t,fontsToLoad:n}};return _[l]&&(Object.assign(a,_[l]),delete _[l]),s?(({EmbeddedCampaign:V}=await g.arequire("package-embedded")),i=await V.create({config:a},p)):(({AnchoredCampaign:G,orchestrator:F}=await g.arequire("package-anchored")),i=await G.create({config:a},p)),u.length&&await c.Promise.all(u),await d.reorderAnchors(),i&&!e.editor&&(s||a.managed||$(i,a)),i?(n(t.CORE.EVENTS.READY,i),b[l]=i,a.sub,r(i)):o(a)}),T[l]}function $(t,r,o="form"){if(t&&!e.editor){if(r.exit&&Y(),r.scroll&&q(),t.teaserExist&&!t.config.hidden&&t.canBeLaunched()&&(t.config.wait>0||t.config.launchTeaserIfExist)){let e=t.first("teaser");n(y.QUEUE,{creator:h,name:e,origin:t.notes[e],trigger:"none"})}t.launchTriggers((e,t)=>{if(("timer"==e||"notification"==e)&&t.canBeLaunched()){let e=t.first(o);n(y.QUEUE,{creator:h,name:e,origin:t.notes[e],trigger:"timer"})}},t.config.launchTeaserIfExist)}}function Y(){r.is.desktop&&(o.listener(p.documentElement,"add",function(e){if(!e.relatedTarget&&e.clientY<10)for(let e of Object.values(T))e.then(function(e){if(e.ifTrigger("exit")&&e.canBeLaunched()){let t=e.first("form");n(y.OPEN,{creator:h,name:t,origin:e.notes[t],trigger:"exit"})}}).catch(()=>{})},!0)("mouseout"),Y=()=>{})}function q(){var e,t=function(){E=0;for(let e of Object.values(T))e.then(function(e){if(e.ifTrigger("scroll")&&e.canBeLaunched()){let t=e.first("form");n(y.OPEN,{creator:h,name:t,origin:e.notes[t],trigger:"scroll"})}}).catch(()=>{})};o.listener(g,"add",function(n){var r=+new Date;E&&r-E<1e3||(c.clearTimeout(e),e=c.setTimeout(t,2e3),E=r)},!0)("scroll"),q=()=>{}}function W(e=!0){return{result:e,handled:!0}}function K(){let e={campaigns:{},visible:{}};for(let[t,n]of o.entries(b)){let r=o.extend(n.config);delete r.steps,r.notes=Object.keys(n.notes).map(e=>n.notes[e].config),e.campaigns[t]=r,"EmbeddedCampaign"==n.kind&&n.visibleNote.noteName&&(e.visible[t]={campaignId:t,name:n.visibleNote.noteName,kind:"EmbeddedCampaign"})}if(F)for(let[t,n]of o.entries(F.visibles))e.visible[t]={campaignId:t,name:n.noteName};return e}function z(e,t){if(t){let n=e.notes[t];if(!n)for(n of o.values(e.notes)){if(n.config.type==t){t=n.config.name;break}n=void 0}n||(t=void 0)}else t=e.first("form");return t}let J={guessNoteName:z,reorderAnchors:function(){return d.reorderAnchors()},destructivelyChangeCampaign:function(e,t){let n=M(e,C),r=b[e];if(n<0||!r)return;let o=C[n];return r.destroy(!0),delete T[e],delete b[e],o=t(o,r),j(o)},status:K,API:function({command:e,noteName:n,keep:r,config:o,campaign:s,onlyShowPreloaded:a,campaignId:c,ignoreRules:u,excludeConditions:d,skipProcessing:g,abrupt:p,complete:h}){const y=t.CORE.API;switch(e){case y.LAUNCH:return W(async function(e,t){if(t&&i.isSessionClosed(e))return void console.warn("can not show toggler onlyShowPreloaded:"+t+" id:",e);let n=T[e];if(!n&&!t&&(n=D(e),!n))return void console.warn("campaign ",e," failed to load");let r=await n;if(r)return r.config.smartIndex=0,r.tameTeaser(),r;console.warn("campaign ",e," failed to load")}(c,a).then(function(e){if(e)return(n=z(e,n))?e.API({command:"open",noteName:n}).result:(f({msgs:[`noteName ${n} does not exist in ${c}`],styles:["error"]}),{result:!1,handled:!0})}));case y.EVALUATE:return W(o?l.evaluate(o,u,d,m):N());case y.ADD:return W(x(o,{skipProcessing:g,ignoreRules:u}));case y.REMOVE:return W(k(c,!1,h,p));case y.ORCHESTRATOR:return W(F);case y.PROFILE:return W(function(e){return l.getProfile(e)}(o));case y.BUSY:for(let e of Object.values(b))if(e.busy)return W(!0);return W(!1);case y.VISIBLE:return s?s.API({command:e}):W({})}return{handled:!1}},forceLoad:D,add:x,remove:k,createCampaign:j,prioritize:U,preprocessor:a,get rawConfigs(){return I},get includedConfig(){return C},get campaigns(){return T},get campaignsResolved(){return b},get justAdded(){return v},onEvaluate:N,initializeLayout:H,launchAnchoredCampaign:$};return e.expose(J,"launcher"),J}),sndefine("core-api",["launcher","core-sleeknote","utils","constants","global","storage-instance","site-data","event-emitter"],function(e,t,n,r,o,i,s,a){const l=r.CORE.API;let c=new this.Set,u={};function d(e,t){return e}function g(t,r){let o=[],i=l.CLOSE,s=e.status().visible;for(let a of n.values(s)){let n=e.campaignsResolved[a.campaignId];if(n&&t&&t.config.campaignId!=a.campaignId)continue;let s=n.API({command:i,ffwd:r,noteName:a.name});s.handled&&o.push(s.result)}return n.allSettled(o).then(function(){return t?[t]:Object.values(s)})}function p(...m){let f,h,y,E,S,v,I,C,T,b,O,w,A,P,N,R,k,L,D=m[0],M=m[1],x=e.campaignsResolved[M];switch(D){case l.SITEDATA:R=m[1];break;case l.PURCHASE:k=m[1],R=m[2];break;case l.SITEDATAOWN:break;case l.POSITION:y=m[2],//!!!
T=m[3],v=m[4];break;case l.BLINK:f=m[2],v=m[3];break;case l.CLOSEALL:C=m[1];for(let e of c)e.ffwd();return o.Promise.all(Object.keys(e.status().visible).map(e=>p("close",e,C)));case l.STATUS:return d(e.status());case l.CAMPAIGNS:return d(e.campaigns);case l.RESET:S=m[1];break;case l.REMOVE:E=m[2],I=m[3];break;case l.CLOSE:C=m[2];break;case l.REPOSITION:f=m[2];break;case l.OPEN:case l.REVEAL:case l.MAXIMIZE:case l.MINIMIZE:case l.QUEUE:f=m[2],L=m[3];break;case l.NOTE_CONFIG:f=m[2];break;case l.AFTERRENDER:v=m[2];break;case l.NOTE_RERENDER:v=m[3],f=m[2];break;case l.APPLY_CONFIG:f=m[2],h=m[3];break;case l.ADD:h=m[1],N=!!m[2],A=!!m[3];break;case l.PROFILE:h=m[1];break;case l.MERGE:h=m[1],b=m[2];break;case l.HOOK:O=m[1],v=m[2];break;case l.LAUNCH:w=m[2],f=m[3];break;case l.EVALUATE:h=m[1],A=m[2],P=m[3]}return function({command:c,campaignId:m,noteName:f,config:h,position:y,complete:E,keep:S,callback:v,abrupt:I,ffwd:C,placement:T,mergeId:b,hookName:O,onlyShowPreloaded:w,ignoreRules:A,excludeConditions:P,skipProcessing:N,trigger:R,properties:k,source:L}){let D={handled:!1},M=e.campaignsResolved[m];switch(c){case l.SITEDATAOWN:M&&(D={result:s.getOwn(M),handled:!0});break;case l.SITEDATA:D={result:k?s.add(k):s.get(),handled:!0};break;case l.PURCHASE:a("purchase",{creator:r.CORE.CREATOR.API,source:L,properties:k}),D={result:!0,handled:!0};break;case l.WAIT:return new o.Promise(t=>{let n=()=>{e.API({command:l.BUSY}).result?o.setTimeout(n,100):t()};n()});case l.BUSY:D=e.API({command:c});break;case l.LAUNCH:D=e.API({command:c,campaignId:m,onlyShowPreloaded:w,noteName:f});break;case l.EVALUATE:D=e.API({command:c,config:h,ignoreRules:A,excludeConditions:P});break;case l.VISIBLE:D=e.API({command:c,campaign:M});break;case l.ADD:D=e.API({command:c,config:h,skipProcessing:N,ignoreRules:A});break;case l.PROFILE:D=e.API({command:c,config:h});break;case l.ORCHESTRATOR:D=e.API({command:c});break;case l.REMOVE:M&&(D=e.API({command:c,campaignId:m,complete:E,abrupt:I}));break;case l.CLOSE:D={result:g(M,C),handled:!0};break;case l.AFTERRENDER:M&&(D=M.API({command:c,callback:v}));break;case l.POSITION:if(M){let t=y==r.POS.EMBEDDED;if(t&&!T)break;if(M.config.position==y){D={result:o.Promise.resolve(),handled:!0};break}let n=e.destructivelyChangeCampaign(m,function(e){e.position=y;for(let n of Object.keys(e.steps))e.steps[n].position=y,t&&(e.steps[n].placement=T);return t&&(e.placement=T),v&&(e=v(e)),e});D={result:n,handled:!0}}break;case l.REPOSITION:M&&(D=M.API({command:c,noteName:e.guessNoteName(M,f)}));break;case l.MAXIMIZE:case l.MINIMIZE:case l.OPEN:case l.REVEAL:case l.QUEUE:if(M){if(n.contains(c,l.OPEN,l.REVEAL)&&t.editor)for(let t of Object.values(e.status().visible))t.campaignId!=m&&("EmbeddedCampaign"!=t.kind&&"EmbeddedCampaign"!=M.kind||p("close",t.campaignId));D=(f=e.guessNoteName(M,f))?M.API({command:c,noteName:f,trigger:R}):{result:!1,handled:!0}}break;case l.NOTE_RERENDER:M&&(D=M.API({command:c,noteName:e.guessNoteName(M,f),callback:v}));break;case l.NOTE_CONFIG:M&&(D=M.API({command:c,noteName:e.guessNoteName(M,f)}));break;case l.APPLY_CONFIG:M&&(D=M.API({command:c,noteName:e.guessNoteName(M,f),config:h}));break;case l.MERGE:let u=h.multimerge;if(h.multimergeCurrent=[],u&&"DateMultiMerge"==u.type){let e;e=Array.isArray(b)?u.rows.find(e=>e[u.id].join()==b.join()):u.rows[b],e&&(h.multimergeCurrent=Array.from(e),i.setMergeId(h.campaignId,b))}D={handled:!0,result:h.multimergeCurrent};break;case l.HOOK:t.hooks[O]=v,D.handled=!0;break;default:console.warn("Unknown API command:",c)}if(D.handled){let e=d(D.result);return D.result,o.Promise,e}if(n.contains(c,l.MAXIMIZE,l.MINIMIZE,l.OPEN,l.REVEAL,l.QUEUE,l.CLOSE))return c!=l.CLOSE&&(t.editor&&(u={}),u[m]={campaignId:m,noteName:f,command:c}),o.Promise.resolve()}({campaign:x,command:D,campaignId:M,noteName:f,config:h,position:y,complete:E,keep:S,callback:v,abrupt:I,ffwd:C,placement:T,mergeId:b,hookName:O,onlyShowPreloaded:w,ignoreRules:A,excludeConditions:P,skipProcessing:N,trigger:L,properties:R,source:k})}return this.document.addEventListener(t.eventName,function(e){if(e.type==t.eventName){let{type:t,animator:n,status:o,campaignId:i}=e.data;if(t==r.CORE.EVENTS.ANIMATING)c[o?"add":"delete"](n);else if(t==r.CORE.EVENTS.READY&&i in u){let{command:t,noteName:n}=u[i];delete u[i],n in e.data.boxes&&p(t,i,n)}}}),p}),sndefine("package-core-boot",["launcher","core-sleeknote","event-emitter","core-api","constants","storage-instance","browser","site-data"],function(e,t,n,r,o,i,s,a){return{launcher:e,coreConfig:t,emit:n,API:r,CONST:o,storage:i,B:s,siteData:a}});